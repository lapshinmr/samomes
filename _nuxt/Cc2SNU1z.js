import{_ as q}from"./Cm755wyf.js";import{_ as Q,a as X,b as Y}from"./DJvIWnyp.js";import{f as Z,b as O,a as ee}from"./FI_hX0un.js";import{V as $,f as te}from"./D5tl2z6m.js";import{e as j,F as g,h,o as r,J as P,j as n,w as t,a as m,c as p,i as V,t as f,k as se,H as E,r as ae,f as oe,b as o,d as i,A as ne,L as x,I as D,B as re}from"./CPabbfrG.js";import{A as le,F as ue}from"./BoIzNFIF.js";import{u as ie}from"./C0KuycHS.js";import{u as J}from"./Xvj3NoMV.js";import{u as L}from"./Dnq6Zlx_.js";import{b as de}from"./BBggtmFf.js";import{V as me,a as ce,d as fe,b as pe,c as _e}from"./B9Mi8x6_.js";import{V as ge,a as he}from"./Bn1LcLHU.js";import{a as N,V as M,b as ye}from"./_jEhrEot.js";import{_ as ve}from"./BFRV0WzD.js";import{_ as ke}from"./DKoU_7P-.js";import"./B1q7paHM.js";import"./3tDC6CiW.js";import"./C_KzYpfI.js";import"./B931MWyl.js";import"./AWOycWIW.js";import"./D0IulFyo.js";import"./CgmFw_iJ.js";import"./DjjMRDDF.js";import"./BL0FC99F.js";import"./BXpKWP0_.js";import"./CYc57goH.js";import"./BRCeRKMw.js";import"./DjacT3cQ.js";import"./GV1W1iWC.js";import"./81gvhX0P.js";import"./7gIdKzNg.js";/* empty css        */import"./U8q07F0Q.js";const be={class:"d-flex justify-space-between align-center w-100"},Ce={class:"text-truncate text-subtitle-2 text-sm-h6 font-weight-regular mx-2"},De={class:"text-uppercase",style:{overflow:"hidden","text-overflow":"ellipsis"}},Ve={key:0,class:"text-h6 text-sm-h5 ml-2"},we=j({name:"ScheduleButton",__name:"ScheduleButton",props:{fertilizerName:{},amount:{},status:{}},setup(w){const v=w,k=g(()=>["primary","primary","grey"][v.status]),d=g(()=>["outlined","elevated","outlined"][v.status]);return(u,z)=>(r(),h($,P(u.$attrs,{block:"",size:"x-large",tile:"",color:n(k),variant:n(d),class:"mb-2 px-3",disabled:!u.amount}),{default:t(()=>[m("div",be,[m("div",Ce,[m("div",De,f(u.fertilizerName),1)]),u.amount>0?(r(),p("div",Ve,f(("format"in u?u.format:n(Z))(u.amount)),1)):V("",!0)])]),_:1},16,["color","variant","disabled"]))}}),Se={class:"no-break"},$e={class:"d-flex flex-column text-h4 text-center mb-4"},xe={style:{"text-transform":"capitalize"}},ze=j({name:"ScheduleCard",__name:"ScheduleCard",props:{schedule:{},scheduleIndex:{}},setup(w){const{t:v}=se(),k=E(),d=ie(),u=J(),{appRoutes:z}=L(),s=w,l=ae(0),R=g(()=>{const e=new Date(s.schedule.startDate);return O(e)}),T=g(()=>{const e=new Date(s.schedule.startDate),a=new Date(e.setDate(e.getDate()+s.schedule.dosing.daysTotal-1));return O(a)}),y=g(()=>s.schedule.dosing.daysTotal),A=g(()=>(l.value+1)/y.value*100),B=g(()=>{const[e,...a]=JSON.parse(JSON.stringify(s.schedule.days));return e.fertilizers={...s.schedule.waterChangeDay.fertilizers,...e.fertilizers},[e,...a]});oe(()=>{l.value=I()});function I(){const e=B.value.findIndex(a=>de(a.fertilizers).some(_=>_.status===le.ACTIVE&&_.amount));return e===-1?y.value-1:e}function W(e,a,_){u.toggleDay(e,a,_)}function S(e,a){u.toggleWaterChangeDay(e,a)}function G(){l.value>=1&&(l.value-=1)}function H(){l.value<y.value-1&&(l.value+=1)}async function K(){d.setDaysTotal(s.schedule.dosing.daysTotal),d.setFertilizersRegime(s.schedule.dosing.fertilizersRegime),d.setTank(s.schedule.dosing.tank),d.setDoses(s.schedule.dosing.doses),await k.push(`${z.value.dosing.path}?schedule=${s.scheduleIndex}`)}return(e,a)=>{const _=we;return r(),h(me,P(e.$attrs,{elevation:"4"}),{default:t(()=>[o(ce,{class:"d-flex justify-space-between align-start font-weight-regular flex-nowrap"},{default:t(()=>[m("div",Se,f(e.schedule.dosing.tank.name),1)]),_:1}),o(fe,{class:"mt-n3"},{default:t(()=>[i(f(n(R))+" - "+f(n(T)),1)]),_:1}),o(pe,{class:"mt-6 mb-4"},{default:t(()=>[o(ge,{modelValue:n(l),"onUpdate:modelValue":a[0]||(a[0]=b=>ne(l)?l.value=b:null)},{default:t(()=>[(r(!0),p(D,null,x(e.schedule.days,(b,F)=>(r(),h(he,{key:`${F}-content`},{default:t(()=>[o(N,null,{default:t(()=>[o(M,{cols:"12",sm:"10","offset-sm":"1"},{default:t(()=>[m("div",$e,[m("div",null,[m("span",xe,f(("getWeekday"in e?e.getWeekday:n(ee))(b.date)),1),a[1]||(a[1]=i(", ")),m("span",null,f(("formatDate"in e?e.formatDate:n(O))(b.date)),1)])]),F===0?(r(!0),p(D,{key:0},x(e.schedule.waterChangeDay.fertilizers,(C,c)=>(r(),p("div",{key:`water_change_${c}`},[o(_,{"fertilizer-name":c,amount:C.amount,status:C.status,onClick:U=>S(e.scheduleIndex,c)},{default:t(()=>[i(f(c),1)]),_:2},1032,["fertilizer-name","amount","status","onClick"])]))),128)):V("",!0),(r(!0),p(D,null,x(b.fertilizers,(C,c)=>(r(),p("div",{key:`water_change_${c}`},[o(_,{"fertilizer-name":c,amount:C.amount,status:C.status,onClick:U=>W(e.scheduleIndex,F,c)},{default:t(()=>[i(f(c),1)]),_:2},1032,["fertilizer-name","amount","status","onClick"])]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),o(_e,null,{default:t(()=>[e.schedule.dosing.fertilizersRegime!==("FertilizersRegime"in e?e.FertilizersRegime:n(ue)).ONCE_A_WEEK?(r(),p(D,{key:0},[o($,{disabled:n(l)===0,class:"ml-auto",onClick:G},{default:t(()=>a[2]||(a[2]=[i(" Назад ")])),_:1},8,["disabled"]),o($,{disabled:n(l)===n(y)-1,class:"ml-0 ml-sm-3",onClick:H},{default:t(()=>a[3]||(a[3]=[i(" Далее ")])),_:1},8,["disabled"])],64)):V("",!0),o($,{class:"ml-0 ml-sm-3",onClick:K},{default:t(()=>a[4]||(a[4]=[i(" Открыть ")])),_:1})]),_:1}),o(te,{color:"primary","model-value":n(A)},null,8,["model-value"])]),_:1},16)}}}),it=j({__name:"index",setup(w){const v=E(),{appRoutes:k}=L(),d=J();function u(){return v.push(`${k.value.dosing.path}`)}return re({title:"Расписание внесений удобрений в аквариум",description:"Если у вас несколько бутылок с удобрениями, дозировки каждого удобрения отличаются друг от друга, да еще и несколько аквариумов, то можно довольно легко ошибиться с внесением удобрений. Удобный виджет поможет вам составить расписание на всю неделю и следить за тем, какие удобрения нужно внести.",keywords:"аквариум, удобрения, расписание внесения, дозировки, планирование удобрений"}),(z,s)=>{const l=q,R=Q,T=X,y=ze,A=ve,B=ke,I=Y;return r(),h(ye,{"min-height":"100%",class:"mb-12 position-relative"},{default:t(()=>[o(N,null,{default:t(()=>[o(l,null,{default:t(()=>s[0]||(s[0]=[i(" Расписание ")])),_:1}),o(B,null,{default:t(()=>[n(d).schedules.length===0?(r(),h(R,{key:0},{default:t(()=>s[1]||(s[1]=[i(" У вас еще нет ни одного расписания ")])),_:1})):V("",!0),n(d).schedules.length===0?(r(),h(T,{key:1,class:"mb-16"},{default:t(()=>s[2]||(s[2]=[i(" Начните с нажатия на кнопку «Добавить», чтобы добавить новое расписание. ")])),_:1})):V("",!0),o(M,{sm:"8","offset-sm":"2"},{default:t(()=>[(r(!0),p(D,null,x(n(d).schedules,(W,S)=>(r(),h(y,{key:S,schedule:W,"schedule-index":S,class:"mb-10"},null,8,["schedule","schedule-index"]))),128))]),_:1}),o(A,null,{default:t(()=>s[3]||(s[3]=[m("p",{class:"mb-2"}," Если у вас несколько бутылок с удобрениями, дозировки каждого удобрения отличаются друг от друга, да еще и несколько аквариумов, то можно довольно легко ошибиться с внесением удобрений. ",-1),m("p",{class:"mb-2"}," Удобный виджет поможет вам составить расписание на всю неделю и следить за тем, какие удобрения нужно внести. ",-1)])),_:1})]),_:1})]),_:1}),o(I,{action:u},{default:t(()=>s[4]||(s[4]=[i(" Добавить расписание ")])),_:1})]),_:1})}}});export{it as default};
