import{_ as ae}from"./BprvtkYZ.js";import{_ as te}from"./pNMOnmag.js";import{V as D,_ as le}from"./DbaYnbsS.js";import ne from"./CxfUxFxL.js";import{_ as H}from"./B5igi5b3.js";import{f as F}from"./DHChNhVW.js";import{u as M}from"./rREtR25H.js";import{e as A,B as se,C as oe,D as ue,k as J,E as x,r as I,h as N,o as y,w as l,b as t,d as c,t as s,j as e,a as d,F as ie,G as me,f as re,A as de,c as B,H as W,I as $,i as pe,J as fe,z as ce,_ as ve}from"./JuhaATjh.js";import{u as j}from"./DfPauhZ1.js";import{T as z,u as ke}from"./BaHUrOYk.js";import{V as Ve}from"./JFC1_UcR.js";import{a as ge,b as he,c as _e,V as be}from"./Ck4VNDq-.js";import{V as we}from"./BrpHng43.js";import{V as S}from"./DiSit8yO.js";import{V as xe}from"./BhTh2ns_.js";import{u as Te}from"./BprKHBwR.js";import{b as Ce,a as ye,V as Fe}from"./ChgkdzxJ.js";import{V as Se}from"./BX8HXHlC.js";import{V as Ee}from"./BgxESioz.js";import"./DtJzTAmK.js";import"./lhONX-TN.js";import"./B931MWyl.js";import"./0CtVlzwM.js";import"./tvPv1uBi.js";import"./BI_u1hyo.js";import"./DgVQ6c-3.js";import"./D0Ji5Vad.js";import"./OfWyBKvr.js";/* empty css        */import"./BBggtmFf.js";const Re={class:"font-weight-medium"},Ie=A({__name:"TheCalculateTankVolumePopup",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:se(["save"],["update:modelValue"]),setup(P,{emit:a}){const g=oe(P,"modelValue"),i=ue({length:null,width:null,height:null,glassThickness:null}),T=a,{required:v,positive:k,positiveOrEmpty:h}=M(),{t:m}=J(),_=j(),o=x(()=>z.getVolumeSize(i.length,i.width,i.height,i.glassThickness??0)),b=I(null);async function E(){const{valid:V}=await b.value.validate();if(!V){_.showWarning(m("common.isFormErrors"));return}T("save",F(o.value,4)),g.value=!1}return(V,u)=>{const w=H;return y(),N(Ve,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=r=>g.value=r),width:"500"},{default:l(()=>[t(be,null,{default:l(()=>[t(ge,null,{default:l(()=>[c(s(e(m)("tanks.page.sectionDescription2")),1)]),_:1}),t(he,null,{default:l(()=>[t(D,{ref_key:"tankVolumeFormRef",ref:b},{default:l(()=>[t(w,{modelValue:e(i).length,"onUpdate:modelValue":u[0]||(u[0]=r=>e(i).length=r),variant:"underlined",label:e(m)("tanks.page.length"),suffix:e(m)("units.cm"),"hide-details":"auto",class:"mb-2",rules:[e(v),e(k)]},null,8,["modelValue","label","suffix","rules"]),t(w,{modelValue:e(i).width,"onUpdate:modelValue":u[1]||(u[1]=r=>e(i).width=r),variant:"underlined",label:e(m)("tanks.page.width"),suffix:e(m)("units.cm"),"hide-details":"auto",class:"mb-2",rules:[e(v)]},null,8,["modelValue","label","suffix","rules"]),t(w,{modelValue:e(i).height,"onUpdate:modelValue":u[2]||(u[2]=r=>e(i).height=r),variant:"underlined",label:e(m)("tanks.page.height"),suffix:e(m)("units.cm"),hint:e(m)("tanks.page.heightHint"),"persistent-hint":"",class:"mb-2",rules:[e(v),e(k)]},null,8,["modelValue","label","suffix","hint","rules"]),t(w,{modelValue:e(i).glassThickness,"onUpdate:modelValue":u[3]||(u[3]=r=>e(i).glassThickness=r),variant:"underlined",label:e(m)("tanks.page.glassThickness"),suffix:e(m)("units.mm"),"hide-details":"auto",class:"mb-4",rules:[e(h)]},null,8,["modelValue","label","suffix","rules"]),d("div",Re,s(e(m)("tanks.page.volumeCount"))+": "+s(("format"in V?V.format:e(F))(e(o),4))+" "+s(e(m)("units.l")),1)]),_:1},512)]),_:1}),t(we),t(_e,null,{default:l(()=>[t(S,{variant:"text",onClick:u[4]||(u[4]=r=>g.value=!1)},{default:l(()=>[c(s(e(m)("buttons.close")),1)]),_:1}),t(xe),t(S,{color:"primary",variant:"text",onClick:E},{default:l(()=>[c(s(e(m)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ne={class:"d-flex align-center"},Pe={class:"mb-2"},Ue={class:"mb-2"},Be={class:"mb-2"},We={class:"mb-2"},$e={class:"d-flex mb-4"},De={class:"d-flex justify-space-between justify-sm-start font-weight-medium mt-10"},He={class:"ml-4"},Me={class:"d-flex justify-space-between mt-10"},Ae=A({__name:"[id]",setup(P){const{t:a}=J(),{required:g}=M(),{appRoutes:i}=Te(),T=ie(),v=me(),k=ke(),h=j(),m=I(null),_=I(!1),o=I({name:null,volume:null,waterChangePercent:null,waterChangeVolume:null,filterVolume:null}),b=x(()=>T.params.id==="create"),E=x(()=>T.params.id!=="create"),V=x(()=>+T.params.id),u=x(()=>new z(o.value)),w=x(()=>k.tanks.map(C=>C.name).find(C=>C===o.value.name)&&!E.value),r=()=>!w.value||a("tanks.page.message.nameExists");re(async()=>{if(!b.value){const n=k.tanks[V.value];if(!n){await v.push(i.value.tanks.path);return}o.value=JSON.parse(JSON.stringify({...n}))}});function O(n){o.value.volume=n}function q(n){n<0||n<=100&&(o.value.waterChangePercent=n,o.value.waterChangeVolume=F(u.value.volumeTotal*n/100,3))}function G(n){n<0||n<=u.value.volumeTotal&&(o.value.waterChangeVolume=n,o.value.waterChangePercent=F(n/u.value.volumeTotal*100,3))}const K=async()=>{const{valid:n}=await m.value.validate();if(!n){h.showWarning(a("tanks.page.message.isFormErrors"));return}k.addTank({...u.value.toJson()}),h.show(a("tanks.page.message.tankAdded")),await v.push(i.value.tanks.path)},L=async()=>{if(!u.value.volumeTotal){h.showWarning(a("tanks.page.message.isFormErrors"));return}k.editTank({tank:{...u.value.toJson()},index:V.value}),h.show(a("tanks.page.message.tankEdited")),await v.push(i.value.tanks.path)},Q=async()=>{k.removeTank(V.value),h.show(a("tanks.page.message.tankRemoved")),await v.push(i.value.tanks.path)};return de({title:a("meta.tank.title")}),(n,p)=>{const C=ae,X=te,U=le,Y=ne,R=H,Z=Ie;return y(),N(Ce,{class:"mb-12"},{default:l(()=>[t(ye,null,{default:l(()=>[t(C,{path:e(i).tanks.path},null,8,["path"]),t(X,null,{default:l(()=>[e(b)?(y(),B(W,{key:0},[c(s(e(a)("tanks.page.titleNew")),1)],64)):(y(),B(W,{key:1},[c(s(e(o).name),1)],64))]),_:1}),t(Fe,{cols:"12",sm:"10",md:"8","offset-sm":"1","offset-md":"2"},{default:l(()=>[t(D,{ref_key:"tankFormRef",ref:m},{default:l(()=>[t(U,{class:"mt-10 mb-4"},{default:l(()=>[c(s(e(a)("tanks.page.sectionTitle1")),1)]),_:1}),t(Se,{modelValue:e(o).name,"onUpdate:modelValue":p[0]||(p[0]=f=>e(o).name=f),variant:"underlined",label:e(a)("tanks.page.name"),"hide-details":"auto",clearable:"",hint:e(a)("tanks.page.nameHint"),rules:[e(g),r],class:"mb-4"},null,8,["modelValue","label","hint","rules"]),t(R,{modelValue:e(o).volume,"onUpdate:modelValue":p[2]||(p[2]=f=>e(o).volume=f),variant:"underlined",label:e(a)("tanks.page.volume"),suffix:e(a)("units.l"),"persistent-hint":"",hint:e(a)("tanks.page.volumeHint"),rules:[e(g)]},{append:l(()=>[t(S,{color:"primary",size:"small",onClick:p[1]||(p[1]=f=>{_.value=!0})},{default:l(()=>[c(s(e(a)("buttons.calculate")),1)]),_:1})]),message:l(({message:f})=>[d("div",Ne,[d("span",null,s(f),1),t(Ee,{location:"bottom","max-width":"400","open-on-click":"","open-on-hover":""},{activator:l(({props:ee})=>[t(Y,$(ee,{name:"mdi-help-circle-outline",size:"14",class:"ml-1"}),null,16)]),default:l(()=>[d("p",Pe,s(e(a)("tanks.page.volumeInfo.p1")),1),d("p",Ue,s(e(a)("tanks.page.volumeInfo.p2")),1),d("p",Be,s(e(a)("tanks.page.volumeInfo.p3")),1),d("p",We,s(e(a)("tanks.page.volumeInfo.p4")),1)]),_:1})])]),_:1},8,["modelValue","label","suffix","hint","rules"]),t(U,{class:"mt-15 mb-4"},{default:l(()=>[c(s(e(a)("tanks.page.sectionTitle3")),1)]),_:1}),t(R,{modelValue:e(o).filterVolume,"onUpdate:modelValue":p[3]||(p[3]=f=>e(o).filterVolume=f),variant:"underlined",label:e(a)("tanks.filterVolume"),suffix:e(a)("units.l"),hint:e(a)("tanks.page.filterVolumeHint"),"hide-details":"auto"},null,8,["modelValue","label","suffix","hint"]),d("div",$e,[t(R,{"model-value":e(o).waterChangePercent,variant:"underlined",label:e(a)("tanks.page.waterChangePercent"),suffix:"%","hide-details":"auto","onUpdate:modelValue":q},null,8,["model-value","label"]),t(R,{"model-value":e(o).waterChangeVolume,variant:"underlined",label:e(a)("tanks.waterChangeVolume"),suffix:e(a)("units.l"),"hide-details":"auto",class:"ml-2","onUpdate:modelValue":G},null,8,["model-value","label","suffix"])]),d("div",De,[d("span",null,s(e(a)("tanks.page.volumeWithFilter"))+":",1),d("span",He,s(("format"in n?n.format:e(F))(e(u).volumeTotal,4))+" "+s(e(a)("units.l")),1)]),d("div",Me,[e(E)?(y(),N(S,{key:0,color:"error",onClick:Q},{default:l(()=>[c(s(e(a)("buttons.remove")),1)]),_:1})):pe("",!0),t(S,$({color:"primary",class:"ml-auto"},fe(e(b)?{click:K}:{click:L})),{default:l(()=>[c(s(e(a)("buttons.save")),1)]),_:1},16)])]),_:1},512)]),_:1})]),_:1}),t(Z,{modelValue:e(_),"onUpdate:modelValue":p[4]||(p[4]=f=>ce(_)?_.value=f:null),onSave:O},null,8,["modelValue"])]),_:1})}}}),ga=ve(Ae,[["__scopeId","data-v-7e261a4e"]]);export{ga as default};
