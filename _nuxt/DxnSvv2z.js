import{_ as yt}from"./C--RKMC3.js";import{_ as kt}from"./Drs9EG8R.js";import{b as Ke,m as bt,a as ze,V as gt,_ as Vt}from"./Djne1Sei.js";import{V as fe,_ as ht}from"./DgVljYhS.js";import{_ as ye}from"./BXmhU4Z4.js";import{_ as Ot}from"./DNq6m-Jf.js";import{f as X}from"./FI_hX0un.js";import{e as de,k as ce,F as L,c as b,o as r,b as t,w as o,a as P,t as i,j as e,I as E,L as G,M as Ee,d as H,i as D,q as he,s as Oe,r as T,J as te,O as je,P as wt,v as Je,Q as le,R as _t,S as Ct,T as St,D as we,z as oe,h as Z,A as $,C as ie,E as Tt,f as Rt,U as Ht,V as xt,B as Pt,W as At,K as Nt,_ as Et}from"./CAjOBrmp.js";import{s as Ut,A as Mt,M as se}from"./BXpKWP0_.js";import{V as $t}from"./B_VsIeC2.js";import{R as ee}from"./BoIzNFIF.js";import{u as _e}from"./CP7GEBIt.js";import{u as Ge}from"./BOlvyyjO.js";import{u as Ze}from"./uEYiatKU.js";import{u as ke}from"./CFamQGYr.js";import{a as ue}from"./BbNfchzT.js";import{V as Ce}from"./DIDKVmLy.js";import{a as Se,b as Te,c as Re,V as He}from"./CC46wD0t.js";import{V as W,m as qt,u as It,a as Bt}from"./BnGVFgx6.js";import{d as Ft,a as xe,e as Kt,m as Dt}from"./CmCO8bft.js";import{f as Lt,a as Wt,s as zt}from"./B931MWyl.js";import{V as De,m as jt,a as Le,b as Jt}from"./BDYfyhqJ.js";import{u as Gt}from"./ClBR376H.js";import{V as ge}from"./CO79grmH.js";import{a as ve,V as J}from"./WnvZM1YP.js";import{V as Pe}from"./B9tvuOiE.js";import{V as Ae}from"./L3mZOQHR.js";import{T as re,E as me,H as Ue}from"./DFSzMgOG.js";import{V as Xe}from"./DqSffNVo.js";import Zt from"./tIjPzFjq.js";import{u as Xt}from"./sDtukEVE.js";import{t as Me,b as Yt}from"./BBggtmFf.js";import{V as Qt}from"./DtKLawVR.js";import{a as $e,V as Ve,b as ea}from"./B4h3jHlb.js";import{u as ta}from"./Cp5yawAZ.js";import{u as aa}from"./BXAQlSoM.js";import{F as la}from"./CCHlbqFp.js";import{u as oa,V as na}from"./CMbNAH51.js";import"./8aZ8wFKZ.js";import"./8EgpZJj2.js";import"./CwwTltiD.js";import"./BHlOY6NW.js";import"./BrjXlFfO.js";import"./CXMC8vWC.js";import"./BKgp5Z4T.js";import"./BzQJ-91M.js";import"./CpQkKza9.js";/* empty css        */import"./BO9C2837.js";import"./CYc57goH.js";import"./CGgjgG8i.js";const sa={class:"pl-0 text-center"},ua={style:{"white-space":"nowrap"}},ia={class:"pl-0 text-center"},ra={class:"font-weight-medium"},ma={class:"pl-0 text-center"},da=de({name:"TheElementsTable",__name:"TheRecipeElementsTable",props:{recipe:{}},setup(u){const{t:n}=ce(),d=u,g=L(()=>Ut(d.recipe.concentration)),M=L(()=>Object.keys(d.recipe.concentration).length);return(l,h)=>{const N=Ot;return r(),b("div",null,[t($t,null,{default:o(()=>[P("thead",null,[P("tr",null,[P("th",sa,i(e(n)("common.reagent")),1),(r(!0),b(E,null,G(e(g),([O],p)=>(r(),b("th",{key:O,class:Ee(["text-center",{"pr-0":p===e(M)-1}])},[P("div",ua,i(O)+", "+i(l.recipe.isLiquid?e(n)("units.g/l"):e(n)("units.g/1g")),1)],2))),128))])]),P("tbody",null,[(r(!0),b(E,null,G(l.recipe.concentrationPerReagent,(O,p)=>(r(),b("tr",{key:p},[P("td",ia,i(p),1),(r(!0),b(E,null,G(e(g),([R,v],m)=>(r(),b("td",{key:p+R,class:Ee(["text-center",{"pr-0":m===e(M)-1}])},[O[R]?(r(),b(E,{key:0},[H(i(("format"in l?l.format:e(X))(O[R]))+" ",1),O[R]/v<1?(r(),b(E,{key:0},[H(" ("+i(("format"in l?l.format:e(X))(O[R]/v*100,1))+"%) ",1)],64)):D("",!0)],64)):(r(),b(E,{key:1},[H(" — ")],64))],2))),128))]))),128)),P("tr",ra,[P("td",ma,i(e(n)("common.total")),1),(r(!0),b(E,null,G(e(g),([O,p],R)=>(r(),b("td",{key:O,class:Ee(["text-center",{"pr-0":R===e(M)-1}])},[p?(r(),b(E,{key:0},[H(i(("format"in l?l.format:e(X))(p,3)),1)],64)):(r(),b(E,{key:1},[H(" — ")],64))],2))),128))])])]),_:1}),t(N,{concentration:l.recipe.concentration,class:"mt-8"},null,8,["concentration"])])}}}),Be=Symbol.for("vuetify:v-tabs"),ca=Oe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...je(qt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),qe=he()({name:"VTab",props:ca(),setup(u,n){let{slots:d,attrs:g}=n;const{textColorClasses:M,textColorStyles:l}=Ft(u,"sliderColor"),h=T(),N=T(),O=L(()=>u.direction==="horizontal"),p=L(()=>{var v,m;return((m=(v=h.value)==null?void 0:v.group)==null?void 0:m.isSelected.value)??!1});function R(v){var y,a;let{value:m}=v;if(m){const V=(a=(y=h.value)==null?void 0:y.$el.parentElement)==null?void 0:a.querySelector(".v-tab--selected .v-tab__slider"),x=N.value;if(!V||!x)return;const A=getComputedStyle(V).color,F=V.getBoundingClientRect(),_=x.getBoundingClientRect(),K=O.value?"x":"y",S=O.value?"X":"Y",U=O.value?"right":"bottom",B=O.value?"width":"height",z=F[K],c=_[K],k=z>c?F[U]-_[U]:F[K]-_[K],q=Math.sign(k)>0?O.value?"right":"bottom":Math.sign(k)<0?O.value?"left":"top":"center",Y=(Math.abs(k)+(Math.sign(k)<0?F[B]:_[B]))/Math.max(F[B],_[B])||0,ne=F[B]/_[B]||0,ae=1.5;Wt(x,{backgroundColor:[A,"currentcolor"],transform:[`translate${S}(${k}px) scale${S}(${ne})`,`translate${S}(${k/ae}px) scale${S}(${(Y-1)/ae+1})`,"none"],transformOrigin:Array(3).fill(q)},{duration:225,easing:zt})}}return xe(()=>{const v=W.filterProps(u);return t(W,te({symbol:Be,ref:h,class:["v-tab",u.class],style:u.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},v,g,{block:u.fixed,maxWidth:u.fixed?300:void 0,"onGroup:selected":R}),{...d,default:()=>{var m;return t(E,null,[((m=d.default)==null?void 0:m.call(d))??u.text,!u.hideSlider&&t("div",{ref:N,class:["v-tab__slider",M.value],style:l.value},null)])}})}),Lt({},h)}}),pa=Oe({...je(jt(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ye=he()({name:"VTabsWindow",props:pa(),emits:{"update:modelValue":u=>!0},setup(u,n){let{slots:d}=n;const g=wt(Be,null),M=Je(u,"modelValue"),l=L({get(){var h;return M.value!=null||!g?M.value:(h=g.items.value.find(N=>g.selected.value.includes(N.id)))==null?void 0:h.value},set(h){M.value=h}});return xe(()=>{const h=De.filterProps(u);return t(De,te({_as:"VTabsWindow"},h,{modelValue:l.value,"onUpdate:modelValue":N=>l.value=N,class:["v-tabs-window",u.class],style:u.style,mandatory:!1,touch:!1}),d)}),{}}}),fa=Oe({...Jt()},"VTabsWindowItem"),Ie=he()({name:"VTabsWindowItem",props:fa(),setup(u,n){let{slots:d}=n;return xe(()=>{const g=Le.filterProps(u);return t(Le,te({_as:"VTabsWindowItem"},g,{class:["v-tabs-window-item",u.class],style:u.style}),d)}),{}}});function va(u){return u?u.map(n=>St(n)?n:{text:n,value:n}):[]}const ya=Oe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...bt({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Bt(),...Dt()},"VTabs"),ka=he()({name:"VTabs",props:ya(),emits:{"update:modelValue":u=>!0},setup(u,n){let{attrs:d,slots:g}=n;const M=Je(u,"modelValue"),l=L(()=>va(u.items)),{densityClasses:h}=It(u),{backgroundColorClasses:N,backgroundColorStyles:O}=Kt(le(u,"bgColor")),{scopeId:p}=Gt();return _t({VTab:{color:le(u,"color"),direction:le(u,"direction"),stacked:le(u,"stacked"),fixed:le(u,"fixedTabs"),sliderColor:le(u,"sliderColor"),hideSlider:le(u,"hideSlider")}}),xe(()=>{const R=Ke.filterProps(u),v=!!(g.window||u.items.length>0);return t(E,null,[t(Ke,te(R,{modelValue:M.value,"onUpdate:modelValue":m=>M.value=m,class:["v-tabs",`v-tabs--${u.direction}`,`v-tabs--align-tabs-${u.alignTabs}`,{"v-tabs--fixed-tabs":u.fixedTabs,"v-tabs--grow":u.grow,"v-tabs--stacked":u.stacked},h.value,N.value,u.class],style:[{"--v-tabs-height":Ct(u.height)},O.value,u.style],role:"tablist",symbol:Be},p,d),{default:()=>{var m;return[((m=g.default)==null?void 0:m.call(g))??l.value.map(y=>{var a;return((a=g.tab)==null?void 0:a.call(g,{item:y}))??t(qe,te(y,{key:y.text,value:y.value}),{default:g[`tab.${y.value}`]?()=>{var V;return(V=g[`tab.${y.value}`])==null?void 0:V.call(g,{item:y})}:void 0})})]}}),v&&t(Ye,te({modelValue:M.value,"onUpdate:modelValue":m=>M.value=m,key:"tabs-window"},p),{default:()=>{var m;return[l.value.map(y=>{var a;return((a=g.item)==null?void 0:a.call(g,{item:y}))??t(Ie,{value:y.value},{default:()=>{var V;return(V=g[`item.${y.value}`])==null?void 0:V.call(g,{item:y})}})}),(m=g.window)==null?void 0:m.call(g)]}})])}),{}}}),ba={key:0,class:"mt-4"},ga=de({__name:"TheAddReagentPopup",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(u){const n=we(u,"modelValue"),{required:d,positive:g}=_e(),{checkName:M}=Ge(),{t:l}=ce(),h=Ze(),N=ke(),O=T(ee.FORMULA),p=T(),R=T(),v=T(),m=T(),y=T(),a=T(),V=T(),x=T(),A=T(!1);oe(()=>y.value,()=>{A.value=!1;try{x.value=new se(y.value),isNaN(x.value.mass)&&(A.value=!0)}catch{A.value=!0}},{deep:!0});function F(c){return c?"Формула введена неправильно. Правильный формат формулы CaSO4(H2O)2 или CaSO6H4.":""}const _=T([]),K=L(()=>{const c=[];for(const k of Mt)c.push({ion:k,conc:null});return c});function S(c){c.length>_.value.length&&typeof[...c].pop()=="string"||(_.value=c)}const U=()=>!M(y.value)||l("reagents.formulaExists"),B=()=>!M(v.value)||l("reagents.nameExists");async function z(){if(O.value===ee.FORMULA){const{valid:c}=await p.value.validate();if(!c){N.showWarning(l("common.isFormErrors"));return}h.addReagent({type:ee.FORMULA,key:y.value,name:v.value,isLiquid:m.value,density:a.value,solubility:V.value}),p.value.reset()}else if(O.value===ee.COMPOUND){const{valid:c}=await R.value.validate();if(!c){N.showWarning(l("common.isFormErrors"));return}const k={};_.value.forEach(({ion:q,conc:w})=>k[q]=w/100),h.addReagent({type:ee.COMPOUND,key:v.value,name:v.value,isLiquid:m.value,ions:k}),R.value.reset()}n.value=!1}return(c,k)=>{const q=ye;return r(),Z(Ce,{modelValue:n.value,"onUpdate:modelValue":k[10]||(k[10]=w=>n.value=w),width:"500"},{default:o(()=>[t(He,null,{default:o(()=>[t(Se,null,{default:o(()=>[H(i(e(l)("recipes.page.reagentPopup.title")),1)]),_:1}),t(Te,null,{default:o(()=>[t(ka,{modelValue:e(O),"onUpdate:modelValue":k[0]||(k[0]=w=>$(O)?O.value=w:null),"align-tabs":"center",color:"deep-purple-accent-4"},{default:o(()=>[t(qe,{value:("ReagentTypeName"in c?c.ReagentTypeName:e(ee)).FORMULA},{default:o(()=>[H(i(e(l)("common.formula")),1)]),_:1},8,["value"]),t(qe,{value:("ReagentTypeName"in c?c.ReagentTypeName:e(ee)).COMPOUND},{default:o(()=>[H(i(e(l)("common.compound")),1)]),_:1},8,["value"])]),_:1},8,["modelValue"]),t(Ye,{modelValue:e(O),"onUpdate:modelValue":k[8]||(k[8]=w=>$(O)?O.value=w:null)},{default:o(()=>[t(Ie,{value:("ReagentTypeName"in c?c.ReagentTypeName:e(ee)).FORMULA},{default:o(()=>[t(fe,{ref_key:"reagentFormulaFormRef",ref:p},{default:o(()=>[t(ge,{modelValue:e(y),"onUpdate:modelValue":k[1]||(k[1]=w=>$(y)?y.value=w:null),label:e(l)("recipes.page.reagentPopup.formulaInput"),variant:"underlined",error:e(A),"error-messages":F(e(A)),rules:[e(d),U],"hide-details":"auto"},null,8,["modelValue","label","error","error-messages","rules"]),e(x)!==void 0?(r(),b("div",ba,[(r(!0),b(E,null,G(Object.entries(e(x).fraction),([w,Y])=>(r(),b("span",{key:w},i(w)+": "+i(("format"in c?c.format:e(X))(Y*100))+"% ",1))),128))])):D("",!0),t(ve,{modelValue:e(m),"onUpdate:modelValue":k[2]||(k[2]=w=>$(m)?m.value=w:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto",rules:[e(d)]},{default:o(()=>[t(J,{label:e(l)("common.dry"),value:!1},null,8,["label"]),t(J,{label:e(l)("common.liquid"),value:!0,class:"ml-2"},null,8,["label"])]),_:1},8,["modelValue","rules"]),t(ue,null,{default:o(()=>[e(m)?(r(),Z(q,{key:0,modelValue:e(a),"onUpdate:modelValue":k[3]||(k[3]=w=>$(a)?a.value=w:null),suffix:e(l)("recipes.page.reagentPopup.densityUnit"),label:e(l)("recipes.page.reagentPopup.densityInput"),hint:e(l)("recipes.page.reagentPopup.densityHint"),rules:[e(d)]},null,8,["modelValue","suffix","label","hint","rules"])):D("",!0)]),_:1}),t(ge,{modelValue:e(v),"onUpdate:modelValue":k[4]||(k[4]=w=>$(v)?v.value=w:null),label:e(l)("recipes.page.reagentPopup.reagentName"),variant:"underlined",rules:[e(d),B]},null,8,["modelValue","label","rules"]),t(ue,null,{default:o(()=>[e(m)?D("",!0):(r(),Z(q,{key:0,modelValue:e(V),"onUpdate:modelValue":k[5]||(k[5]=w=>$(V)?V.value=w:null),label:e(l)("recipes.page.reagentPopup.reagentSolubilityInput"),hint:e(l)("recipes.page.reagentPopup.reagentSolubilityHint")},null,8,["modelValue","label","hint"]))]),_:1})]),_:1},512)]),_:1},8,["value"]),t(Ie,{value:("ReagentTypeName"in c?c.ReagentTypeName:e(ee)).COMPOUND},{default:o(()=>[t(fe,{ref_key:"reagentCompoundFormRef",ref:R},{default:o(()=>[t(ge,{modelValue:e(v),"onUpdate:modelValue":k[6]||(k[6]=w=>$(v)?v.value=w:null),label:e(l)("recipes.page.reagentPopup.reagentName"),variant:"underlined",rules:[e(d),B]},null,8,["modelValue","label","rules"]),t(ve,{modelValue:e(m),"onUpdate:modelValue":k[7]||(k[7]=w=>$(m)?m.value=w:null),inline:"",color:"primary",class:"ml-n2","hide-details":"auto",rules:[e(d)]},{default:o(()=>[t(J,{label:e(l)("common.dry"),value:!1},null,8,["label"]),t(J,{label:e(l)("common.liquid"),value:!0,class:"ml-2"},null,8,["label"])]),_:1},8,["modelValue","rules"]),t(ze,{"model-value":e(_),items:e(K),"item-title":"ion",variant:"underlined",label:e(l)("fertilizers.page.ionsInput"),hint:e(l)("fertilizers.page.ionsInputHint"),"persistent-hint":"","hide-details":"auto",multiple:"",chips:"","closable-chips":"",rules:[e(d)],class:"mb-4","onUpdate:modelValue":S},null,8,["model-value","items","label","hint","rules"]),(r(!0),b(E,null,G(e(_),w=>(r(),Z(q,{key:w.ion,modelValue:w.conc,"onUpdate:modelValue":Y=>w.conc=Y,label:w.ion,suffix:"%",variant:"underlined","persistent-placeholder":"",placeholder:"0","hide-details":"auto",rules:[e(d),e(g)],class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","label","rules"]))),128))]),_:1},512)]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),t(Pe),t(Re,null,{default:o(()=>[t(W,{variant:"text",onClick:k[9]||(k[9]=w=>n.value=!1)},{default:o(()=>[H(i(e(l)("buttons.close")),1)]),_:1}),t(Ae),t(W,{color:"primary",variant:"text",onClick:z},{default:o(()=>[H(i(e(l)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Va={class:"mb-4"},ha={class:"mt-4"},Oa={class:"d-flex align-center"},wa=de({name:"TheAddTrilonBPopup",__name:"TheAddTrilonBPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:n}){const d=we(u,"modelValue"),g=u,M=n;_e();const{t:l}=ce(),h=ke(),N=T(),O=T(0),p=T(),R=T([]);oe([R,p],()=>{let m=0;const y=new se(re).mass;R.value.forEach(a=>{const V=g.recipe.reagents.find(x=>x.key===a);V&&(m+=V.amount*y/new se(a).mass),(V==null?void 0:V.key)==="Fe2(SO4)3(H2O)9"&&(m*=2)}),p.value&&(m*=(100+p.value)/100),O.value=X(m)});async function v(){const{valid:m}=await N.value.validate();if(!m){h.showWarning(l("common.isFormErrors"));return}M("save",O.value),d.value=!1}return(m,y)=>{const a=ye;return r(),Z(Ce,{modelValue:d.value,"onUpdate:modelValue":y[5]||(y[5]=V=>d.value=V),width:"500"},{default:o(()=>[t(He,null,{default:o(()=>[t(Se,null,{default:o(()=>[H(i(e(l)("recipes.page.trilonPopup.title")),1)]),_:1}),t(Te,null,{default:o(()=>[t(fe,{ref_key:"chelatorFormRef",ref:N},{default:o(()=>[P("div",Va,i(e(l)("recipes.page.trilonPopup.hint")),1),(r(!0),b(E,null,G(m.recipe.reagents,V=>(r(),b("div",{key:V.key,class:"d-flex align-center"},[["TrilonB"in m?m.TrilonB:e(re),"EDTA"in m?m.EDTA:e(me),"H2O"].includes(V.key)?D("",!0):(r(),b(E,{key:0},[t(a,{"model-value":V.amount,label:V.text,suffix:V.isLiquid?e(l)("units.ml"):e(l)("units.g"),"hide-details":"auto",class:"mb-2 mb-sm-4",readonly:""},null,8,["model-value","label","suffix"]),t(Xe,{modelValue:e(R),"onUpdate:modelValue":y[0]||(y[0]=x=>$(R)?R.value=x:null),value:V.key,class:"ml-2"},null,8,["modelValue","value"])],64))]))),128)),P("div",ha,i(e(l)("recipes.page.trilonPopup.chelatorIncrease")),1),P("div",Oa,[t(ve,{modelValue:e(p),"onUpdate:modelValue":y[1]||(y[1]=V=>$(p)?p.value=V:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:o(()=>[t(J,{label:"5%",value:5}),t(J,{label:"10%",value:10}),t(J,{label:"15%",value:15})]),_:1},8,["modelValue"]),t(a,{modelValue:e(p),"onUpdate:modelValue":y[2]||(y[2]=V=>$(p)?p.value=V:null),label:e(l)("recipes.page.trilonPopup.anotherValue"),suffix:"%","hide-details":"auto"},null,8,["modelValue","label"])]),t(a,{modelValue:e(O),"onUpdate:modelValue":y[3]||(y[3]=V=>$(O)?O.value=V:null),label:e(l)("recipes.page.trilonPopup.trilonAmount"),suffix:e(l)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10"},null,8,["modelValue","label","suffix"])]),_:1},512)]),_:1}),t(Pe),t(Re,null,{default:o(()=>[t(W,{variant:"text",onClick:y[4]||(y[4]=V=>d.value=!1)},{default:o(()=>[H(i(e(l)("buttons.cancel")),1)]),_:1}),t(Ae),t(W,{color:"primary",variant:"text",onClick:v},{default:o(()=>[H(i(e(l)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),_a={class:"mb-4"},Ca={class:"mt-4"},Sa={class:"d-flex align-center"},Ta={class:"mt-4 mb-6"},Ra={class:"d-flex align-center"},Ha=de({name:"TheAddEDTAPopup",__name:"TheAddEDTAPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:n}){const d=we(u,"modelValue"),g=u,M=n;_e();const{t:l}=ce(),h=ke(),N=T(),O=T(0),p=T(),R=T(1),v=T("KOH"),m=T(0),y=["NaOH","KOH","K2CO3"],a=T([]);oe([a,p,R,v],()=>{let x=0;const A=new se(me).mass;a.value.forEach(_=>{const K=g.recipe.reagents.find(S=>S.key===_);K&&(x+=K.amount*A/new se(_).mass),(K==null?void 0:K.key)==="Fe2(SO4)3(H2O)9"&&(x*=2)}),p.value&&(x*=(100+p.value)/100),O.value=X(x);const F=x/A;m.value=X(F*new se(v.value).mass*R.value)});async function V(){const{valid:x}=await N.value.validate();if(!x){h.showWarning(l("common.isFormErrors"));return}M("save",O.value,m.value,v.value),d.value=!1}return(x,A)=>{const F=ye;return r(),Z(Ce,{modelValue:d.value,"onUpdate:modelValue":A[6]||(A[6]=_=>d.value=_),width:"500"},{default:o(()=>[t(He,null,{default:o(()=>[t(Se,null,{default:o(()=>[H(i(e(l)("recipes.page.edtaPopup.title")),1)]),_:1}),t(Te,null,{default:o(()=>[t(fe,{ref_key:"chelatorFormRef",ref:N},{default:o(()=>[P("div",_a,i(e(l)("recipes.page.edtaPopup.hint")),1),(r(!0),b(E,null,G(x.recipe.reagents,_=>(r(),b("div",{key:_.key,class:"d-flex align-center"},[["TrilonB"in x?x.TrilonB:e(re),"EDTA"in x?x.EDTA:e(me),"H2O"].includes(_.key)?D("",!0):(r(),b(E,{key:0},[t(F,{"model-value":_.amount,label:_.text,suffix:_.isLiquid?e(l)("units.ml"):e(l)("units.g"),"hide-details":"auto",class:"mb-2 mb-sm-4",readonly:""},null,8,["model-value","label","suffix"]),t(Xe,{modelValue:e(a),"onUpdate:modelValue":A[0]||(A[0]=K=>$(a)?a.value=K:null),value:_.key,class:"ml-2"},null,8,["modelValue","value"])],64))]))),128)),P("div",Ca,i(e(l)("recipes.page.edtaPopup.chelatorIncrease")),1),P("div",Sa,[t(ve,{modelValue:e(p),"onUpdate:modelValue":A[1]||(A[1]=_=>$(p)?p.value=_:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:o(()=>[t(J,{label:"5%",value:5}),t(J,{label:"10%",value:10}),t(J,{label:"15%",value:15})]),_:1},8,["modelValue"]),t(F,{modelValue:e(p),"onUpdate:modelValue":A[2]||(A[2]=_=>$(p)?p.value=_:null),label:e(l)("recipes.page.edtaPopup.anotherValue"),suffix:"%","hide-details":"auto"},null,8,["modelValue","label"])]),t(F,{"model-value":e(O),label:e(l)("recipes.page.edtaPopup.edtaAmount"),suffix:e(l)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10",readonly:""},null,8,["model-value","label","suffix"]),P("div",Ta,i(e(l)("recipes.page.edtaPopup.alkaliHint")),1),P("div",Ra,[t(gt,{modelValue:e(v),"onUpdate:modelValue":A[3]||(A[3]=_=>$(v)?v.value=_:null),items:y,label:e(l)("recipes.page.edtaPopup.alkaliSelect"),"hide-selected":"","hide-details":"auto",variant:"outlined",class:"w-50"},null,8,["modelValue","label"]),t(ve,{modelValue:e(R),"onUpdate:modelValue":A[4]||(A[4]=_=>$(R)?R.value=_:null),inline:"",color:"primary",class:"ml-2","hide-details":"auto"},{default:o(()=>[t(J,{label:"1",value:1}),t(J,{label:"2",value:2}),e(v)!=="K2CO3"?(r(),b(E,{key:0},[t(J,{label:"3",value:3}),t(J,{label:"4",value:4})],64)):D("",!0)]),_:1},8,["modelValue"])]),t(F,{"model-value":e(m),label:e(l)("recipes.page.edtaPopup.alkaliAmount"),suffix:e(l)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10",readonly:""},null,8,["model-value","label","suffix"])]),_:1},512)]),_:1}),t(Pe),t(Re,null,{default:o(()=>[t(W,{variant:"text",onClick:A[5]||(A[5]=_=>d.value=!1)},{default:o(()=>[H(i(e(l)("buttons.cancel")),1)]),_:1}),t(Ae),t(W,{color:"primary",variant:"text",onClick:V},{default:o(()=>[H(i(e(l)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),xa={class:"text-grey-darken-1 mb-4"},Pa={key:0},Aa={class:"font-weight-medium mb-2"},Na={class:"d-flex flex-wrap"},Ea={class:"font-weight-medium mr-1"},Ua=de({name:"TheUnitConcPopup",__name:"TheUnitConcPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:n}){const{t:d}=ce(),g=Xt(),M=ke(),l=we(u,"modelValue"),h=u,N=n,O=[Ue,me,re],p=T({}),R=T({}),v=T(),m=g.tankModels.map(S=>S.toJson()),y=L(()=>h.recipe.reagents.filter(S=>!O.includes(S.key))),a=L(()=>y.value.length>0);oe(l,S=>{S&&h.recipe.tankVolume&&(v.value={name:h.recipe.tankVolume.toString(),volume:h.recipe.tankVolume})}),oe(v,()=>{p.value=h.recipe.countRecipeUnitConcsByAmounts()});const V=L(()=>h.recipe.countRecipeIonUnitConcs(p.value)),x=L(()=>{const S=Me(V.value);return S.sort((U,B)=>B[1]-U[1]),S}),A=L(()=>Yt(V.value).reduce((S,U)=>S+U,0));function F(S){typeof S=="number"?(v.value={name:S.toString(),volume:S},h.recipe.tankVolume=+S):(v.value=S,h.recipe.tankVolume=S.volumeTotal),h.recipe.countRecipeUnitConcsByAmounts()}function _(S,U,B){const z=h.recipe.countReagentAmountByUnitConc(S,U,B);R.value[U.key]=z,Me(U.ions).forEach(([c,k])=>{const q=U.density??1;(B===""||B!==c)&&(p.value[U.key][c]=X(z/h.recipe.totalVolume/v.value.volume*k*1e3*q))})}async function K(){N("save",R.value),l.value=!1,M.show("Новые значения масс реагентов сохранены")}return(S,U)=>{const B=Zt,z=ye;return r(),Z(Ce,{modelValue:l.value,"onUpdate:modelValue":U[2]||(U[2]=c=>l.value=c),width:"500"},{default:o(()=>[t(He,null,{default:o(()=>[t(Se,null,{default:o(()=>[H(i(e(d)("recipes.page.unitConcPopup.title")),1)]),_:1}),t(Te,null,{default:o(()=>[P("div",xa,[H(i(e(d)("recipes.page.unitConcPopup.hint"))+" ",1),t(Qt,{location:"bottom","max-width":"400","open-on-click":"","open-on-hover":""},{activator:o(({props:c})=>[t(B,te({name:"mdi-help-circle-outline",size:"18"},c),null,16)]),default:o(()=>[H(" "+i(e(d)("recipes.page.unitConcDescription")),1)]),_:1})]),t(ze,{modelValue:e(v),"onUpdate:modelValue":[U[0]||(U[0]=c=>$(v)?v.value=c:null),F],modelModifiers:{number:!0},items:e(m),"item-title":"name",variant:"underlined",label:e(d)("recipes.page.tankInputLabel"),"persistent-hint":"","hide-selected":"",suffix:e(d)("units.l")},null,8,["modelValue","items","label","suffix"]),t(ue,null,{default:o(()=>[S.recipe.tankVolume?(r(),b("div",Pa,[(r(!0),b(E,null,G(e(y),c=>(r(),Z($e,{key:c.key,class:"mb-3"},{default:o(()=>[t(Ve,{cols:"12",class:"font-weight-regular pb-1"},{default:o(()=>[H(i(c.text),1)]),_:2},1024),(r(!0),b(E,null,G(c.ions,(k,q)=>(r(),Z(Ve,{key:c.key+q,cols:c.ionsTotal>=2?"6":"",sm:c.ionsTotal>3?"4":"",class:"py-0"},{default:o(()=>[t(z,{modelValue:e(p)[c.key][q],"onUpdate:modelValue":[w=>e(p)[c.key][q]=w,w=>_(w,c,q)],modelModifiers:{number:!0},label:q,suffix:e(d)("units.mg/l / ml"),"hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","label","suffix"])]),_:2},1032,["cols","sm"]))),128))]),_:2},1024))),128)),e(a)?(r(),Z($e,{key:0},{default:o(()=>[t(Ve,{cols:"12"},{default:o(()=>[P("div",Aa,i(e(d)("common.total"))+", "+i(e(d)("units.mg/l / ml"))+": ",1),P("div",Na,[(r(!0),b(E,null,G(e(x),([c,k])=>(r(),b("div",{key:c,class:"d-flex justify-space-between mr-2"},[P("div",Ea,i(c)+":",1),P("div",null,i(("format"in S?S.format:e(X))(k))+" ("+i(("format"in S?S.format:e(X))(k/e(A)*100))+"%) ",1)]))),128))])]),_:1})]),_:1})):D("",!0)])):D("",!0)]),_:1})]),_:1}),t(Pe),t(Re,null,{default:o(()=>[t(W,{variant:"text",onClick:U[1]||(U[1]=c=>l.value=!1)},{default:o(()=>[H(i(e(d)("buttons.close")),1)]),_:1}),t(Ae),t(W,{color:"primary",variant:"text",onClick:K},{default:o(()=>[H(i(e(d)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Qe=[{name:"Kuban Aquariums Нитрат",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:49.71},{key:"(NH2)2CO",amount:5.02},{key:"NH4NO3",amount:6.71},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Фосфат",reagents:[{key:"H2O",amount:1e3},{key:"KH2PO4",amount:7.01},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Калий",reagents:[{key:"H2O",amount:1e3},{key:"K2SO4",amount:84.76},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Микро",reagents:[{key:"H2O",amount:1e3},{key:"AgroMicsT",amount:11},{key:"Fe-EDTA13",amount:5.6},{key:"MgSO4(H2O)7",amount:30},{key:"K2SO4",amount:20},{key:"H3BO3",amount:.7},{key:"C6H8O6",amount:.1},{key:"C6H7KO2",amount:.5},{key:"C10H14N2Na2O8(H2O)2",amount:3}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Aqua Botanic Нитрат",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:82.88}],tankVolume:100,description:"Чистая калиевая селитра. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Нитрат+",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:49.71},{key:"(NH2)2CO",amount:5.02},{key:"NH4NO3",amount:6.71}],tankVolume:100,description:"Калиевая селитра, разбавленная мочевиной и нитратом аммония. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Фосфат",reagents:[{key:"H2O",amount:1e3},{key:"KH2PO4",amount:7.01}],tankVolume:100,description:"Чистый монофосфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Калий",reagents:[{key:"H2O",amount:1e3},{key:"K2SO4",amount:84.76}],tankVolume:100,description:"Чистый сульфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Микро",reagents:[{key:"H2O",amount:968},{key:"C6H8O7",amount:30},{key:"FeSO4(H2O)7",amount:10},{key:"MnSO4(H2O)5",amount:.5},{key:"CuSO4(H2O)5",amount:.05},{key:"ZnSO4(H2O)7",amount:.6},{key:"MgSO4(H2O)7",amount:10.54},{key:"H3BO3",amount:.3},{key:"K2SO4",amount:8.6},{key:"C63H88CoN14O14P",amount:.001},{key:"Citovit",amount:6},{key:"Ferovit",amount:6},{key:"H2SO4",amount:20}],tankVolume:100,description:`Рецепт взят с сайта aqua-botanic.ru
(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html):

С помощью мерного стакана отмеряем 700 мл дистиллированной воды или воды из фильтра с обратным осмосом.
Воду предварительно кипятим и растворяем

* Лимонную кислоту 30 грамм
* Сульфат железа - 10 грамм
* Сульфат марганца - 0.5 грамм
* Сульфат меди - 0.05 грамм
* Сульфат цинка - 0.6 грамм
* Сульфат магния - 10.54 грамма
* сделать паузу в 1 час.
* Борная кислота - 0.3 грамма
* Сульфат калия - 8.6 грамма
* Цитовит 4 ампулы
* Феровит - 4 ампулы
* Витамин B12 2 ампулы
* Серная кислота - 20 мл.

Важно! Можно вливать только кислоту в воду, а не наоборот.
При желании, серную кислоту можно заменить на Сайдекс (2.5% раствор глутарового альдегида) в
количестве 200-250 мл. Долить воду в раствор с удобрением до отметки 1 литр. Воду можно не кипятить.

Растворять каждый последующий реактив можно только после того, как полностью растворится предыдущий.`},{name:"NPK Amania.org 1:15",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:106.45},{key:"KH2PO4",amount:5.77}],tankVolume:100,description:"Макро в соотношении 1 к 15. Рецепт взят с сайта amania.org"},{name:"NPK Amania.org 1:15 + амидный азот",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:53.6},{key:"(NH2)2CO",amount:16},{key:"KH2PO4",amount:5.77}],tankVolume:100,description:"Макро в соотношении 1 к 15. Калиевая селитра в соотношении 50 на 50 с мочевиной. Рецепт взят с сайта amania.org"},{name:"Удо Ермолаева. МИКРО",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"Fe2(SO4)3(H2O)9",amount:1.45},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C10H14N2Na2O8(H2O)2",amount:2.5}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (gh < 7)",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"Fe2(SO4)3(H2O)9",amount:1.45},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C10H14N2Na2O8(H2O)2",amount:1.75}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (Железный купорос)",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"FeSO4(H2O)7",amount:1.44},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C14H18N3O10Na2Fe",amount:1},{key:"C10H14N2Na2O8(H2O)2",amount:1.75}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Pps-pro Macro",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:29.3},{key:"KNO3",amount:32.6},{key:"KH2PO4",amount:2.9},{key:"MgSO4(H2O)7",amount:20.2}],description:"Рецепт взят с сайта https://sites.google.com/site/aquaticplantfertilizer/pps-pro. Методика там же"},{name:"Pps-pro Micro",reagents:[{key:"H2O",amount:500},{key:"PlantexCMM",amount:28.6}],description:"Рецепт взят с сайта https://sites.google.com/site/aquaticplantfertilizer/pps-pro. Методика там же"},{name:"PMDD CMM",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:33},{key:"KNO3",amount:15},{key:"MgSO4(H2O)7",amount:15},{key:"PlantexCMM",amount:9.93}],description:"http://www.amania.org/Tech/liqfert-mikom.html"},{name:"PMDD CSM + B",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:33},{key:"KNO3",amount:15},{key:"MgSO4(H2O)7",amount:15},{key:"H3BO3",amount:.714},{key:"PlantexCSM",amount:9.93}],description:"http://www.amania.org/Tech/liqfert-mikom.html"}];Qe.sort((u,n)=>u.name.localeCompare(n.name));const Ma={class:"text-h6 text-sm-h5"},$a={class:"text-subtitle-1"},qa={class:"text-h6 text-md-h5"},Ia={class:"text-subtitle-1"},Ba={class:"text-body-2 text-grey-darken-1 mb-2"},Fa={key:0},Ka={key:0,class:"text-grey-darken-1 mt-6 mb-4"},Da={class:"mt-2 mt-sm-4 text-body-2"},La={key:0},Wa={key:0,style:{width:"100px"}},za={key:0,class:"d-flex justify-end mt-4"},ja={key:0,class:"mt-8"},Ja={key:1},Ga={class:"d-flex mt-10"},We=0,Za=de({__name:"[id]",setup(u){const{t:n}=ce(),{appRoutes:d}=ta(),{required:g,positive:M}=_e(),l=xt(),h=Ht(),N=ke(),O=Ze(),p=aa(),{getReagents:R}=Ge();let v=R(We);const m=T(null),y=T(null),a=Tt(new la({name:"",description:"",tankVolume:null,reagents:[]}));oe(()=>a.reagents,()=>{if(!a.name&&a.reagents.length>1){const s=a.reagents[1];a.name=s.text}}),oe(()=>O.reagents,()=>{v=R(We)},{deep:!0});function V(s){s.length>a.reagents.length&&typeof[...s].pop()=="string"||(a.reagents=s)}function x(s){a.name=s.name,a.description=s.description,a.tankVolume=s.tankVolume}const A=s=>{typeof s=="string"||s===null||(y.value=s,a.reagents=[],s.reagents.forEach(({key:f,amount:I})=>{const j=v.find(Q=>Q.key===f);j&&(j.amount=I,a.reagents.push(j))}),x(s))};function F(s,f){f.amount=s,a.setReagentAmount(s,f.key)}function _(s,f){f.dilution=s}function K(s){const f=s-(a.totalVolume-a.waterVolume);a.setReagentAmount(f,"H2O")}const{checkName:S}=oa(),U=T(!1),B=p.fertilizerRecipeModels,z=L(()=>h.params.id==="create"),c=L(()=>h.params.id!=="create"),k=L(()=>h.query.copy!==void 0),q=L(()=>h.query.share!==void 0),w=L(()=>+h.params.id),Y=T(!1),ne=T(!1),ae=T(!1),be=T(!1),et=L(()=>S(a.name)&&!c.value),tt=()=>!et.value||n("recipes.page.nameExists"),at=s=>a.isLiquid&&s.amount/a.totalVolume*1e3>s.solubility,lt=s=>a.isLiquid&&s.amount/a.totalVolume*1e3>s.solubility?`${n("validation.solubilityLimit")} - ${s.solubility} ${n("units.g/l")} ${n("common.for")} 25°С!`:"";if(z.value){const s=v.find(f=>f.key===Ue);s.amount=500,a.reagents.push(s)}Rt(async()=>{if(z.value&&!k.value)return;let s;if(q.value)[s]=JSON.parse(decodeURIComponent(h.query.share));else if(k.value){const I=h.query.copy;s=JSON.parse(JSON.stringify({...B[+I]}))}else z.value||(s=JSON.parse(JSON.stringify({...B[w.value]})));if(Object.keys(s).length===0){await l.push(d.value.recipes.path);return}const f={};s.reagents.forEach(I=>{f[I.key]=I}),v.forEach(I=>{I.key in f&&(I.amount=f[I.key].amount,I.dilution=f[I.key].dilution,a.reagents.push(I))}),x(s)});async function ot(){const{valid:s}=await m.value.validate();if(!s){N.showWarning(n("common.isFormErrors"));return}p.addRecipe({...a.toJson()}),N.show(n("recipes.page.message.recipeAdded")),await l.push(d.value.recipes.path)}async function nt(){const{valid:s}=await m.value.validate();if(!s){N.showWarning(n("common.isFormErrors"));return}p.editRecipe({index:w.value,recipe:a.toJson()}),N.show(n("recipes.page.message.recipeEdited")),await l.push(d.value.recipes.path)}async function st(){p.removeRecipe(w.value),N.show(n("recipes.page.message.recipeRemoved")),await l.push(d.value.recipes.path)}async function ut(){N.show(n("recipes.page.message.recipeCopied")),await l.push(`${d.value.recipes.path}create/?copy=${w.value}`)}function it(s){a.setReagentAmount(s,re)}function rt(s,f,I){a.setReagentAmount(s,me);let j=a.reagents.find(Q=>Q.key===I);j?j.amount=f:(j=v.find(Q=>Q.key===I),j.amount=f,a.reagents.push(j))}function mt(s){Me(s).forEach(([f,I])=>{const j=a.reagents.find(Q=>Q.key===f);j.isLiquid&&a.correctWaterVolumeByReagentAmount(X(I),j.amount),a.setReagentAmount(X(I),f)})}return Pt({title:"Рецепт"}),(s,f)=>{const I=yt,j=kt,Q=Vt,Fe=ht,Ne=ye,dt=da,ct=ga,pt=wa,ft=Ha,vt=Ua;return r(),Z(ea,{class:"mb-12"},{default:o(()=>[t($e,null,{default:o(()=>[t(I,{path:e(d).recipes.path},{default:o(()=>[!e(z)&&!e(q)?(r(),Z(W,{key:0,color:"primary",class:"ml-auto",size:"small",onClick:ut},{default:o(()=>[H(i(e(n)("buttons.copy")),1)]),_:1})):D("",!0)]),_:1},8,["path"]),t(j,null,{default:o(()=>[e(z)&&!e(k)?(r(),b(E,{key:0},[H(i(e(n)("recipes.page.titleNew")),1)],64)):e(k)?(r(),b(E,{key:1},[P("div",Ma,i(e(n)("recipes.page.titleCopy"))+" "+i(e(a).name),1),P("div",$a,i(e(n)("recipes.page.subtitleCopy")),1)],64)):e(q)?(r(),b(E,{key:2},[P("p",qa,i(e(n)("recipes.page.titleShare")),1),P("p",Ia,i(e(n)("recipes.page.subtitleShare")),1)],64)):(r(),b(E,{key:3},[H(i(e(a).name),1)],64))]),_:1}),t(Ve,{cols:"12",md:"8","offset-md":"2"},{default:o(()=>[t(fe,{ref_key:"recipeFormRef",ref:m},{default:o(()=>[P("div",Ba,i(e(a).isWater?e(n)("recipes.page.reagentsHintWater"):e(n)("recipes.page.reagentsHint")),1),t(Q,{"model-value":e(a).reagents,items:e(v),"item-title":"text",variant:"underlined",multiple:"",label:e(n)("common.reagents"),hint:e(n)("common.comboboxTypingHint"),"persistent-hint":"",chips:"","closable-chips":"","hide-details":"auto",class:"mb-2","onUpdate:modelValue":V},null,8,["model-value","items","label","hint"]),P("div",{class:"d-flex justify-end text-blue cursor-pointer",onClick:f[0]||(f[0]=C=>{Y.value=!0})},i(e(n)("recipes.page.noReagent")),1),t(Q,{modelValue:e(y),"onUpdate:modelValue":[f[1]||(f[1]=C=>$(y)?y.value=C:null),A],items:"FERTILIZER_RECIPES"in s?s.FERTILIZER_RECIPES:e(Qe),"item-title":"name",variant:"underlined",label:e(n)("common.recipes"),hint:e(n)("recipes.page.recipesHint"),"persistent-hint":"","hide-selected":"","hide-details":"auto"},null,8,["modelValue","items","label","hint"]),e(a).isReagents?(r(),b("div",Fa,[t(Fe,{modelValue:e(U),"onUpdate:modelValue":f[2]||(f[2]=C=>$(U)?U.value=C:null),button:"",class:"mt-10 mb-4"},{default:o(()=>[H(i(e(n)("common.reagents")),1)]),_:1},8,["modelValue"]),t(ue,null,{default:o(()=>[e(U)?(r(),b("div",Ka,[(r(!0),b(E,null,G(e(a).reagents,C=>(r(),b("div",{key:C.key,class:"d-flex flex-column flex-sm-row justify-space-between align-sm-center text-body-1 mb-2 mb-sm-0 text-body-2"},[P("div",null,i(C.text),1),P("div",null,i(C.percent),1)]))),128)),P("div",Da,i(e(n)("recipes.page.reagentsDescription")),1)])):D("",!0)]),_:1})])):D("",!0),t(ue,null,{default:o(()=>[e(a).isReagents?(r(),b("div",La,[(r(!0),b(E,null,G(e(a).reagents,C=>(r(),b("div",{key:C.key,class:"d-flex align-center mb-2"},[t(Ne,{"model-value":C.amount,label:C.text,suffix:C.isLiquid?e(n)("units.ml"):e(n)("units.g"),"hide-details":"auto",rules:[e(g),e(M)],error:at(C),"error-messages":lt(C),"onUpdate:modelValue":pe=>F(pe,C)},At({_:2},[C.key===("TrilonB"in s?s.TrilonB:e(re))?{name:"append",fn:o(()=>[t(W,{color:"primary",size:"small",onClick:f[3]||(f[3]=pe=>{ne.value=!0})},{default:o(()=>[H(i(e(n)("buttons.calculate")),1)]),_:1})]),key:"0"}:C.key===("EDTA"in s?s.EDTA:e(me))?{name:"append",fn:o(()=>[t(W,{color:"primary",size:"small",onClick:f[4]||(f[4]=pe=>{ae.value=!0})},{default:o(()=>[H(i(e(n)("buttons.calculate")),1)]),_:1})]),key:"1"}:void 0]),1032,["model-value","label","suffix","rules","error","error-messages","onUpdate:modelValue"]),C.isLiquid&&C.key!==("H2O"in s?s.H2O:e(Ue))&&C.type!==("ReagentTypeName"in s?s.ReagentTypeName:e(ee)).COMPOUND?(r(),b("div",Wa,[t(Ne,{"model-value":C.dilution,label:e(n)("recipes.page.dilution"),suffix:"%",class:"ml-2","hide-details":"auto","onUpdate:modelValue":pe=>_(pe,C)},null,8,["model-value","label","onUpdate:modelValue"])])):D("",!0)]))),128)),e(a).isLiquid?(r(),b("div",za,[t(W,{color:"primary",size:"small",onClick:f[5]||(f[5]=C=>{be.value=!0})},{default:o(()=>[H(i(e(n)("recipes.page.calculateReagentMass")),1)]),_:1})])):D("",!0),t(ue,null,{default:o(()=>[e(a).isSeveralLiquidReagents?(r(),b("div",ja,[t(Ne,{"model-value":e(a).totalVolume,label:e(n)("recipes.page.totalVolume"),suffix:e(n)("units.ml"),variant:"outlined",hint:e(a).isSeveralLiquidReagents?e(n)("recipes.page.totalVolumeHint"):"","persistent-hint":"auto",class:"mt-4","onUpdate:modelValue":K},null,8,["model-value","label","suffix","hint"])])):D("",!0)]),_:1})])):D("",!0)]),_:1}),e(a).isReagents?(r(),b("div",Ja,[t(Fe,{class:"mt-10 mb-4"},{default:o(()=>[H(i(e(n)("recipes.page.fertilizerConc")),1)]),_:1}),t(dt,{recipe:e(a),class:"mb-10"},null,8,["recipe"]),t(ge,{modelValue:e(a).name,"onUpdate:modelValue":f[6]||(f[6]=C=>e(a).name=C),variant:"underlined",label:e(n)("recipes.page.name"),hint:e(n)("recipes.page.nameHint"),"hide-details":"auto",class:"mb-2 mb-sm-4",rules:[e(g),tt]},null,8,["modelValue","label","hint","rules"]),t(na,{modelValue:e(a).description,"onUpdate:modelValue":f[7]||(f[7]=C=>e(a).description=C),variant:"underlined",label:e(n)("recipes.page.description"),"hide-details":"auto","auto-grow":"",rows:"1",hint:e(n)("recipes.page.descriptionHint")},null,8,["modelValue","label","hint"]),P("div",Ga,[!e(z)&&!e(q)?(r(),Z(W,{key:0,color:"error",onClick:st},{default:o(()=>[H(i(e(n)("buttons.remove")),1)]),_:1})):D("",!0),t(W,{class:"ml-auto",onClick:f[8]||(f[8]=C=>s.$router.push(e(d).recipes.path))},{default:o(()=>[H(i(e(n)("buttons.cancel")),1)]),_:1}),t(W,te({color:"primary",class:"ml-2"},Nt(e(z)||e(q)?{click:ot}:{click:nt})),{default:o(()=>[H(i(e(n)("buttons.save")),1)]),_:1},16)])])):D("",!0)]),_:1},512)]),_:1})]),_:1}),t(ct,{modelValue:e(Y),"onUpdate:modelValue":f[9]||(f[9]=C=>$(Y)?Y.value=C:null)},null,8,["modelValue"]),t(pt,{modelValue:e(ne),"onUpdate:modelValue":f[10]||(f[10]=C=>$(ne)?ne.value=C:null),recipe:e(a),onSave:it},null,8,["modelValue","recipe"]),t(ft,{modelValue:e(ae),"onUpdate:modelValue":f[11]||(f[11]=C=>$(ae)?ae.value=C:null),recipe:e(a),onSave:rt},null,8,["modelValue","recipe"]),t(vt,{modelValue:e(be),"onUpdate:modelValue":f[12]||(f[12]=C=>$(be)?be.value=C:null),recipe:e(a),onSave:mt},null,8,["modelValue","recipe"])]),_:1})}}}),Jl=Et(Za,[["__scopeId","data-v-5b10bdcc"]]);export{Jl as default};
