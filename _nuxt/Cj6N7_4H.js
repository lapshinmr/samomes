import{_ as Ro}from"./X6MtcrI4.js";import{_ as Po}from"./D8L4ddpU.js";import{_ as Ao}from"./BFeahmug.js";import{V as To,_ as Vo}from"./B1YqnSCG.js";import{_ as nt}from"./BAlGtWDv.js";import fn from"./Cr_eJaku.js";import{f as A}from"./DHChNhVW.js";import{e as le,B as Eo,k as be,C as Me,c as M,o as x,a as y,d as j,t as m,j as u,b as w,E as $,w as R,H as I,L as z,M as Lt,h as Y,r as W,z as ne,F as Do,G as Io,D as mt,y as Oo,f as jo,A as $o,i as G,I as Lo,J as Wo}from"./4DDGlPu9.js";import{s as hn}from"./Ch8e8etN.js";import{V as St}from"./CiwXtdbK.js";import{i as ie,f as pe,C as Qe,E as de,t as J,g as Rt,h as q,j as Ie,k as B,l as zo,u as Bo,m as me,R as mn,n as Ho,o as No,D as Yo,A as Xo,v as ye,q as yn,r as Oe,Q as Ce,H as Ge,T as Wt,s as pn,w as Go,x as zt,y as Ze,z as Bt,B as gn,F as De,G as Te,I as Uo,J as O,K as bn,P as Ko,M as qo,a as Fo,b as Jo,N as Qo}from"./BEcuzk1H.js";import{b as Zo}from"./BBggtmFf.js";import{a as gt,V as U,b as er}from"./BEWM2UJB.js";import{u as tr}from"./CVh6j9lI.js";import{u as nr}from"./BraOfSPb.js";import{u as or}from"./CUZIdrTu.js";import{u as rr}from"./C-kXbRrJ.js";import{u as ar}from"./BuzPlw-i.js";import{R as ir}from"./CgbmeEYS.js";import{R as Ht}from"./pIIQsBHX.js";import{u as sr,V as lr}from"./DbTOrhwR.js";import{a as he}from"./ChtXI062.js";import{V as Ue}from"./pn0yBbum.js";import{V as dr}from"./BqA8cAIL.js";import"./B931MWyl.js";import"./bzDsmipn.js";import"./B_yGS1YP.js";import"./CIUUx1Lt.js";import"./CKJfut37.js";import"./D5xaZfaH.js";import"./D1J_CxX2.js";import"./DpWlsX81.js";import"./vnWA3dHU.js";import"./T2xCpJ1C.js";import"./DPOVp56R.js";import"./C6uoOoNV.js";import"./Pi4BUpqD.js";/* empty css        */import"./C615Q_KG.js";import"./BoIzNFIF.js";import"./CVm5WXKH.js";import"./CCfVRiHa.js";import"./Dw-wCBdr.js";import"./D2vPiwbM.js";const ur={key:0,class:"d-flex mb-4"},cr={class:"mx-2 align-self-end mb-1"},fr={class:"font-weight-medium"},hr={style:{width:"60px"}},mr={key:1,class:"d-flex mb-4"},yr={style:{width:"80px"}},pr={class:"mx-3 align-self-end mb-1"},gr={style:{width:"60px"}},br={class:"d-flex"},vr={class:"d-flex align-center text-body-2 text-grey-darken-1"},xr=le({__name:"TheHardnessTable",props:Eo({remineral:{},khDisabled:{type:Boolean,default:!1},caMgRatioDisabled:{type:Boolean,default:!1}},{changeVolume:{},changeVolumeModifiers:{},doseVolume:{},doseVolumeModifiers:{},gh:{},ghModifiers:{},kh:{},khModifiers:{},caMgRatio:{},caMgRatioModifiers:{}}),emits:["update:changeVolume","update:doseVolume","update:gh","update:kh","update:caMgRatio"],setup(t){const{t:e}=be(),n=Me(t,"changeVolume"),o=Me(t,"doseVolume"),r=Me(t,"gh"),a=Me(t,"kh"),i=Me(t,"caMgRatio");return(s,l)=>{const d=nt,c=fn;return x(),M("div",null,[s.remineral.isDry?(x(),M("div",ur,[y("div",cr,[y("span",fr,m(("format"in s?s.format:u(A))(s.remineral.totalMass))+" "+m(u(e)("units.g")),1),j(" "+m(u(e)("reminerals.page.explanation.dry")),1)]),y("div",hr,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=f=>n.value=f),suffix:u(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])):(x(),M("div",mr,[y("div",yr,[w(d,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=f=>o.value=f),suffix:u(e)("units.ml"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])]),y("div",pr,m(u(e)("reminerals.page.explanation.liquid")),1),y("div",gr,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=f=>n.value=f),suffix:u(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])),y("div",br,[w(d,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=f=>r.value=f),label:"Gh",suffix:"Gh",variant:"outlined","hide-details":"auto",class:"mb-2 flex-1-0-0",disabled:r.value===null},null,8,["modelValue","disabled"]),w(d,{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=f=>a.value=f),label:"Kh",suffix:"Kh",variant:"outlined","hide-details":"auto",class:"mb-2 ml-2 flex-1-0-0",disabled:a.value===null||s.khDisabled},null,8,["modelValue","disabled"]),w(d,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=f=>i.value=f),label:"Ca / Mg",variant:"outlined","hide-details":"auto",class:"mb-2 ml-2 flex-1-0-0",disabled:i.value===null||s.caMgRatioDisabled},null,8,["modelValue","disabled"])]),y("div",vr,[w(c,{name:"mdi-information-outline",size:"16",class:"mr-1 flex-shrink-0"}),j(" "+m(u(e)("reminerals.page.ghKhHint")),1)])])}}}),wr={class:"pl-0 text-center"},kr={style:{"white-space":"nowrap"}},_r={class:"font-weight-medium"},Mr={class:"pl-0 text-center"},Cr=le({name:"TheSoluteElementsTable",__name:"TheSoluteElementsTable",props:{remineral:{}},setup(t){const{t:e}=be(),n=t,o=$(()=>hn(n.remineral.concentrationWithoutHCO3)),r=$(()=>Object.keys(n.remineral.concentrationWithoutHCO3).length);return(a,i)=>(x(),M("div",null,[w(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[y("th",wr,m(u(e)("common.element")),1),(x(!0),M(I,null,z(u(o),([s],l)=>(x(),M("th",{key:s,class:Lt(["text-center",{"pr-0":l===u(r)-1}])},[y("div",kr,m(s),1)],2))),128))])]),y("tbody",null,[y("tr",_r,[y("td",Mr,m(u(e)("reminerals.page.concentration"))+", "+m(a.remineral.isLiquid?u(e)("units.g/l"):u(e)("units.g/1g")),1),(x(!0),M(I,null,z(u(o),([s,l],d)=>(x(),M("td",{key:s,class:Lt(["text-center",{"pr-0":d===u(r)-1}])},[l?(x(),M(I,{key:0},[j(m(("format"in a?a.format:u(A))(l,3)),1)],64)):(x(),M(I,{key:1},[j(" â€” ")],64))],2))),128))])])]),_:1})]))}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Nt={modes:{point(t,e){return et(t,e,{intersect:!0})},nearest(t,e,n){return Pr(t,e,n)},x(t,e,n){return et(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return et(t,e,{intersect:n.intersect,axis:"y"})}}};function Pt(t,e,n){return(Nt.modes[n.mode]||Nt.modes.nearest)(t,e,n)}function Sr(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Rr(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function et(t,e,n){return t.filter(o=>n.intersect?o.inRange(e.x,e.y):Sr(o,e,n.axis))}function Pr(t,e,n){let o=Number.POSITIVE_INFINITY;return et(t,e,n).reduce((r,a)=>{const i=a.getCenterPoint(),s=Rr(e,i,n.axis),l=Rt(e,s);return l<o?(r=[a],o=l):l===o&&r.push(a),r},[]).sort((r,a)=>r._index-a._index).slice(0,1)}function ue(t,e,n){const o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}const Ar=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,ae=.001,ot=(t,e,n)=>Math.min(n,Math.max(e,t)),vn=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function Tr(t,e,n){for(const o of Object.keys(t))t[o]=ot(t[o],e,n);return t}function Vr(t,e,n,o){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+o,2)}function xn(t,{x:e,y:n,x2:o,y2:r},a,{borderWidth:i,hitTolerance:s}){const l=(i+s)/2,d=t.x>=e-l-ae&&t.x<=o+l+ae,c=t.y>=n-l-ae&&t.y<=r+l+ae;return a==="x"?d:(a==="y"||d)&&c}function wn(t,{rect:e,center:n},o,{rotation:r,borderWidth:a,hitTolerance:i}){const s=ue(t,n,J(-r));return xn(s,e,o,{borderWidth:a,hitTolerance:i})}function ce(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function Er(t,e,n,o=!0){const r=n.split(".");let a=0;for(const i of e.split(".")){const s=r[a++];if(parseInt(i,10)<parseInt(s,10))break;if(Ar(s,i)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const kn=t=>typeof t=="string"&&t.endsWith("%"),_n=t=>parseFloat(t)/100,Mn=t=>ot(_n(t),0,1),Se=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Dr={box:t=>Se(t.centerX,t.centerY),doughnutLabel:t=>Se(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Se(t.centerX,t.centerY),line:t=>Se(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Se(t.centerX,t.centerY)};function At(t,e){return e==="start"?0:e==="end"?t:kn(e)?Mn(e)*t:t/2}function re(t,e,n=!0){return typeof e=="number"?e:kn(e)?(n?Mn(e):_n(e))*t:t}function Ir(t,e){const{x:n,width:o}=t,r=e.textAlign;return r==="center"?n+o/2:r==="end"||r==="right"?n+o:n}function Cn(t,e,{borderWidth:n,position:o,xAdjust:r,yAdjust:a},i){const s=ie(i),l=e.width+(s?i.width:0)+n,d=e.height+(s?i.height:0)+n,c=Tt(o),f=Yt(t.x,l,r,c.x),g=Yt(t.y,d,a,c.y);return{x:f,y:g,x2:f+l,y2:g+d,width:l,height:d,centerX:f+l/2,centerY:g+d/2}}function Tt(t,e="center"){return ie(t)?{x:ye(t.x,e),y:ye(t.y,e)}:(t=ye(t,e),{x:t,y:t})}const Sn=(t,e)=>t&&t.autoFit&&e<1;function Rn(t,e){const n=t.font,o=pe(n)?n:[n];return Sn(t,e)?o.map(function(r){const a=Ze(r);return a.size=Math.floor(r.size*e),a.lineHeight=r.lineHeight,Ze(a)}):o.map(r=>Ze(r))}function Pn(t){return t&&(q(t.xValue)||q(t.yValue))}function Yt(t,e,n=0,o){return t-At(e,o)+n}function ve(t,e,n){const o=n.init;if(o){if(o===!0)return Tn(e,n)}else return;return Or(t,e,n)}function An(t,e,n){let o=!1;return e.forEach(r=>{me(t[r])?(o=!0,n[r]=t[r]):q(n[r])&&delete n[r]}),o}function Tn(t,e){const n=e.type||"line";return Dr[n](t)}function Or(t,e,n){const o=Oe(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return Tn(e,n);if(ie(o))return o}const yt=new Map,jr=t=>isNaN(t)||t<=0,$r=t=>t.reduce(function(e,n){return e+=n.string,e},"");function rt(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function at(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(J(o)),t.translate(-e,-n))}function F(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function xe(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function it(t,e){const n=e.content;if(rt(n))return{width:re(n.width,e.width),height:re(n.height,e.height)};const o=Rn(e),r=e.textStrokeWidth,a=pe(n)?n:[n],i=a.join()+$r(o)+r+(t._measureText?"-spriting":"");return yt.has(i)||yt.set(i,Br(t,a,o,r)),yt.get(i)}function Vn(t,e,n){const{x:o,y:r,width:a,height:i}=e;t.save(),xe(t,n);const s=F(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Ho(t,{x:o,y:r,w:a,h:i,radius:Tr(No(n.borderRadius),0,Math.min(a,i)/2)}),t.closePath(),t.fill(),s&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function En(t,e,n,o){const r=n.content;if(rt(r)){t.save(),t.globalAlpha=Yr(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const a=pe(r)?r:[r],i=Rn(n,o),s=n.color,l=pe(s)?s:[s],d=Ir(e,n),c=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Lr(t,n)&&Hr(t,{x:d,y:c},a,i),Nr(t,{x:d,y:c},a,{fonts:i,colors:l}),t.restore()}function Lr(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Wr(t,e,n,o){const{radius:r,options:a}=e,i=a.pointStyle,s=a.rotation;let l=(s||0)*mn;if(rt(i)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),t.restore();return}jr(r)||zr(t,{x:n,y:o,radius:r,rotation:s,style:i,rad:l})}function zr(t,{x:e,y:n,radius:o,rotation:r,style:a,rad:i}){let s,l,d,c;switch(t.beginPath(),a){default:t.arc(e,n,o,0,pn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Wt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Wt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),t.closePath();break;case"rectRounded":c=o*.516,d=o-c,s=Math.cos(i+Ce)*d,l=Math.sin(i+Ce)*d,t.arc(e-s,n-l,c,i-B,i-Ge),t.arc(e+l,n-s,c,i-Ge,i),t.arc(e+s,n+l,c,i,i+Ge),t.arc(e-l,n+s,c,i+Ge,i+B),t.closePath();break;case"rect":if(!r){d=Math.SQRT1_2*o,t.rect(e-d,n-d,2*d,2*d);break}i+=Ce;case"rectRot":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+l,n-s),t.lineTo(e+s,n+l),t.lineTo(e-l,n+s),t.closePath();break;case"crossRot":i+=Ce;case"cross":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"star":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s),i+=Ce,s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"line":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(i)*o,n+Math.sin(i)*o);break}t.fill()}function Br(t,e,n,o){t.save();const r=e.length;let a=0,i=o;for(let s=0;s<r;s++){const l=n[Math.min(s,n.length-1)];t.font=l.string;const d=e[s];a=Math.max(a,t.measureText(d).width+o),i+=l.lineHeight}return t.restore(),{width:a,height:i}}function Hr(t,{x:e,y:n},o,r){t.beginPath();let a=0;o.forEach(function(i,s){const l=r[Math.min(s,r.length-1)],d=l.lineHeight;t.font=l.string,t.strokeText(i,e,n+d/2+a),a+=d}),t.stroke()}function Nr(t,{x:e,y:n},o,{fonts:r,colors:a}){let i=0;o.forEach(function(s,l){const d=a[Math.min(l,a.length-1)],c=r[Math.min(l,r.length-1)],f=c.lineHeight;t.beginPath(),t.font=c.string,t.fillStyle=d,t.fillText(s,e,n+f/2+i),i+=f,t.fill()})}function Yr(t,e){const n=zt(t)?t:e;return zt(n)?ot(n,0,1):1}const Dn=["left","bottom","top","right"];function Xr(t,e){const{pointX:n,pointY:o,options:r}=e,a=r.callout,i=a&&a.display&&Fr(e,a);if(!i||Qr(e,a,i))return;if(t.save(),t.beginPath(),!F(t,a))return t.restore();const{separatorStart:l,separatorEnd:d}=Gr(e,i),{sideStart:c,sideEnd:f}=Kr(e,i,l);(a.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(d.x,d.y)),t.moveTo(c.x,c.y),t.lineTo(f.x,f.y);const g=ue({x:n,y:o},e.getCenterPoint(),J(-e.rotation));t.lineTo(g.x,g.y),t.stroke(),t.restore()}function Gr(t,e){const{x:n,y:o,x2:r,y2:a}=t,i=Ur(t,e);let s,l;return e==="left"||e==="right"?(s={x:n+i,y:o},l={x:s.x,y:a}):(s={x:n,y:o+i},l={x:r,y:s.y}),{separatorStart:s,separatorEnd:l}}function Ur(t,e){const{width:n,height:o,options:r}=t,a=r.callout.margin+r.borderWidth/2;return e==="right"?n+a:e==="bottom"?o+a:-a}function Kr(t,e,n){const{y:o,width:r,height:a,options:i}=t,s=i.callout.start,l=qr(e,i.callout);let d,c;return e==="left"||e==="right"?(d={x:n.x,y:o+re(a,s)},c={x:d.x+l,y:d.y}):(d={x:n.x+re(r,s),y:n.y},c={x:d.x,y:d.y+l}),{sideStart:d,sideEnd:c}}function qr(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Fr(t,e){const n=e.position;return Dn.includes(n)?n:Jr(t,e)}function Jr(t,e){const{x:n,y:o,x2:r,y2:a,width:i,height:s,pointX:l,pointY:d,centerX:c,centerY:f,rotation:g}=t,_={x:c,y:f},C=e.start,b=re(i,C),S=re(s,C),T=[n,n+b,n+b,r],k=[o+S,a,o,a],D=[];for(let E=0;E<4;E++){const p=ue({x:T[E],y:k[E]},_,J(g));D.push({position:Dn[E],distance:Rt(p,{x:l,y:d})})}return D.sort((E,p)=>E.distance-p.distance)[0].position}function Qr(t,e,n){const{pointX:o,pointY:r}=t,a=e.margin;let i=o,s=r;return n==="left"?i+=a:n==="right"?i-=a:n==="top"?s+=a:n==="bottom"&&(s-=a),t.inRange(i,s)}const Xt={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ge(t,e,n){return e=typeof e=="number"?e:t.parse(e),yn(e)?t.getPixelForValue(e):n}function se(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const r=n.charAt(0),a=Object.values(t).filter(i=>i.axis&&i.axis===r);return a.length?a[0].id:r}function In(t,e){if(t){const n=t.options.reverse,o=ge(t,e.min,n?e.end:e.start),r=ge(t,e.max,n?e.start:e.end);return{start:o,end:r}}}function On(t,e){const{chartArea:n,scales:o}=t,r=o[se(o,e,"xScaleID")],a=o[se(o,e,"yScaleID")];let i=n.width/2,s=n.height/2;return r&&(i=ge(r,e.xValue,r.left+r.width/2)),a&&(s=ge(a,e.yValue,a.top+a.height/2)),{x:i,y:s}}function Vt(t,e){const n=t.scales,o=n[se(n,e,"xScaleID")],r=n[se(n,e,"yScaleID")];if(!o&&!r)return{};let{left:a,right:i}=o||t.chartArea,{top:s,bottom:l}=r||t.chartArea;const d=Gt(o,{min:e.xMin,max:e.xMax,start:a,end:i});a=d.start,i=d.end;const c=Gt(r,{min:e.yMin,max:e.yMax,start:l,end:s});return s=c.start,l=c.end,{x:a,y:s,x2:i,y2:l,width:i-a,height:l-s,centerX:a+(i-a)/2,centerY:s+(l-s)/2}}function jn(t,e){if(!Pn(e)){const n=Vt(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const r=o*2,a=n.centerX+e.xAdjust,i=n.centerY+e.yAdjust;return{x:a-o,y:i-o,x2:a+o,y2:i+o,centerX:a,centerY:i,width:r,height:r,radius:o}}return ea(t,e)}function Zr(t,e){const{scales:n,chartArea:o}=t,r=n[e.scaleID],a={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return r?ta(r,a,e):na(n,a,e),a}function $n(t,e){const n=Vt(t,e);return n.initProperties=ve(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:aa(t,n,e),initProperties:n.initProperties}],n}function ea(t,e){const n=On(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function Gt(t,e){const n=In(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function ta(t,e,n){const o=ge(t,n.value,NaN),r=ge(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=r):(e.y=o,e.y2=r)}function na(t,e,n){for(const o of Object.keys(Xt)){const r=t[se(t,n,o)];if(r){const{min:a,max:i,start:s,end:l,startProp:d,endProp:c}=Xt[o],f=In(r,{min:n[a],max:n[i],start:r[s],end:r[l]});e[d]=f.start,e[c]=f.end}}}function oa({properties:t,options:e},n,o,r){const{x:a,x2:i,width:s}=t;return Ln({start:a,end:i,borderWidth:e.borderWidth},{position:o.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function ra({properties:t,options:e},n,o,r){const{y:a,y2:i,height:s}=t;return Ln({start:a,end:i,borderWidth:e.borderWidth},{position:o.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function Ln(t,e){const{start:n,end:o,borderWidth:r}=t,{position:a,padding:{start:i,end:s},adjust:l}=e,d=o-r-n-i-s-e.size;return n+r/2+l+At(d,a)}function aa(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const r=Tt(o.position),a=Ie(o.padding),i=it(t.ctx,o),s=oa({properties:e,options:n},i,r,a),l=ra({properties:e,options:n},i,r,a),d=i.width+a.width,c=i.height+a.height;return{x:s,y:l,x2:s+d,y2:l+c,width:d,height:c,centerX:s+d/2,centerY:l+c/2,rotation:o.rotation}}const bt=["enter","leave"],Et=bt.concat("click");function ia(t,e,n){e.listened=An(n,Et,e.listeners),e.moveListened=!1,bt.forEach(o=>{me(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&me(o.click)&&(e.listened=!0),e.moveListened||bt.forEach(r=>{me(o[r])&&(e.listened=!0,e.moveListened=!0)})})}function sa(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return la(t,e,n);case"click":return da(t,e,n)}}function la(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=Pt(t.visibleElements,e,n.interaction):o=[];const r=t.hovered;t.hovered=o;const a={state:t,event:e};let i=Ut(a,"leave",r,o);return Ut(a,"enter",o,r)||i}function Ut({state:t,event:e},n,o,r){let a;for(const i of o)r.indexOf(i)<0&&(a=Wn(i.options[n]||t.listeners[n],i,e)||a);return a}function da(t,e,n){const o=t.listeners,r=Pt(t.visibleElements,e,n.interaction);let a;for(const i of r)a=Wn(i.options.click||o.click,i,e)||a;return a}function Wn(t,e,n){return Oe(t,[e.$context,n])===!0}const tt=["afterDraw","beforeDraw"];function ua(t,e,n){const o=e.visibleElements;e.hooked=An(n,tt,e.hooks),e.hooked||o.forEach(r=>{e.hooked||tt.forEach(a=>{me(r.options[a])&&(e.hooked=!0)})})}function Kt(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return Oe(o,[e.$context])}}function ca(t,e,n){const o=pa(t.scales,e,n);let r=qt(e,o,"min","suggestedMin");r=qt(e,o,"max","suggestedMax")||r,r&&me(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function fa(t,e){for(const n of t)ma(n,e)}function qt(t,e,n,o){if(yn(e[n])&&!ha(t.options,n,o)){const r=t[n]!==e[n];return t[n]=e[n],r}}function ha(t,e,n){return q(t[e])||q(t[n])}function ma(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=se(e,t,n);o&&!e[o]&&ya(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function ya(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(q(t[n+o]))return!0;return!1}function pa(t,e,n){const o=e.axis,r=e.id,a=o+"ScaleID",i={min:ye(e.min,Number.NEGATIVE_INFINITY),max:ye(e.max,Number.POSITIVE_INFINITY)};for(const s of n)s.scaleID===r?Ft(s,e,["value","endValue"],i):se(t,s,a)===r&&Ft(s,e,[o+"Min",o+"Max",o+"Value"],i);return i}function Ft(t,e,n,o){for(const r of n){const a=t[r];if(q(a)){const i=e.parse(a);o.min=Math.min(o.min,i),o.max=Math.max(o.max,i)}}}class we extends de{inRange(e,n,o,r){const{x:a,y:i}=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation));return xn({x:a,y:i},this.getProps(["x","y","x2","y2"],r),o,this.options)}getCenterPoint(e){return ce(this,e)}draw(e){e.save(),at(e,this.getCenterPoint(),this.options.rotation),Vn(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return $n(e,n)}}we.id="boxAnnotation";we.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};we.defaultRoutes={borderColor:"color",backgroundColor:"color"};we.descriptors={label:{_fallback:!0}};class st extends de{inRange(e,n,o,r){return wn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options;!n.display||!n.content||(ka(e,this),e.save(),at(e,this.getCenterPoint(),this.rotation),En(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const o=ga(e,n);if(!o)return{};const{controllerMeta:r,point:a,radius:i}=va(e,n,o);let s=it(e.ctx,n);const l=xa(s,i);Sn(n,l)&&(s={width:s.width*l,height:s.height*l});const{position:d,xAdjust:c,yAdjust:f}=n,g=Cn(a,s,{borderWidth:0,position:d,xAdjust:c,yAdjust:f});return{initProperties:ve(e,g,n),...g,...r,rotation:n.rotation,_fitRatio:l}}}st.id="doughnutLabelAnnotation";st.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};st.defaultRoutes={};function ga(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,o){const r=o.controller;return r instanceof Yo&&ba(t,e,o.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?o:n},void 0)}function ba(t,e,n){if(!e.autoHide)return!0;for(let o=0;o<n.length;o++)if(!n[o].hidden&&t.getDataVisibility(o))return!0}function va({chartArea:t},e,n){const{left:o,top:r,right:a,bottom:i}=t,{innerRadius:s,offsetX:l,offsetY:d}=n.controller,c=(o+a)/2+l,f=(r+i)/2+d,g={left:Math.max(c-s,o),right:Math.min(c+s,a),top:Math.max(f-s,r),bottom:Math.min(f+s,i)},_={x:(g.left+g.right)/2,y:(g.top+g.bottom)/2},C=e.spacing+e.borderWidth/2,b=s-C,S=_.y>f,T=S?r+C:i-C,k=wa(T,c,f,b);return{controllerMeta:{_centerX:c,_centerY:f,_radius:b,_counterclockwise:S,...k},point:_,radius:Math.min(s,Math.min(g.right-g.left,g.bottom-g.top)/2)}}function xa({width:t,height:e},n){const o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/o}function wa(t,e,n,o){const r=Math.pow(n-t,2),a=Math.pow(o,2),i=e*-2,s=Math.pow(e,2)+r-a,l=Math.pow(i,2)-4*s;if(l<=0)return{_startAngle:0,_endAngle:pn};const d=(-i-Math.sqrt(l))/2,c=(-i+Math.sqrt(l))/2;return{_startAngle:Bt({x:e,y:n},{x:d,y:t}).angle,_endAngle:Bt({x:e,y:n},{x:c,y:t}).angle}}function ka(t,e){const{_centerX:n,_centerY:o,_radius:r,_startAngle:a,_endAngle:i,_counterclockwise:s,options:l}=e;t.save();const d=F(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,o,r,a,i,s),t.closePath(),t.fill(),d&&t.stroke(),t.restore()}class je extends de{inRange(e,n,o,r){return wn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=!q(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),at(e,this.getCenterPoint(),this.rotation),Xr(e,this),Vn(e,this,n),En(e,_a(this),n),e.restore())}resolveElementProperties(e,n){let o;if(Pn(n))o=On(e,n);else{const{centerX:s,centerY:l}=Vt(e,n);o={x:s,y:l}}const r=Ie(n.padding),a=it(e.ctx,n),i=Cn(o,a,n,r);return{initProperties:ve(e,i,n),pointX:o.x,pointY:o.y,...i,rotation:n.rotation}}}je.id="labelAnnotation";je.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};je.defaultRoutes={borderColor:"color"};function _a({x:t,y:e,width:n,height:o,options:r}){const a=r.borderWidth/2,i=Ie(r.padding);return{x:t+i.left+a,y:e+i.top+a,width:n-i.left-i.right-r.borderWidth,height:o-i.top-i.bottom-r.borderWidth}}const Dt=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),vt=(t,e,n)=>Dt(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Jt=(t,e,n)=>Dt(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Ae=t=>t*t,Ma=(t,e,{x:n,y:o,x2:r,y2:a},i)=>i==="y"?{start:Math.min(o,a),end:Math.max(o,a),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},Qt=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,xt=(t,e,n,o)=>({x:Qt(t.x,e.x,n.x,o),y:Qt(t.y,e.y,n.y,o)}),Zt=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),en=(t,e,n,o)=>-Math.atan2(Zt(t.x,e.x,n.x,o),Zt(t.y,e.y,n.y,o))+.5*B;class $e extends de{inRange(e,n,o,r){const a=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y"){const i={mouseX:e,mouseY:n},{path:s,ctx:l}=this;if(s){F(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:c}=this.$context,f=e*c.currentDevicePixelRatio,g=n*c.currentDevicePixelRatio,_=l.isPointInStroke(s,f,g)||wt(this,i,r);return l.restore(),_}const d=Ae(a);return Pa(this,i,d,r)||wt(this,i,r)}return Ca(this,{mouseX:e,mouseY:n},o,{hitSize:a,useFinalPosition:r})}getCenterPoint(e){return ce(this,e)}draw(e){const{x:n,y:o,x2:r,y2:a,cp:i,options:s}=this;if(e.save(),!F(e,s))return e.restore();xe(e,s);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-o,2));if(s.curve&&i)return ja(e,this,i,l),e.restore();const{startOpts:d,endOpts:c,startAdjust:f,endAdjust:g}=zn(this),_=Math.atan2(a-o,r-n);e.translate(n,o),e.rotate(_),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-g,0),e.shadowColor=s.borderShadowColor,e.stroke(),kt(e,0,f,d),kt(e,l,-g,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=Zr(e,n),{x:r,y:a,x2:i,y2:s}=o,l=Sa(o,e.chartArea),d=l?Ra({x:r,y:a},{x:i,y:s},e.chartArea):{x:r,y:a,x2:i,y2:s,width:Math.abs(i-r),height:Math.abs(s-a)};if(d.centerX=(i+r)/2,d.centerY=(s+a)/2,d.initProperties=ve(e,d,n),n.curve){const f={x:d.x,y:d.y},g={x:d.x2,y:d.y2};d.cp=Oa(d,n,Rt(f,g))}const c=Aa(e,d,n.label);return c._visible=l,d.elements=[{type:"label",optionScope:"label",properties:c,initProperties:d.initProperties}],d}}$e.id="lineAnnotation";const tn={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};$e.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},tn),fill:!1,length:12,start:Object.assign({},tn),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},je.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};$e.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};$e.defaultRoutes={borderColor:"color"};function Ca(t,{mouseX:e,mouseY:n},o,{hitSize:r,useFinalPosition:a}){const i=Ma(e,n,t.getProps(["x","y","x2","y2"],a),o);return vn(i,r)||wt(t,{mouseX:e,mouseY:n},a,o)}function Sa({x:t,y:e,x2:n,y2:o},{top:r,right:a,bottom:i,left:s}){return!(t<s&&n<s||t>a&&n>a||e<r&&o<r||e>i&&o>i)}function nn({x:t,y:e},n,{top:o,right:r,bottom:a,left:i}){return t<i&&(e=Jt(i,{x:t,y:e},n),t=i),t>r&&(e=Jt(r,{x:t,y:e},n),t=r),e<o&&(t=vt(o,{x:t,y:e},n),e=o),e>a&&(t=vt(a,{x:t,y:e},n),e=a),{x:t,y:e}}function Ra(t,e,n){const{x:o,y:r}=nn(t,e,n),{x:a,y:i}=nn(e,t,n);return{x:o,y:r,x2:a,y2:i,width:Math.abs(a-o),height:Math.abs(i-r)}}function Pa(t,{mouseX:e,mouseY:n},o=ae,r){const{x:a,y:i,x2:s,y2:l}=t.getProps(["x","y","x2","y2"],r),d=s-a,c=l-i,f=Ae(d)+Ae(c),g=f===0?-1:((e-a)*d+(n-i)*c)/f;let _,C;return g<0?(_=a,C=i):g>1?(_=s,C=l):(_=a+g*d,C=i+g*c),Ae(e-_)+Ae(n-C)<=o}function wt(t,{mouseX:e,mouseY:n},o,r){const a=t.label;return a.options.display&&a.inRange(e,n,r,o)}function Aa(t,e,n){const o=n.borderWidth,r=Ie(n.padding),a=it(t.ctx,n),i=a.width+r.width+o,s=a.height+r.height+o;return Va(e,n,{width:i,height:s,padding:r},t.chartArea)}function Ta(t){const{x:e,y:n,x2:o,y2:r}=t,a=Math.atan2(r-n,o-e);return a>B/2?a-B:a<B/-2?a+B:a}function Va(t,e,n,o){const{width:r,height:a,padding:i}=n,{xAdjust:s,yAdjust:l}=e,d={x:t.x,y:t.y},c={x:t.x2,y:t.y2},f=e.rotation==="auto"?Ta(t):J(e.rotation),g=Ea(r,a,f),_=Da(t,e,{labelSize:g,padding:i},o),C=t.cp?xt(d,t.cp,c,_):Dt(d,c,_),b={size:g.w,min:o.left,max:o.right,padding:i.left},S={size:g.h,min:o.top,max:o.bottom,padding:i.top},T=rn(C.x,b)+s,k=rn(C.y,S)+l;return{x:T-r/2,y:k-a/2,x2:T+r/2,y2:k+a/2,centerX:T,centerY:k,pointX:C.x,pointY:C.y,width:r,height:a,rotation:Go(f)}}function Ea(t,e,n){const o=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*o)}}function Da(t,e,n,o){let r;const a=Ia(t,o);return e.position==="start"?r=on({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?r=1-on({w:t.x-t.x2,h:t.y-t.y2},n,e,a):r=At(1,e.position),r}function on(t,e,n,o){const{labelSize:r,padding:a}=e,i=t.w*o.dx,s=t.h*o.dy,l=i>0&&(r.w/2+a.left-o.x)/i,d=s>0&&(r.h/2+a.top-o.y)/s;return ot(Math.max(l,d),0,.25)}function Ia(t,e){const{x:n,x2:o,y:r,y2:a}=t,i=Math.min(r,a)-e.top,s=Math.min(n,o)-e.left,l=e.bottom-Math.max(r,a),d=e.right-Math.max(n,o);return{x:Math.min(s,d),y:Math.min(i,l),dx:s<=d?1:-1,dy:i<=l?1:-1}}function rn(t,e){const{size:n,min:o,max:r,padding:a}=e,i=n/2;return n>r-o?(r+o)/2:(o>=t-a-i&&(t=o+a+i),r<=t+a+i&&(t=r-a-i),t)}function zn(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:an(t,n),endAdjust:an(t,o)}}function an(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,r=t.options.borderWidth/2,a={x:n,y:o+r};return Math.abs(vt(0,a,{x:0,y:r}))}function kt(t,e,n,o){if(!o||!o.display)return;const{length:r,width:a,fill:i,backgroundColor:s,borderColor:l}=o,d=Math.abs(e-r)+n;t.beginPath(),xe(t,o),F(t,o),t.moveTo(d,-a),t.lineTo(e+n,0),t.lineTo(d,a),i===!0?(t.fillStyle=s||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function Oa(t,e,n){const{x:o,y:r,x2:a,y2:i,centerX:s,centerY:l}=t,d=Math.atan2(i-r,a-o),c=Tt(e.controlPoint,0),f={x:s+re(n,c.x,!1),y:l+re(n,c.y,!1)};return ue(f,{x:s,y:l},d)}function sn(t,{x:e,y:n},{angle:o,adjust:r},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(o),kt(t,0,-r,a),t.restore())}function ja(t,e,n,o){const{x:r,y:a,x2:i,y2:s,options:l}=e,{startOpts:d,endOpts:c,startAdjust:f,endAdjust:g}=zn(e),_={x:r,y:a},C={x:i,y:s},b=en(_,n,C,0),S=en(_,n,C,1)-B,T=xt(_,n,C,f/o),k=xt(_,n,C,1-g/o),D=new Path2D;t.beginPath(),D.moveTo(T.x,T.y),D.quadraticCurveTo(n.x,n.y,k.x,k.y),t.shadowColor=l.borderShadowColor,t.stroke(D),e.path=D,e.ctx=t,sn(t,T,{angle:b,adjust:f},d),sn(t,k,{angle:S,adjust:g},c)}class Le extends de{inRange(e,n,o,r){const a=this.options.rotation,i=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y")return $a({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),a,i);const{x:s,y:l,x2:d,y2:c}=this.getProps(["x","y","x2","y2"],r),f=o==="y"?{start:l,end:c}:{start:s,end:d},g=ue({x:e,y:n},this.getCenterPoint(r),J(-a));return g[o]>=f.start-i-ae&&g[o]<=f.end+i+ae}getCenterPoint(e){return ce(this,e)}draw(e){const{width:n,height:o,centerX:r,centerY:a,options:i}=this;e.save(),at(e,this.getCenterPoint(),i.rotation),xe(e,this.options),e.beginPath(),e.fillStyle=i.backgroundColor;const s=F(e,i);e.ellipse(r,a,o/2,n/2,B/2,0,2*B),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return $n(e,n)}}Le.id="ellipseAnnotation";Le.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},we.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Le.defaultRoutes={borderColor:"color",backgroundColor:"color"};Le.descriptors={label:{_fallback:!0}};function $a(t,e,n,o){const{width:r,height:a,centerX:i,centerY:s}=e,l=r/2,d=a/2;if(l<=0||d<=0)return!1;const c=J(n||0),f=Math.cos(c),g=Math.sin(c),_=Math.pow(f*(t.x-i)+g*(t.y-s),2),C=Math.pow(g*(t.x-i)-f*(t.y-s),2);return _/Math.pow(l+o,2)+C/Math.pow(d+o,2)<=1.0001}class lt extends de{inRange(e,n,o,r){const{x:a,y:i,x2:s,y2:l,width:d}=this.getProps(["x","y","x2","y2","width"],r),c=(this.options.borderWidth+this.options.hitTolerance)/2;return o!=="x"&&o!=="y"?Vr({x:e,y:n},this.getCenterPoint(r),d/2,c):vn(o==="y"?{start:i,end:l,value:n}:{start:a,end:s,value:e},c)}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,xe(e,n);const r=F(e,n);Wr(e,this,this.centerX,this.centerY),r&&!rt(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=jn(e,n);return o.initProperties=ve(e,o,n),o}}lt.id="pointAnnotation";lt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};lt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class dt extends de{inRange(e,n,o,r){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&Wa(this.elements,e,n,r);const a=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation)),i=this.elements.map(d=>o==="y"?d.bY:d.bX),s=Math.min(...i),l=Math.max(...i);return a[o]>=s&&a[o]<=l}getCenterPoint(e){return ce(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,xe(e,o);const r=F(e,o);let a=!0;for(const i of n)a?(e.moveTo(i.x,i.y),a=!1):e.lineTo(i.x,i.y);e.closePath(),e.fill(),r&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=jn(e,n),{sides:r,rotation:a}=n,i=[],s=2*B/r;let l=a*mn;for(let d=0;d<r;d++,l+=s){const c=La(o,n,l);c.initProperties=ve(e,o,n),i.push(c)}return o.elements=i,o}}dt.id="polygonAnnotation";dt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};dt.defaultRoutes={borderColor:"color",backgroundColor:"color"};function La({centerX:t,centerY:e},{radius:n,borderWidth:o,hitTolerance:r},a){const i=(o+r)/2,s=Math.sin(a),l=Math.cos(a),d={x:t+s*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:d.x,y:d.y,centerX:d.x,centerY:d.y,bX:t+s*(n+i),bY:e-l*(n+i)}}}function Wa(t,e,n,o){let r=!1,a=t[t.length-1].getProps(["bX","bY"],o);for(const i of t){const s=i.getProps(["bX","bY"],o);s.bY>n!=a.bY>n&&e<(a.bX-s.bX)*(n-s.bY)/(a.bY-s.bY)+s.bX&&(r=!r),a=s}return r}const oe={box:we,doughnutLabel:st,ellipse:Le,label:je,line:$e,point:lt,polygon:dt};Object.keys(oe).forEach(t=>{gn.describe(`elements.${oe[t].id}`,{_fallback:"plugins.annotation.common"})});const za={update:Object.assign},Ba=Et.concat(tt),ln=(t,e)=>ie(e)?Mt(t,e):t,_t=t=>t==="color"||t==="font";function It(t="line"){return oe[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Ha(t,e,n,o){const r=Ya(t,n.animations,o),a=e.annotations,i=Ua(e.elements,a);for(let s=0;s<a.length;s++){const l=a[s],d=Bn(i,s,l.type),c=l.setContext(Ga(t,d,i,l)),f=d.resolveElementProperties(t,c);f.skip=Na(f),"elements"in f&&(Xa(d,f.elements,c,r),delete f.elements),q(d.x)||Object.assign(d,f),Object.assign(d,f.initProperties),f.options=Hn(c),r.update(d,f)}}function Na(t){return isNaN(t.x)||isNaN(t.y)}function Ya(t,e,n){return n==="reset"||n==="none"||n==="resize"?za:new Xo(t,e)}function Xa(t,e,n,o){const r=t.elements||(t.elements=[]);r.length=e.length;for(let a=0;a<e.length;a++){const i=e[a],s=i.properties,l=Bn(r,a,i.type,i.initProperties),d=n[i.optionScope].override(i);s.options=Hn(d),o.update(l,s)}}function Bn(t,e,n,o){const r=oe[It(n)];let a=t[e];return(!a||!(a instanceof r))&&(a=t[e]=new r,Object.assign(a,o)),a}function Hn(t){const e=oe[It(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Mt(t,e.defaults),Mt(t,e.defaultRoutes));for(const o of Ba)n[o]=t[o];return n}function Mt(t,e){const n={};for(const o of Object.keys(e)){const r=e[o],a=t[o];_t(o)&&pe(a)?n[o]=a.map(i=>ln(i,r)):n[o]=ln(a,r)}return n}function Ga(t,e,n,o){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:o.id,type:"annotation"}))}function Ua(t,e){const n=e.length,o=t.length;if(o<n){const r=n-o;t.splice(o,0,...new Array(r))}else o>n&&t.splice(n,o-n);return t}var Ka="3.1.0";const te=new Map,dn=t=>t.type!=="doughnutLabel",qa=Et.concat(tt);var Fa={id:"annotation",version:Ka,beforeRegister(){Er("chart.js","4.0",Qe.version)},afterRegister(){Qe.register(oe)},afterUnregister(){Qe.unregister(oe)},beforeInit(t){te.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=te.get(t),r=o.annotations=[];let a=n.annotations;ie(a)?Object.keys(a).forEach(i=>{const s=a[i];ie(s)&&(s.id=i,r.push(s))}):pe(a)&&r.push(...a),fa(r.filter(dn),t.scales)},afterDataLimits(t,e){const n=te.get(t);ca(t,e.scale,n.annotations.filter(dn).filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=te.get(t);ia(t,o,n),Ha(t,o,n,e.mode),o.visibleElements=o.elements.filter(r=>!r.skip&&r.options.display),ua(t,o,n)},beforeDatasetsDraw(t,e,n){Re(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Re(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Re(t,e.index,n.clip)},beforeDraw(t,e,n){Re(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Re(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=te.get(t);sa(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){te.delete(t)},getAnnotations(t){const e=te.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Pt(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!qa.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${oe[It(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:_t,_fallback:!0},_indexable:_t}},additionalOptionScopes:[""]};function Re(t,e,n){const{ctx:o,chartArea:r}=t,a=te.get(t);n&&zo(o,r);const i=Ja(a.visibleElements,e).sort((s,l)=>s.element.options.z-l.element.options.z);for(const s of i)Qa(o,r,a,s);n&&Bo(o)}function Ja(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const r of o.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function Qa(t,e,n,o){const r=o.element;o.main?(Kt(n,r,"beforeDraw"),r.draw(t,e),Kt(n,r,"afterDraw")):r.draw(t,e)}/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var un=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),Ve={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):Te(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var o=[].concat(e),r=o.length,a=t.font,i=0,s;for(t.font=n.string,s=0;s<r;++s)i=Math.max(t.measureText(o[s]).width,i);return t.font=a,{height:r*n.lineHeight,width:i}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),o=[],r,a,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],a=n.indexOf(s),a===-1?o.push([s,1]):n.splice(a,1);for(r=0,i=n.length;r<i;++r)o.push([n[r],-1]);return o},rasterize:function(t){return Math.round(t*un)/un}};function pt(t,e){var n=e.x,o=e.y;if(n===null)return{x:0,y:-1};if(o===null)return{x:1,y:0};var r=t.x-n,a=t.y-o,i=Math.sqrt(r*r+a*a);return{x:i?r/i:0,y:i?a/i:-1}}function Za(t,e,n,o,r){switch(r){case"center":n=o=0;break;case"bottom":n=0,o=1;break;case"right":n=1,o=0;break;case"left":n=-1,o=0;break;case"top":n=0,o=-1;break;case"start":n=-n,o=-o;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),o=Math.sin(r);break}return{x:t,y:e,vx:n,vy:o}}var ei=0,Nn=1,Yn=2,Xn=4,Gn=8;function Ke(t,e,n){var o=ei;return t<n.left?o|=Nn:t>n.right&&(o|=Yn),e<n.top?o|=Gn:e>n.bottom&&(o|=Xn),o}function ti(t,e){for(var n=t.x0,o=t.y0,r=t.x1,a=t.y1,i=Ke(n,o,e),s=Ke(r,a,e),l,d,c;!(!(i|s)||i&s);)l=i||s,l&Gn?(d=n+(r-n)*(e.top-o)/(a-o),c=e.top):l&Xn?(d=n+(r-n)*(e.bottom-o)/(a-o),c=e.bottom):l&Yn?(c=o+(a-o)*(e.right-n)/(r-n),d=e.right):l&Nn&&(c=o+(a-o)*(e.left-n)/(r-n),d=e.left),l===i?(n=d,o=c,i=Ke(n,o,e)):(r=d,a=c,s=Ke(r,a,e));return{x0:n,x1:r,y0:o,y1:a}}function qe(t,e){var n=e.anchor,o=t,r,a;return e.clamp&&(o=ti(o,e.area)),n==="start"?(r=o.x0,a=o.y0):n==="end"?(r=o.x1,a=o.y1):(r=(o.x0+o.x1)/2,a=(o.y0+o.y1)/2),Za(r,a,t.vx,t.vy,e.align)}var Fe={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,o=Math.cos(n),r=Math.sin(n),a=t.innerRadius,i=t.outerRadius;return qe({x0:t.x+o*a,y0:t.y+r*a,x1:t.x+o*i,y1:t.y+r*i,vx:o,vy:r},e)},point:function(t,e){var n=pt(t,e.origin),o=n.x*t.options.radius,r=n.y*t.options.radius;return qe({x0:t.x-o,y0:t.y-r,x1:t.x+o,y1:t.y+r,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=pt(t,e.origin),o=t.x,r=t.y,a=0,i=0;return t.horizontal?(o=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),i=Math.abs(t.base-t.y)),qe({x0:o,y0:r+i,x1:o+a,y1:r,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=pt(t,e.origin);return qe({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},K=Ve.rasterize;function ni(t){var e=t.borderWidth||0,n=t.padding,o=t.size.height,r=t.size.width,a=-r/2,i=-o/2;return{frame:{x:a-n.left-e,y:i-n.top-e,w:r+n.width+e*2,h:o+n.height+e*2},text:{x:a,y:i,w:r,h:o}}}function oi(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var o=n.getBasePixel();return t.horizontal?{x:o,y:null}:{x:null,y:o}}function ri(t){return t instanceof bn?Fe.arc:t instanceof Ko?Fe.point:t instanceof qo?Fe.bar:Fe.fallback}function ai(t,e,n,o,r,a){var i=Math.PI/2;if(a){var s=Math.min(a,r/2,o/2),l=e+s,d=n+s,c=e+o-s,f=n+r-s;t.moveTo(e,d),l<c&&d<f?(t.arc(l,d,s,-Math.PI,-i),t.arc(c,d,s,-i,0),t.arc(c,f,s,0,i),t.arc(l,f,s,i,Math.PI)):l<c?(t.moveTo(l,n),t.arc(c,d,s,-i,i),t.arc(l,d,s,i,Math.PI+i)):d<f?(t.arc(l,d,s,-Math.PI,0),t.arc(l,f,s,0,Math.PI)):t.arc(l,d,s,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,o,r)}function ii(t,e,n){var o=n.backgroundColor,r=n.borderColor,a=n.borderWidth;!o&&(!r||!a)||(t.beginPath(),ai(t,K(e.x)+a/2,K(e.y)+a/2,K(e.w)-a,K(e.h)-a,n.borderRadius),t.closePath(),o&&(t.fillStyle=o,t.fill()),r&&a&&(t.strokeStyle=r,t.lineWidth=a,t.lineJoin="miter",t.stroke()))}function si(t,e,n){var o=n.lineHeight,r=t.w,a=t.x,i=t.y+o/2;return e==="center"?a+=r/2:(e==="end"||e==="right")&&(a+=r),{h:o,w:r,x:a,y:i}}function li(t,e,n){var o=t.shadowBlur,r=n.stroked,a=K(n.x),i=K(n.y),s=K(n.w);r&&t.strokeText(e,a,i,s),n.filled&&(o&&r&&(t.shadowBlur=0),t.fillText(e,a,i,s),o&&r&&(t.shadowBlur=o))}function di(t,e,n,o){var r=o.textAlign,a=o.color,i=!!a,s=o.font,l=e.length,d=o.textStrokeColor,c=o.textStrokeWidth,f=d&&c,g;if(!(!l||!i&&!f))for(n=si(n,r,s),t.font=s.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=o.textShadowBlur,t.shadowColor=o.textShadowColor,i&&(t.fillStyle=a),f&&(t.lineJoin="round",t.lineWidth=c,t.strokeStyle=d),g=0,l=e.length;g<l;++g)li(t,e[g],{stroked:f,filled:i,w:n.w,x:n.x,y:n.y+n.h*g})}var Un=function(t,e,n,o){var r=this;r._config=t,r._index=o,r._model=null,r._rects=null,r._ctx=e,r._el=n};De(Un.prototype,{_modelize:function(t,e,n,o){var r=this,a=r._index,i=Ze(O([n.font,{}],o,a)),s=O([n.color,gn.color],o,a);return{align:O([n.align,"center"],o,a),anchor:O([n.anchor,"center"],o,a),area:o.chart.chartArea,backgroundColor:O([n.backgroundColor,null],o,a),borderColor:O([n.borderColor,null],o,a),borderRadius:O([n.borderRadius,0],o,a),borderWidth:O([n.borderWidth,0],o,a),clamp:O([n.clamp,!1],o,a),clip:O([n.clip,!1],o,a),color:s,display:t,font:i,lines:e,offset:O([n.offset,4],o,a),opacity:O([n.opacity,1],o,a),origin:oi(r._el,o),padding:Ie(O([n.padding,4],o,a)),positioner:ri(r._el),rotation:O([n.rotation,0],o,a)*(Math.PI/180),size:Ve.textSize(r._ctx,e,i),textAlign:O([n.textAlign,"start"],o,a),textShadowBlur:O([n.textShadowBlur,0],o,a),textShadowColor:O([n.textShadowColor,s],o,a),textStrokeColor:O([n.textStrokeColor,s],o,a),textStrokeWidth:O([n.textStrokeWidth,0],o,a)}},update:function(t){var e=this,n=null,o=null,r=e._index,a=e._config,i,s,l,d=O([a.display,!0],t,r);d&&(i=t.dataset.data[r],s=ye(Oe(a.formatter,[i,t]),i),l=Te(s)?[]:Ve.toTextLines(s),l.length&&(n=e._modelize(d,l,a,t),o=ni(n))),e._model=n,e._rects=o},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,o=t.ctx,r=n._model,a=n._rects,i;this.visible()&&(o.save(),r.clip&&(i=r.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=Ve.bound(0,r.opacity,1),o.translate(K(e.x),K(e.y)),o.rotate(r.rotation),ii(o,a.frame,r),di(o,r.lines,a.text,r),o.restore())}});var ui=Number.MIN_SAFE_INTEGER||-9007199254740991,ci=Number.MAX_SAFE_INTEGER||9007199254740991;function Pe(t,e,n){var o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}function cn(t,e){var n=ci,o=ui,r=e.origin,a,i,s,l,d;for(a=0;a<t.length;++a)i=t[a],s=i.x-r.x,l=i.y-r.y,d=e.vx*s+e.vy*l,n=Math.min(n,d),o=Math.max(o,d);return{min:n,max:o}}function Je(t,e){var n=e.x-t.x,o=e.y-t.y,r=Math.sqrt(n*n+o*o);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var Kn=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};De(Kn.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,o=e._rect;return t=Pe(t,e.center(),-e._rotation),!(t.x<o.x-n||t.y<o.y-n||t.x>o.x+o.w+n*2||t.y>o.y+o.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),o=[Je(e[0],e[1]),Je(e[0],e[3])],r,a,i;for(this._rotation!==t._rotation&&o.push(Je(n[0],n[1]),Je(n[0],n[3])),r=0;r<o.length;++r)if(a=cn(e,o[r]),i=cn(n,o[r]),a.max<i.min||i.max<a.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,o=t.center();return[Pe({x:e.x,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y+e.h},o,n),Pe({x:e.x,y:e.y+e.h},o,n)]}});function qn(t,e,n){var o=e.positioner(t,e),r=o.vx,a=o.vy;if(!r&&!a)return{x:o.x,y:o.y};var i=n.w,s=n.h,l=e.rotation,d=Math.abs(i/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),c=Math.abs(i/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),f=1/Math.max(Math.abs(r),Math.abs(a));return d*=r*f,c*=a*f,d+=e.offset*r,c+=e.offset*a,{x:o.x+d,y:o.y+c}}function fi(t,e){var n,o,r,a;for(n=t.length-1;n>=0;--n)for(r=t[n].$layout,o=n-1;o>=0&&r._visible;--o)a=t[o].$layout,a._visible&&r._box.intersects(a._box)&&e(r,a);return t}function hi(t){var e,n,o,r,a,i,s;for(e=0,n=t.length;e<n;++e)o=t[e],r=o.$layout,r._visible&&(s=new Proxy(o._el,{get:(l,d)=>l.getProps([d],!0)[d]}),a=o.geometry(),i=qn(s,o.model(),a),r._box.update(i,a,o.rotation()));return fi(t,function(l,d){var c=l._hidable,f=d._hidable;c&&f||f?d._visible=!1:c&&(l._visible=!1)})}var Ee={prepare:function(t){var e=[],n,o,r,a,i;for(n=0,r=t.length;n<r;++n)for(o=0,a=t[n].length;o<a;++o)i=t[n][o],e.push(i),i.$layout={_box:new Kn,_hidable:!1,_visible:!0,_set:n,_idx:i._index};return e.sort(function(s,l){var d=s.$layout,c=l.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(e),e},update:function(t){var e=!1,n,o,r,a,i;for(n=0,o=t.length;n<o;++n)r=t[n],a=r.model(),i=r.$layout,i._hidable=a&&a.display==="auto",i._visible=r.visible(),e|=i._hidable;e&&hi(t)},lookup:function(t,e){var n,o;for(n=t.length-1;n>=0;--n)if(o=t[n].$layout,o&&o._visible&&o._box.contains(e))return t[n];return null},draw:function(t,e){var n,o,r,a,i,s;for(n=0,o=e.length;n<o;++n)r=e[n],a=r.$layout,a._visible&&(i=r.geometry(),s=qn(r._el,r.model(),i),a._box.update(s,i,r.rotation()),r.draw(t,s))}},mi=function(t){if(Te(t))return null;var e=t,n,o,r;if(ie(t))if(!Te(t.label))e=t.label;else if(!Te(t.r))e=t.r;else for(e="",n=Object.keys(t),r=0,o=n.length;r<o;++r)e+=(r!==0?", ":"")+n[r]+": "+t[n[r]];return""+e},yi={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:mi,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},L="$datalabels",Fn="$default";function pi(t,e){var n=t.datalabels,o={},r=[],a,i;return n===!1?null:(n===!0&&(n={}),e=De({},[e,n]),a=e.labels||{},i=Object.keys(a),delete e.labels,i.length?i.forEach(function(s){a[s]&&r.push(De({},[e,a[s],{_key:s}]))}):r.push(e),o=r.reduce(function(s,l){return Uo(l.listeners||{},function(d,c){s[c]=s[c]||{},s[c][l._key||Fn]=d}),delete l.listeners,s},{}),{labels:r,listeners:o})}function Ct(t,e,n,o){if(e){var r=n.$context,a=n.$groups,i;e[a._set]&&(i=e[a._set][a._key],i&&Oe(i,[r,o])===!0&&(t[L]._dirty=!0,n.update(r)))}}function gi(t,e,n,o,r){var a,i;!n&&!o||(n?o?n!==o&&(i=a=!0):i=!0:a=!0,i&&Ct(t,e.leave,n,r),a&&Ct(t,e.enter,o,r))}function bi(t,e){var n=t[L],o=n._listeners,r,a;if(!(!o.enter&&!o.leave)){if(e.type==="mousemove")a=Ee.lookup(n._labels,e);else if(e.type!=="mouseout")return;r=n._hovered,n._hovered=a,gi(t,o,r,a,e)}}function vi(t,e){var n=t[L],o=n._listeners.click,r=o&&Ee.lookup(n._labels,e);r&&Ct(t,o,r,e)}var xi={id:"datalabels",defaults:yi,beforeInit:function(t){t[L]={_actives:[]}},beforeUpdate:function(t){var e=t[L];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var o=e.index,r=t[L],a=r._datasets[o]=[],i=t.isDatasetVisible(o),s=t.data.datasets[o],l=pi(s,n),d=e.meta.data||[],c=t.ctx,f,g,_,C,b,S,T,k;for(c.save(),f=0,_=d.length;f<_;++f)if(T=d[f],T[L]=[],i&&T&&t.getDataVisibility(f)&&!T.skip)for(g=0,C=l.labels.length;g<C;++g)b=l.labels[g],S=b._key,k=new Un(b,c,T,f),k.$groups={_set:o,_key:S||Fn},k.$context={active:!1,chart:t,dataIndex:f,dataset:s,datasetIndex:o},k.update(k.$context),T[L].push(k),a.push(k);c.restore(),De(r._listeners,l.listeners,{merger:function(D,E,p){E[D]=E[D]||{},E[D][e.index]=p[D],r._listened=!0}})},afterUpdate:function(t){t[L]._labels=Ee.prepare(t[L]._datasets)},afterDatasetsDraw:function(t){Ee.draw(t,t[L]._labels)},beforeEvent:function(t,e){if(t[L]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":bi(t,n);break;case"click":vi(t,n);break}}},afterEvent:function(t){var e=t[L],n=e._actives,o=e._actives=t.getActiveElements(),r=Ve.arrayDiff(n,o),a,i,s,l,d,c,f;for(a=0,i=r.length;a<i;++a)if(d=r[a],d[1])for(f=d[0].element[L]||[],s=0,l=f.length;s<l;++s)c=f[s],c.$context.active=d[1]===1,c.update(c.$context);(e._dirty||r.length)&&(Ee.update(e._labels),t.render()),delete e._dirty}};const wi=le({name:"PieChart",__name:"PieChart",props:{data:{},options:{}},setup(t){return Qe.register(bn,Fo,Jo,Fa),(e,n)=>(x(),Y(u(Qo),{id:"my-chart-id",options:e.options,data:e.data,plugins:[u(xi)]},null,8,["options","data","plugins"]))}}),ki={class:"text-h6 mb-4"},_i={class:"font-weight-medium"},Mi={class:"text-right"},Ci={class:"text-h6 mb-4"},Si={class:"font-weight-medium"},Ri={class:"text-right"},Pi={class:"text-h6 mb-2"},Ai={class:"d-flex flex-wrap"},Ti={class:"font-weight-medium mr-1"},Vi=le({__name:"TheCationsAndAnions",props:{remineral:{}},setup(t){const{t:e}=be(),n=t,o=$(()=>Zo(n.remineral.concentrationInChangeWater).reduce((s,l)=>s+l,0)),r=$(()=>{const s=Object.entries(n.remineral.cations).filter(([,c])=>c[0]>0);s.sort((c,f)=>f[1][0]-c[1][0]);const l=s.map(([c])=>c),d=s.map(([,c])=>c[1]);return{datasets:[{backgroundColor:["#26A69A","#ff8a65","#29B6F6","#EF5350","#AB47BC"],data:d,datalabels:{color:"white",font:{size:20},formatter:function(c,f){return l[f.dataIndex]}}}]}}),a=$(()=>{const s=Object.entries(n.remineral.anions).filter(([,c])=>c[0]>0);s.sort((c,f)=>f[1][0]-c[1][0]);const l=s.map(([c])=>c),d=s.map(([,c])=>c[1]);return{datasets:[{backgroundColor:["#26A69A","#ff8a65","#29B6F6","#EF5350","#AB47BC"],data:d,datalabels:{color:"white",font:{size:20},formatter:function(c,f){return l[f.dataIndex]}}}]}}),i=$(()=>({responsive:!0,maintainAspectRatio:!0}));return(s,l)=>{const d=wi;return x(),Y(gt,null,{default:R(()=>[w(U,{cols:"12",class:"text-h6 text-center"},{default:R(()=>[j(" TDS ~"+m(("format"in s?s.format:u(A))(s.remineral.tds))+" ppm ",1)]),_:1}),w(U,{cols:"5",sm:"2"},{default:R(()=>[y("div",ki,m(u(e)("reminerals.page.cations")),1),y("div",null,[(x(!0),M(I,null,z(s.remineral.cations,(c,f)=>(x(),M("div",{key:f,class:"d-flex justify-space-between mb-3 text-body-2"},[y("div",_i,m(f),1),y("div",Mi,[y("div",null,m(("format"in s?s.format:u(A))(c[0]*100))+"%",1),y("div",null,m(("format"in s?s.format:u(A))(c[1]))+", "+m(u(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(U,{cols:"7",sm:"4"},{default:R(()=>[w(d,{data:u(r),options:u(i)},null,8,["data","options"])]),_:1}),w(U,{cols:"5",sm:"2"},{default:R(()=>[y("div",Ci,m(u(e)("reminerals.page.anions")),1),y("div",null,[(x(!0),M(I,null,z(s.remineral.anions,(c,f)=>(x(),M("div",{key:f,class:"d-flex justify-space-between mb-3 text-body-2"},[y("div",Si,m(f),1),y("div",Ri,[y("div",null,m(("format"in s?s.format:u(A))(c[0]*100))+"%",1),y("div",null,m(("format"in s?s.format:u(A))(c[1]))+", "+m(u(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(U,{cols:"7",sm:"4"},{default:R(()=>[w(d,{data:u(a),options:u(i)},null,8,["data","options"])]),_:1}),w(U,{cols:"12"},{default:R(()=>[y("div",Pi,m(u(e)("reminerals.page.ionsTotal")),1),y("div",Ai,[(x(!0),M(I,null,z(("sortObject"in s?s.sortObject:u(hn))(s.remineral.concentrationInChangeWater),([c,f])=>(x(),M("span",{key:c,class:"mr-2"},[y("span",Ti,m(c)+":",1),y("span",null,m(("format"in s?s.format:u(A))(f/u(o)*100))+"%",1)]))),128))])]),_:1})]),_:1})}}}),Ei={key:1,class:"text-left"},Di={class:"text-left"},Ii={key:1},Oi={key:1},ji={class:"d-flex align-center mt-n4"},$i={style:{width:"40px"}},Li={style:{width:"40px"}},Wi={class:"d-flex align-center mt-n4",style:{width:"60px"}},zi=le({name:"TheRemineralsRecipesTable",__name:"TheRemineralsRecipesTable",props:{remineral:{},reagents:{}},setup(t){const{t:e}=be(),n=t,o=[{gh:1,volume:10},{gh:6,volume:10},{gh:8,volume:10}],r=W(null),a=W(null),i=W(n.remineral.changeVolume),s=$(()=>n.reagents.map(b=>b.key));function l(b,S){const T=n.remineral.gh/b,k=n.remineral.changeVolume/S,D=T*k,E={total:0};return n.reagents.forEach(p=>{E[p.key]=p.amount/D,E.total+=p.amount/D}),E}function d(b,S){return n.remineral.doseVolume*(S/n.remineral.changeVolume)*(b/n.remineral.gh)}function c(b){return n.remineral.kh/n.remineral.gh*b}function f(b){return n.remineral.gh/n.remineral.kh*b}function g(b){a.value=c(b)}function _(b){r.value=f(b)}function C(b){i.value=b}return(b,S)=>{const T=nt;return x(),Y(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[b.remineral.isDry?(x(),M(I,{key:0},[(x(!0),M(I,null,z(u(s),k=>(x(),M("th",{key:k,class:"text-left"},m(k),1))),128)),y("th",null,m(u(e)("common.total")),1)],64)):(x(),M("th",Ei,m(u(e)("reminerals.page.remineralVolume"))+", "+m(u(e)("units.ml")),1)),S[3]||(S[3]=y("th",{class:"text-left"}," Gh/Kh ",-1)),y("th",Di,m(u(e)("common.volume")),1)])]),y("tbody",null,[(x(),M(I,null,z(o,(k,D)=>y("tr",{key:D},[b.remineral.isDry?(x(),M(I,{key:0},[(x(!0),M(I,null,z(u(s),E=>(x(),M("td",{key:E},m(("format"in b?b.format:u(A))(l(k.gh,k.volume)[E]))+" "+m(u(e)("units.g")),1))),128)),y("td",null,m(("format"in b?b.format:u(A))(l(k.gh,k.volume).total))+" "+m(u(e)("units.g")),1)],64)):(x(),M("td",Ii,m(("format"in b?b.format:u(A))(d(k.gh,k.volume)))+" "+m(u(e)("units.ml")),1)),y("td",null,m(("format"in b?b.format:u(A))(k.gh))+" / "+m(("format"in b?b.format:u(A))(c(k.gh))),1),y("td",null,m(k.volume)+" "+m(u(e)("units.l")),1)])),64)),y("tr",null,[b.remineral.isDry?(x(),M(I,{key:0},[(x(!0),M(I,null,z(u(s),k=>(x(),M("td",{key:k},m(("format"in b?b.format:u(A))(l(u(r),u(i))[k]))+" "+m(u(e)("units.g")),1))),128)),y("td",null,m(("format"in b?b.format:u(A))(l(u(r),u(i)).total))+" "+m(u(e)("units.g")),1)],64)):(x(),M("td",Oi,m(("format"in b?b.format:u(A))(d(u(r),u(i))))+" "+m(u(e)("units.ml")),1)),y("td",null,[y("div",ji,[y("div",$i,[w(T,{modelValue:u(r),"onUpdate:modelValue":[S[0]||(S[0]=k=>ne(r)?r.value=k:null),g],modelModifiers:{number:!0},placeholder:"Gh",class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue"])]),S[4]||(S[4]=y("div",{class:"mx-2 align-self-end text-h5 font-weight-light"}," / ",-1)),y("div",Li,[w(T,{modelValue:u(a),"onUpdate:modelValue":[S[1]||(S[1]=k=>ne(a)?a.value=k:null),_],modelModifiers:{number:!0},placeholder:"Kh",disabled:u(a)===0,class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","disabled"])])])]),y("td",null,[y("div",Wi,[w(T,{modelValue:u(i),"onUpdate:modelValue":[S[2]||(S[2]=k=>ne(i)?i.value=k:null),C],modelModifiers:{number:!0},suffix:u(e)("units.l"),class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","suffix"])])])])])]),_:1})}}}),Bi={class:"d-flex align-end mb-2"},Hi={class:"mr-2 mb-1"},Ni={style:{width:"60px"}},Yi={class:"ml-4 mb-1"},Xi=le({name:"TheRemineralsCompoundsTable",__name:"TheRemineralsMixTable",props:{remineral:{}},setup(t){const{t:e}=be(),n=W(100);return(o,r)=>{const a=nt;return x(),M("div",null,[y("div",Bi,[y("div",Hi,m(u(e)("reminerals.page.mix.t1")),1),y("div",Ni,[w(a,{modelValue:u(n),"onUpdate:modelValue":r[0]||(r[0]=i=>ne(n)?n.value=i:null),suffix:u(e)("units.g"),"hide-details":"auto",class:"mt-0 pt-0"},null,8,["modelValue","suffix"])]),r[1]||(r[1]=j(" , ")),y("div",Yi,m(u(e)("reminerals.page.mix.t2")),1)]),w(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[(x(!0),M(I,null,z(o.remineral.reagents,i=>(x(),M("th",{key:i.key,class:"text-left"},m(i.key),1))),128))])]),y("tbody",null,[y("tr",null,[(x(!0),M(I,null,z(o.remineral.reagents,i=>(x(),M("td",{key:i.key},m(("format"in o?o.format:u(A))(i.amount/o.remineral.totalMass*u(n)))+" "+m(u(e)("units.g")),1))),128))])])]),_:1})])}}}),Jn=[{key:"kubanAquariumsGh",reagents:[{key:"CaSO4(H2O)2",amount:1.88},{key:"MgSO4(H2O)7",amount:1.28}],changeVolume:10,name:"Kuban Aquariums Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð²Ð·ÑÑ‚ Ñ youtube ÐºÐ°Ð½Ð°Ð»Ð° Kuban Aquariums (https://www.youtube.com/watch?v=KQE7l637Rd8)"},{key:"samomesGh",reagents:[{key:"CaSO4(H2O)2",amount:1.253},{key:"MgSO4(H2O)7",amount:.844}],changeVolume:10,name:"Samomes Gh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{key:"samomesGhKh",reagents:[{key:"CaCO3",amount:.708},{key:"MgSO4(H2O)7",amount:.895}],changeVolume:10,name:"Samomes Gh/Kh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{key:"samomesGhLowKh",reagents:[{key:"CaCO3",amount:.357},{key:"CaSO4(H2O)2",amount:.641},{key:"MgSO4(H2O)7",amount:.84}],changeVolume:10,name:"Samomes Gh/Kh-",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{key:"romanChe",reagents:[{key:"CaSO4(H2O)2",amount:.634},{key:"MgSO4(H2O)7",amount:.887},{key:"CaCl2",amount:.38},{key:"K2CO3",amount:.0558},{key:"NaHCO3",amount:.112}],changeVolume:10,name:"Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ"},{key:"samomesGh8Kh4",reagents:[{key:"CaCO3",amount:.714},{key:"CaSO4(H2O)2",amount:.395},{key:"MgSO4(H2O)7",amount:1.196}],changeVolume:10,name:"Samomes Gh8/Kh4",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¡ÐµÑ€ÐµÐ³Ð¸ Ð•Ñ„Ñ€ÐµÐ¼Ð¾Ð²Ð° ;)"}];Jn.sort((t,e)=>t.name.localeCompare(e.name));const Gi=[{key:"kubanAquariumsGh",name:"Kuban Aquariums Remineralizer",description:"Recipe taken from Kuban Aquariums YouTube channel (https://www.youtube.com/watch?v=KQE7l637Rd8)"},{key:"samomesGh",name:"Samomes Gh+",description:"This recipe was created and tested by the Samomes project author"},{key:"samomesGhKh",name:"Samomes Gh/Kh+",description:"This recipe was created and tested by the Samomes project author"},{key:"samomesGhLowKh",name:"Samomes Gh/Kh-",description:"This recipe was created and tested by the Samomes project author"},{key:"romanChe",name:"Roman Che Remineralizer",description:"Recipe by Roman Che"},{key:"samomesGh8Kh4",name:"Samomes Gh8/Kh4",description:"This recipe was created specifically for Serega Efremov ;)"}],Ui={class:"text-h6 text-sm-h5"},Ki={class:"text-subtitle-1"},qi={class:"text-h6 text-sm-h5"},Fi={class:"text-subtitle-1"},Ji={class:"text-body-2 text-grey-darken-1 mb-2"},Qi={key:0},Zi={class:"d-flex ml-4"},es={style:{width:"40px"}},ts={style:{width:"40px"}},ns={key:0},os=1,Ks=le({__name:"[id]",setup(t){const{t:e,locale:n}=be(),{appRoutes:o}=tr(),r=Do(),a=Io(),{required:i,positive:s}=nr(),l=or(),d=rr(),{getReagents:c}=ar(),f=[...Jn];n.value==="en"&&Gi.forEach(h=>{const v=f.find(V=>h.key===V.key);v&&(v.name=h.name,v.description=h.description)});const g=W(null),_=W([]),C=mt({}),b=mt({}),S=W({}),T=W(null),k=W(null),D=W(null),E=W(null),p=mt(new ir({name:"",description:"",reagents:[],changeVolume:10,doseVolume:10})),ut=c(os),Qn=$(()=>_.value.length>0),Zn=$(()=>_.value.some(h=>h.isLiquid)),Ot=$(()=>p.totalMass>0),jt=$(()=>Object.values(S.value).some(h=>h===!0));function Q(){Object.entries(p.ghPerReagent).forEach(([h,v])=>{C[h]=A(v)})}function Z(){Object.entries(p.khPerReagent).forEach(([h,v])=>{b[h]=A(v)})}function X(){T.value=A(p.gh)}function H(){k.value=A(p.kh)}function N(){D.value=A(p.caMgRatio)}function ct(){p.reagents.forEach(h=>{const v=_.value.find(V=>V.key===h.key);v.amount=A(h.amount)})}function eo(h){h&&(p.doseVolume=h,Q(),Z(),X(),H(),N())}function to(h){h&&(p.changeVolume=h,Q(),Z(),X(),H(),N())}Oo(_,()=>{if(!p.name&&_.value.length===1){const h=_.value[0];p.name=h.text}});function no(h){h.length>_.value.length&&typeof[...h].pop()=="string"||(_.value=h,p.reagents=[..._.value].map(v=>new Ht(v)),Q(),Z(),X(),H(),N())}function oo(h){S.value[h]=!S.value[h]}function ro(h,v){p.setReagentAmount(h,v);const V=_.value.find(ee=>ee.key===v);V.amount=h,C[v]=A(p.ghPerReagent[v]),b[v]=A(p.khPerReagent[v]),X(),H(),N()}function ao(h,v){const V=p.countReagentAmountByGh(v,h);p.setReagentAmount(V,v.key),C[v.key]=h,v.amount=A(V),b[v.key]=A(p.khPerReagent[v.key]),X(),H(),N()}function io(h,v){const V=p.countReagentAmountByKh(v,h);p.setReagentAmount(V,v.key),b[v.key]=h,v.amount=A(V),C[v.key]=A(p.ghPerReagent[v.key]),X(),H(),N()}function so(h){h&&(p.updateReagentAmountsByGh(h,S.value),T.value=h,Q(),Z(),H(),N(),ct())}function lo(h){h&&(p.updateReagentAmountsByKh(h),k.value=h,Q(),Z(),X(),N(),ct())}function uo(h){h&&(p.updateReagentAmountsByGhAndCaMgRatio(T.value,h),D.value=h,Q(),Z(),H(),ct())}function $t(h){p.name=h.name,p.description=h.description,p.changeVolume=h.changeVolume,p.doseVolume=h.doseVolume}const co=h=>{if(typeof h=="string"||h===null){E.value=h;return}_.value=[],p.reagents=[],h.reagents.forEach(({key:v,amount:V})=>{const ee=ut.find(Xe=>Xe.key===v);ee&&(ee.amount=V,_.value.push(ee),p.reagents.push(ee))}),$t(h),X(),H(),N(),Q(),Z()},{checkName:fo}=sr(),We=$(()=>r.params.id==="create"),ft=$(()=>r.params.id!=="create"),ze=$(()=>r.query.copy!==void 0),ke=$(()=>r.params.query==="share"),Be=W(!1),He=W(!1),Ne=W(!1),Ye=$(()=>+r.params.id),ho=$(()=>fo(p.name)&&!ft.value),mo=()=>!ho.value||e("reminerals.page.message.nameExists"),yo=h=>p.isLiquid&&h.amount/p.totalVolume*1e3>h.solubility,po=h=>p.isLiquid&&h.amount/p.totalVolume*1e3>h.solubility?`${e("validation.solubilityLimit")} - ${h.solubility} ${e("units.g/l")} ${e("common.for")} 25Â°Ð¡!`:"";jo(async()=>{if(We.value&&!ze.value)return;let h;if(ke.value)[h]=JSON.parse(decodeURIComponent(r.params.query));else if(ze.value){const V=r.query.copy;h=JSON.parse(JSON.stringify({...d.remineralRecipes[+V]}))}else ft.value&&(h=JSON.parse(JSON.stringify({...d.remineralRecipes[+Ye.value]})));if(Object.keys(h).length===0){await a.push(o.value.reminerals.path);return}const v={};h.reagents.forEach(V=>{v[V.key]=V}),ut.forEach(V=>{V.key in v&&(V.amount=v[V.key].amount,p.reagents.push(V),_.value.push(new Ht({...V.toJson(),amount:A(V.amount)})))}),$t(h),X(),H(),N(),Q(),Z()});async function go(){const{valid:h}=await g.value.validate();if(!h){l.showWarning(e("common.isFormErrors"));return}d.addRemineral({...p.toJson()}),l.show(e("reminerals.page.message.add")),await a.push(o.value.reminerals.path)}async function bo(){const{valid:h}=await g.value.validate();if(!h){l.showWarning(e("common.isFormErrors"));return}d.editRemineral({index:+Ye.value,remineral:{...p.toJson()}}),l.show(e("reminerals.page.message.edit")),await a.push(o.value.reminerals.path)}async function vo(){d.removeRemineral(+Ye.value),l.show(e("reminerals.page.message.remove")),await a.push(o.value.reminerals.path)}async function xo(){l.show(e("reminerals.page.message.copy")),await a.push(`${o.value.reminerals.path}create/?copy=${Ye.value}`)}return $o({title:e("meta.remineral.title")}),(h,v)=>{const V=Ro,ee=Po,Xe=Ao,_e=Vo,ht=nt,wo=fn,ko=xr,_o=Cr,Mo=Vi,Co=zi,So=Xi;return x(),Y(er,{class:"mb-12"},{default:R(()=>[w(gt,null,{default:R(()=>[w(V,{path:u(o).reminerals.path},{default:R(()=>[!u(We)&&!u(ke)?(x(),Y(Ue,{key:0,color:"primary",class:"ml-auto",size:"small",onClick:xo},{default:R(()=>[j(m(u(e)("buttons.copy")),1)]),_:1})):G("",!0)]),_:1},8,["path"]),w(ee,null,{default:R(()=>[u(We)&&!u(ze)?(x(),M(I,{key:0},[j(m(u(e)("reminerals.page.titleNew")),1)],64)):u(ze)?(x(),M(I,{key:1},[y("div",Ui,m(u(e)("reminerals.page.titleCopy"))+" "+m(u(p).name),1),y("div",Ki,m(u(e)("reminerals.page.subtitleCopy")),1)],64)):u(ke)?(x(),M(I,{key:2},[y("p",qi,m(u(e)("reminerals.page.titleShare")),1),y("p",Fi,m(u(e)("reminerals.page.subtitleShare")),1)],64)):(x(),M(I,{key:3},[j(m(u(p).name),1)],64))]),_:1}),w(U,{cols:"12",sm:"10",md:"8","offset-sm":"1","offset-md":"2"},{default:R(()=>[w(To,{ref_key:"remineralFormRef",ref:g},{default:R(()=>[y("div",Ji,m(u(e)("reminerals.page.reagentsHint")),1),w(Xe,{"model-value":u(_),items:u(ut),"item-title":"text",label:u(e)("common.reagents"),hint:u(e)("common.comboboxTypingHint"),variant:"underlined",multiple:"","persistent-hint":"","hide-details":"auto","validate-on-blur":"",chips:"","closable-chips":"",rules:[u(i)],class:"mb-2","onUpdate:modelValue":no},null,8,["model-value","items","label","hint","rules"]),w(Xe,{modelValue:u(E),"onUpdate:modelValue":[v[0]||(v[0]=P=>ne(E)?E.value=P:null),co],items:f,"item-title":"name",variant:"underlined",label:u(e)("common.recipes"),hint:u(e)("reminerals.page.recipesHint"),"persistent-hint":"","hide-details":"auto"},null,8,["modelValue","label","hint"]),w(he,null,{default:R(()=>[u(Qn)?(x(),M("div",Qi,[w(_e,{class:"mt-10 mb-3"},{default:R(()=>[j(m(u(e)("common.reagents")),1)]),_:1}),(x(!0),M(I,null,z(u(_),P=>(x(),M("div",{key:P.key,class:"d-flex align-start mb-4"},[w(ht,{"model-value":P.amount,label:P.text,suffix:P.isLiquid?u(e)("units.ml"):u(e)("units.g"),"hide-details":"auto",disabled:u(S)[P.key],rules:[u(i),u(s)],error:yo(P),"error-messages":po(P),"onUpdate:modelValue":fe=>ro(fe,P.key)},null,8,["model-value","label","suffix","disabled","rules","error","error-messages","onUpdate:modelValue"]),y("div",Zi,[y("div",es,[w(ht,{"model-value":u(C)[P.key],label:"Gh",class:"mt-0 pt-0","hide-details":"auto",disabled:u(C)[P.key]===null||u(S)[P.key],"onUpdate:modelValue":fe=>ao(fe,P)},null,8,["model-value","disabled","onUpdate:modelValue"])]),v[7]||(v[7]=y("div",{class:"mx-2 align-self-end mb-1"}," / ",-1)),y("div",ts,[w(ht,{"model-value":u(b)[P.key],label:"Kh",class:"mt-0 pt-0","hide-details":"auto",disabled:u(b)[P.key]===null||u(S)[P.key],"onUpdate:modelValue":fe=>io(fe,P)},null,8,["model-value","disabled","onUpdate:modelValue"])]),w(wo,{name:`mdi:${u(S)[P.key]?"lock":"lock-open-variant"}`,size:"24",class:"mt-3 ml-2 align-self-center mr-2 cursor-pointer text-grey-darken-1",onClick:fe=>oo(P.key)},null,8,["name","onClick"])])]))),128)),w(ko,{"change-volume":u(p).changeVolume,"dose-volume":u(p).doseVolume,gh:u(T),kh:u(k),"ca-mg-ratio":u(D),remineral:u(p),"kh-disabled":u(jt),"ca-mg-ratio-disabled":u(jt),class:"mt-4","onUpdate:changeVolume":to,"onUpdate:doseVolume":eo,"onUpdate:gh":so,"onUpdate:kh":lo,"onUpdate:caMgRatio":uo},null,8,["change-volume","dose-volume","gh","kh","ca-mg-ratio","remineral","kh-disabled","ca-mg-ratio-disabled"]),w(he,null,{default:R(()=>[u(Ot)?(x(),M("div",ns,[w(_e,{modelValue:u(Be),"onUpdate:modelValue":v[1]||(v[1]=P=>ne(Be)?Be.value=P:null),class:"mt-6 mb-4",button:""},{default:R(()=>[j(m(u(p).isLiquid?u(e)("reminerals.page.soluteConcentration"):u(e)("reminerals.page.dryConcentration")),1)]),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[u(Be)?(x(),Y(_o,{key:0,remineral:u(p),class:"mb-10"},null,8,["remineral"])):G("",!0)]),_:1}),w(_e,{class:"mt-10 mb-3"},{default:R(()=>[j(m(u(e)("reminerals.page.changeWaterConcentration")),1)]),_:1}),w(Mo,{remineral:u(p),class:"mt-4"},null,8,["remineral"]),w(_e,{modelValue:u(He),"onUpdate:modelValue":v[2]||(v[2]=P=>ne(He)?He.value=P:null),class:"mt-6 mb-4",button:""},{default:R(()=>[j(m(u(e)("reminerals.page.portionsTable")),1)]),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[u(He)?(x(),Y(Co,{key:0,remineral:u(p),reagents:u(_)},null,8,["remineral","reagents"])):G("",!0)]),_:1}),!u(p).isLiquid&&!u(Zn)?(x(),M(I,{key:0},[w(_e,{modelValue:u(Ne),"onUpdate:modelValue":v[3]||(v[3]=P=>ne(Ne)?Ne.value=P:null),class:"mt-10 mb-3",button:""},{default:R(()=>[j(m(u(e)("reminerals.page.mix.title")),1)]),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[u(Ne)?(x(),Y(So,{key:0,remineral:u(p)},null,8,["remineral"])):G("",!0)]),_:1})],64)):G("",!0)])):G("",!0)]),_:1})])):G("",!0)]),_:1}),w(he,null,{default:R(()=>[u(Ot)?(x(),Y(gt,{key:0,class:"mt-4"},{default:R(()=>[w(U,{cols:"12"},{default:R(()=>[w(dr,{modelValue:u(p).name,"onUpdate:modelValue":v[4]||(v[4]=P=>u(p).name=P),label:u(e)("reminerals.page.name"),hint:u(e)("reminerals.page.nameHint"),variant:"underlined","hide-details":"auto",rules:[u(i),mo],class:"mb-4"},null,8,["modelValue","label","hint","rules"]),w(lr,{modelValue:u(p).description,"onUpdate:modelValue":v[5]||(v[5]=P=>u(p).description=P),label:u(e)("reminerals.page.description"),hint:u(e)("reminerals.page.descriptionHint"),variant:"underlined","hide-details":"auto","auto-grow":"",rows:"1"},null,8,["modelValue","label","hint"])]),_:1}),w(U,{class:"d-flex mt-10",cols:"12"},{default:R(()=>[u(ft)&&!u(ke)?(x(),Y(Ue,{key:0,color:"error",onClick:vo},{default:R(()=>[j(m(u(e)("buttons.remove")),1)]),_:1})):G("",!0),w(Ue,{class:"ml-auto",onClick:v[6]||(v[6]=P=>h.$router.push(u(o).reminerals.path))},{default:R(()=>[j(m(u(e)("buttons.cancel")),1)]),_:1}),w(Ue,Lo({color:"primary",class:"ml-2"},Wo(u(We)||u(ke)?{click:go}:{click:bo})),{default:R(()=>[j(m(u(e)("buttons.save")),1)]),_:1},16)]),_:1})]),_:1})):G("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}});export{Ks as default};
