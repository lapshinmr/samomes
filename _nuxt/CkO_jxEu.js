import{f as c}from"./FI_hX0un.js";import{e as x,C as F,k as B,D as S,r as h,F as f,h as I,o as y,w as s,b as a,d as E,t as V,j as e,A as $,c as T,i as G,a as A,I as D,L as U}from"./CpVNxatc.js";import{u as K}from"./Ci1CSNjA.js";import{u as j}from"./VgroUGRK.js";import{R as v}from"./BRCeRKMw.js";import{a as H}from"./CC-wkvZ8.js";import{V as L}from"./DSWrAum2.js";import{V as q,a as W,b as z,c as J}from"./C4zE5Mhn.js";import{V as Q}from"./CX6Wmzx-.js";import{V as p}from"./CuZWrV3r.js";import{V as X}from"./EWcvugoL.js";import{V as _}from"./CExVc3o5.js";import{V as Y}from"./ShqC4Kwl.js";import{M as Z}from"./BL0FC99F.js";const ee={key:0,class:"mt-6"},te={class:"font-weight-medium"},oe=x({__name:"TheAddRatioPopup",props:F({concentration:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:F(["save"],["update:modelValue"]),setup(b,{emit:g}){const{t:o}=B(),l=S(b,"modelValue"),R=b,M=g,C=m=>m in R.concentration||o("popups.addRatio.elementInputError"),{required:k}=K(),N=j(),w=h(),u=h(),d=h(),t=f(()=>v.countRatio(R.concentration,u.value,d.value));async function i(){const{valid:m}=await w.value.validate();if(!m){N.showWarning(o("common.isFormErrors"));return}M("save",[u.value,d.value]),u.value=null,d.value=null,l.value=!1}return(m,n)=>(y(),I(L,{modelValue:l.value,"onUpdate:modelValue":n[3]||(n[3]=r=>l.value=r),width:"500"},{default:s(()=>[a(q,null,{default:s(()=>[a(W,null,{default:s(()=>[E(V(e(o)("popups.addRatio.title")),1)]),_:1}),a(z,null,{default:s(()=>[a(Q,{ref_key:"formRef",ref:w},{default:s(()=>[a(p,{modelValue:e(u),"onUpdate:modelValue":n[0]||(n[0]=r=>$(u)?u.value=r:null),label:e(o)("popups.addRatio.firstElementInput"),hint:e(o)("popups.addRatio.elementInputHint"),variant:"underlined",rules:[e(k),C],"persistent-hint":""},null,8,["modelValue","label","hint","rules"]),a(p,{modelValue:e(d),"onUpdate:modelValue":n[1]||(n[1]=r=>$(d)?d.value=r:null),label:e(o)("popups.addRatio.secondElementInput"),hint:e(o)("popups.addRatio.elementInputHint"),variant:"underlined",rules:[e(k),C],"persistent-hint":""},null,8,["modelValue","label","hint","rules"]),a(H,null,{default:s(()=>[e(t)!==null?(y(),T("div",ee,[E(V(e(o)("popups.addRatio.ratioIs"))+" ",1),A("span",te,V(("format"in m?m.format:e(c))(e(t))||"—"),1)])):G("",!0)]),_:1})]),_:1},512)]),_:1}),a(X),a(J,null,{default:s(()=>[a(_,{variant:"text",onClick:n[2]||(n[2]=r=>l.value=!1)},{default:s(()=>[E(V(e(o)("buttons.cancel")),1)]),_:1}),a(Y),a(_,{color:"primary",variant:"text",onClick:i},{default:s(()=>[E(V(e(o)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ae={class:"text-body-2"},ne={class:"d-flex flex-wrap ga-2"},he=x({name:"TheElementsRatios",__name:"TheElementsRatios",props:{concentration:{},isGh:{type:Boolean,default:!1}},setup(b){const{t:g}=B(),o=b,l=h(!1),R=h([]),M=f(()=>v.countRatio(o.concentration,"NO3","PO4")),C=f(()=>v.countRatio(o.concentration,"NO3","K")),k=f(()=>v.countRatio(o.concentration,"Ca","Mg")),N=f(()=>v.countRatio(o.concentration,"Fe","Mn")),w=f(()=>v.countGh(o.concentration,1/Z)),u=f(()=>R.value.map(([t,i])=>[t,i,v.countRatio(o.concentration,t,i)]));function d(t){R.value.push(t)}return(t,i)=>{const m=oe;return y(),T("div",ae,[A("div",ne,[a(p,{"model-value":("format"in t?t.format:e(c))(e(M))||"—",label:"NO3 / PO4",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(C))||"—",label:"NO3 / K",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(N))||"—",label:"Fe / Mn",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(k))||"—",label:"Ca / Mg",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),t.isGh?(y(),I(p,{key:0,"model-value":("format"in t?t.format:e(c))(e(w),2)||"—",label:"Gh",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"])):G("",!0),(y(!0),T(D,null,U(e(u),([n,r,O],P)=>(y(),I(p,{key:`${n}_${r}_${P}`,"model-value":("format"in t?t.format:e(c))(O)||"—",label:`${n} / ${r}`,variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value","label"]))),128))]),A("div",{class:"d-flex justify-end text-blue cursor-pointer text-body-1 mt-4",onClick:i[0]||(i[0]=n=>{l.value=!0})},V(e(g)("common.noRatio")),1),a(m,{modelValue:e(l),"onUpdate:modelValue":i[1]||(i[1]=n=>$(l)?l.value=n:null),concentration:o.concentration,onSave:d},null,8,["modelValue","concentration"])])}}});export{he as _};
