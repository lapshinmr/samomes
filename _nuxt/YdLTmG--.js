import{_ as yt}from"./CSN0ccd6.js";import{_ as kt}from"./BPRn4kww.js";import{b as Ke,m as bt,a as ze,V as gt,_ as Vt}from"./BhIsmgBx.js";import{V as fe,_ as ht}from"./B2iA3xbo.js";import{_ as ye}from"./qT_cHmVo.js";import{_ as Ot}from"./DXkYauMr.js";import{f as X}from"./FI_hX0un.js";import{e as de,k as ce,F as K,c as g,o as r,b as t,w as n,a as P,t as i,j as e,I as E,L as G,M as Ue,d as x,i as L,q as Oe,s as we,r as T,J as te,O as je,P as wt,v as Je,Q as le,R as Ct,S as _t,T as St,D as Ce,z as ae,h as Z,A as $,C as ie,E as Ht,f as Tt,U as Rt,V as xt,B as Pt,W as At,K as Nt,_ as Et}from"./B9yjVHhp.js";import{H as he,T as re,E as me}from"./CoDF68b2.js";import{s as Ut,A as Mt,M as se}from"./Ch8e8etN.js";import{V as $t}from"./CF6Rg3_N.js";import{R as ee}from"./BoIzNFIF.js";import{u as _e}from"./C-FN6XpU.js";import{u as Ge}from"./C3VUT424.js";import{u as Ze}from"./ZPmS5CCC.js";import{u as ke}from"./BpiIYKt7.js";import{a as ue}from"./DfdMEDEJ.js";import{V as Se}from"./CvgPKfcP.js";import{a as He,b as Te,c as Re,V as xe}from"./Dvnrs3S6.js";import{V as W,m as qt,u as It,a as Bt}from"./CiYxsnUa.js";import{d as Ft,a as Pe,e as Kt,m as Dt}from"./bZjHF0KA.js";import{f as Lt,a as Wt,s as zt}from"./B931MWyl.js";import{V as De,m as jt,a as Le,b as Jt}from"./DPDLZ6vP.js";import{u as Gt}from"./v4ejWrzP.js";import{V as ge}from"./C-lUAHu7.js";import{a as ve,V as J}from"./BGO54pi2.js";import{V as Ae}from"./B5U2yTug.js";import{V as Ne}from"./z4vBdcTo.js";import{V as Xe}from"./CvbGvI8e.js";import Zt from"./BCeORXi-.js";import{u as Xt}from"./OdCofVh_.js";import{t as Me,b as Yt}from"./BBggtmFf.js";import{V as Qt}from"./CmZMuC7Y.js";import{a as $e,V as Ve,b as ea}from"./RzHBLasl.js";import{u as ta}from"./CMfw_lOJ.js";import{u as aa}from"./C1fikGGh.js";import{F as oa}from"./CC2syBUD.js";import{u as la,V as na}from"./CTv48job.js";import"./DX1y98jA.js";import"./CU7EQSoj.js";import"./16qR0jSW.js";import"./B2vxmkWL.js";import"./CVulY7yB.js";import"./B0P29Pri.js";import"./CWH5Oz_a.js";import"./DmxjQjdZ.js";import"./EbGS9YRO.js";/* empty css        */import"./CB3ZLDFH.js";import"./D2vPiwbM.js";import"./28Dr7Nmm.js";const sa={class:"pl-0 text-center"},ua={style:{"white-space":"nowrap"}},ia={class:"pl-0 text-center"},ra={class:"font-weight-medium"},ma={class:"pl-0 text-center"},da=de({name:"TheElementsTable",__name:"TheRecipeElementsTable",props:{recipe:{}},setup(u){const{t:l}=ce(),c=u,h=K(()=>{const p={...c.recipe.concentrationPerReagent};return delete p[he],p}),M=K(()=>Ut(c.recipe.concentration)),o=K(()=>Object.keys(c.recipe.concentration).length);return(p,N)=>{const R=Ot;return r(),g("div",null,[t($t,null,{default:n(()=>[P("thead",null,[P("tr",null,[P("th",sa,i(e(l)("common.reagent")),1),(r(!0),g(E,null,G(e(M),([f],_)=>(r(),g("th",{key:f,class:Ue(["text-center",{"pr-0":_===e(o)-1}])},[P("div",ua,i(f)+", "+i(p.recipe.isLiquid?e(l)("units.g/l"):e(l)("units.g/1g")),1)],2))),128))])]),P("tbody",null,[(r(!0),g(E,null,G(e(h),(f,_)=>(r(),g("tr",{key:_},[P("td",ia,i(_),1),(r(!0),g(E,null,G(e(M),([m,d],v)=>(r(),g("td",{key:_+m,class:Ue(["text-center",{"pr-0":v===e(o)-1}])},[f[m]?(r(),g(E,{key:0},[x(i(("format"in p?p.format:e(X))(f[m]))+" ",1),f[m]/d<1?(r(),g(E,{key:0},[x(" ("+i(("format"in p?p.format:e(X))(f[m]/d*100,1))+"%) ",1)],64)):L("",!0)],64)):(r(),g(E,{key:1},[x(" — ")],64))],2))),128))]))),128)),P("tr",ra,[P("td",ma,i(e(l)("common.total")),1),(r(!0),g(E,null,G(e(M),([f,_],m)=>(r(),g("td",{key:f,class:Ue(["text-center",{"pr-0":m===e(o)-1}])},[_?(r(),g(E,{key:0},[x(i(("format"in p?p.format:e(X))(_,3)),1)],64)):(r(),g(E,{key:1},[x(" — ")],64))],2))),128))])])]),_:1}),t(R,{concentration:p.recipe.concentration,class:"mt-8"},null,8,["concentration"])])}}}),Be=Symbol.for("vuetify:v-tabs"),ca=we({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...je(qt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),qe=Oe()({name:"VTab",props:ca(),setup(u,l){let{slots:c,attrs:h}=l;const{textColorClasses:M,textColorStyles:o}=Ft(u,"sliderColor"),p=T(),N=T(),R=K(()=>u.direction==="horizontal"),f=K(()=>{var m,d;return((d=(m=p.value)==null?void 0:m.group)==null?void 0:d.isSelected.value)??!1});function _(m){var v,a;let{value:d}=m;if(d){const V=(a=(v=p.value)==null?void 0:v.$el.parentElement)==null?void 0:a.querySelector(".v-tab--selected .v-tab__slider"),H=N.value;if(!V||!H)return;const A=getComputedStyle(V).color,F=V.getBoundingClientRect(),w=H.getBoundingClientRect(),D=R.value?"x":"y",S=R.value?"X":"Y",U=R.value?"right":"bottom",B=R.value?"width":"height",z=F[D],y=w[D],b=z>y?F[U]-w[U]:F[D]-w[D],q=Math.sign(b)>0?R.value?"right":"bottom":Math.sign(b)<0?R.value?"left":"top":"center",Y=(Math.abs(b)+(Math.sign(b)<0?F[B]:w[B]))/Math.max(F[B],w[B])||0,ne=F[B]/w[B]||0,oe=1.5;Wt(H,{backgroundColor:[A,"currentcolor"],transform:[`translate${S}(${b}px) scale${S}(${ne})`,`translate${S}(${b/oe}px) scale${S}(${(Y-1)/oe+1})`,"none"],transformOrigin:Array(3).fill(q)},{duration:225,easing:zt})}}return Pe(()=>{const m=W.filterProps(u);return t(W,te({symbol:Be,ref:p,class:["v-tab",u.class],style:u.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},m,h,{block:u.fixed,maxWidth:u.fixed?300:void 0,"onGroup:selected":_}),{...c,default:()=>{var d;return t(E,null,[((d=c.default)==null?void 0:d.call(c))??u.text,!u.hideSlider&&t("div",{ref:N,class:["v-tab__slider",M.value],style:o.value},null)])}})}),Lt({},p)}}),pa=we({...je(jt(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ye=Oe()({name:"VTabsWindow",props:pa(),emits:{"update:modelValue":u=>!0},setup(u,l){let{slots:c}=l;const h=wt(Be,null),M=Je(u,"modelValue"),o=K({get(){var p;return M.value!=null||!h?M.value:(p=h.items.value.find(N=>h.selected.value.includes(N.id)))==null?void 0:p.value},set(p){M.value=p}});return Pe(()=>{const p=De.filterProps(u);return t(De,te({_as:"VTabsWindow"},p,{modelValue:o.value,"onUpdate:modelValue":N=>o.value=N,class:["v-tabs-window",u.class],style:u.style,mandatory:!1,touch:!1}),c)}),{}}}),fa=we({...Jt()},"VTabsWindowItem"),Ie=Oe()({name:"VTabsWindowItem",props:fa(),setup(u,l){let{slots:c}=l;return Pe(()=>{const h=Le.filterProps(u);return t(Le,te({_as:"VTabsWindowItem"},h,{class:["v-tabs-window-item",u.class],style:u.style}),c)}),{}}});function va(u){return u?u.map(l=>St(l)?l:{text:l,value:l}):[]}const ya=we({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...bt({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Bt(),...Dt()},"VTabs"),ka=Oe()({name:"VTabs",props:ya(),emits:{"update:modelValue":u=>!0},setup(u,l){let{attrs:c,slots:h}=l;const M=Je(u,"modelValue"),o=K(()=>va(u.items)),{densityClasses:p}=It(u),{backgroundColorClasses:N,backgroundColorStyles:R}=Kt(le(u,"bgColor")),{scopeId:f}=Gt();return Ct({VTab:{color:le(u,"color"),direction:le(u,"direction"),stacked:le(u,"stacked"),fixed:le(u,"fixedTabs"),sliderColor:le(u,"sliderColor"),hideSlider:le(u,"hideSlider")}}),Pe(()=>{const _=Ke.filterProps(u),m=!!(h.window||u.items.length>0);return t(E,null,[t(Ke,te(_,{modelValue:M.value,"onUpdate:modelValue":d=>M.value=d,class:["v-tabs",`v-tabs--${u.direction}`,`v-tabs--align-tabs-${u.alignTabs}`,{"v-tabs--fixed-tabs":u.fixedTabs,"v-tabs--grow":u.grow,"v-tabs--stacked":u.stacked},p.value,N.value,u.class],style:[{"--v-tabs-height":_t(u.height)},R.value,u.style],role:"tablist",symbol:Be},f,c),{default:()=>{var d;return[((d=h.default)==null?void 0:d.call(h))??o.value.map(v=>{var a;return((a=h.tab)==null?void 0:a.call(h,{item:v}))??t(qe,te(v,{key:v.text,value:v.value}),{default:h[`tab.${v.value}`]?()=>{var V;return(V=h[`tab.${v.value}`])==null?void 0:V.call(h,{item:v})}:void 0})})]}}),m&&t(Ye,te({modelValue:M.value,"onUpdate:modelValue":d=>M.value=d,key:"tabs-window"},f),{default:()=>{var d;return[o.value.map(v=>{var a;return((a=h.item)==null?void 0:a.call(h,{item:v}))??t(Ie,{value:v.value},{default:()=>{var V;return(V=h[`item.${v.value}`])==null?void 0:V.call(h,{item:v})}})}),(d=h.window)==null?void 0:d.call(h)]}})])}),{}}}),ba={key:0,class:"mt-4"},ga=de({__name:"TheAddReagentPopup",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(u){const l=Ce(u,"modelValue"),{required:c,positive:h}=_e(),{checkName:M}=Ge(),{t:o}=ce(),p=Ze(),N=ke(),R=T(ee.FORMULA),f=T(),_=T(),m=T(),d=T(),v=T(),a=T(),V=T(),H=T(),A=T(!1);ae(()=>v.value,()=>{A.value=!1;try{H.value=new se(v.value),isNaN(H.value.mass)&&(A.value=!0)}catch{A.value=!0}},{deep:!0});function F(y){return y?"Формула введена неправильно. Правильный формат формулы CaSO4(H2O)2 или CaSO6H4.":""}const w=T([]),D=K(()=>{const y=[];for(const b of Mt)y.push({ion:b,conc:null});return y});function S(y){y.length>w.value.length&&typeof[...y].pop()=="string"||(w.value=y)}const U=()=>!M(v.value)||o("reagents.formulaExists"),B=()=>!M(m.value)||o("reagents.nameExists");async function z(){if(R.value===ee.FORMULA){const{valid:y}=await f.value.validate();if(!y){N.showWarning(o("common.isFormErrors"));return}p.addReagent({type:ee.FORMULA,key:v.value,name:m.value,isLiquid:d.value,density:a.value,solubility:V.value}),f.value.reset()}else if(R.value===ee.COMPOUND){const{valid:y}=await _.value.validate();if(!y){N.showWarning(o("common.isFormErrors"));return}const b={};w.value.forEach(({ion:q,conc:O})=>b[q]=O/100),p.addReagent({type:ee.COMPOUND,key:m.value,name:m.value,isLiquid:d.value,ions:b}),_.value.reset()}l.value=!1}return(y,b)=>{const q=ye;return r(),Z(Se,{modelValue:l.value,"onUpdate:modelValue":b[10]||(b[10]=O=>l.value=O),width:"500"},{default:n(()=>[t(xe,null,{default:n(()=>[t(He,null,{default:n(()=>[x(i(e(o)("recipes.page.reagentPopup.title")),1)]),_:1}),t(Te,null,{default:n(()=>[t(ka,{modelValue:e(R),"onUpdate:modelValue":b[0]||(b[0]=O=>$(R)?R.value=O:null),"align-tabs":"center",color:"deep-purple-accent-4"},{default:n(()=>[t(qe,{value:("ReagentTypeName"in y?y.ReagentTypeName:e(ee)).FORMULA},{default:n(()=>[x(i(e(o)("common.formula")),1)]),_:1},8,["value"]),t(qe,{value:("ReagentTypeName"in y?y.ReagentTypeName:e(ee)).COMPOUND},{default:n(()=>[x(i(e(o)("common.compound")),1)]),_:1},8,["value"])]),_:1},8,["modelValue"]),t(Ye,{modelValue:e(R),"onUpdate:modelValue":b[8]||(b[8]=O=>$(R)?R.value=O:null)},{default:n(()=>[t(Ie,{value:("ReagentTypeName"in y?y.ReagentTypeName:e(ee)).FORMULA},{default:n(()=>[t(fe,{ref_key:"reagentFormulaFormRef",ref:f},{default:n(()=>[t(ge,{modelValue:e(v),"onUpdate:modelValue":b[1]||(b[1]=O=>$(v)?v.value=O:null),label:e(o)("recipes.page.reagentPopup.formulaInput"),variant:"underlined",error:e(A),"error-messages":F(e(A)),rules:[e(c),U],"hide-details":"auto"},null,8,["modelValue","label","error","error-messages","rules"]),e(H)!==void 0?(r(),g("div",ba,[(r(!0),g(E,null,G(Object.entries(e(H).fraction),([O,Y])=>(r(),g("span",{key:O},i(O)+": "+i(("format"in y?y.format:e(X))(Y*100))+"% ",1))),128))])):L("",!0),t(ve,{modelValue:e(d),"onUpdate:modelValue":b[2]||(b[2]=O=>$(d)?d.value=O:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto",rules:[e(c)]},{default:n(()=>[t(J,{label:e(o)("common.dry"),value:!1},null,8,["label"]),t(J,{label:e(o)("common.liquid"),value:!0,class:"ml-2"},null,8,["label"])]),_:1},8,["modelValue","rules"]),t(ue,null,{default:n(()=>[e(d)?(r(),Z(q,{key:0,modelValue:e(a),"onUpdate:modelValue":b[3]||(b[3]=O=>$(a)?a.value=O:null),suffix:e(o)("recipes.page.reagentPopup.densityUnit"),label:e(o)("recipes.page.reagentPopup.densityInput"),hint:e(o)("recipes.page.reagentPopup.densityHint"),rules:[e(c)]},null,8,["modelValue","suffix","label","hint","rules"])):L("",!0)]),_:1}),t(ge,{modelValue:e(m),"onUpdate:modelValue":b[4]||(b[4]=O=>$(m)?m.value=O:null),label:e(o)("recipes.page.reagentPopup.reagentName"),variant:"underlined",rules:[e(c),B]},null,8,["modelValue","label","rules"]),t(ue,null,{default:n(()=>[e(d)?L("",!0):(r(),Z(q,{key:0,modelValue:e(V),"onUpdate:modelValue":b[5]||(b[5]=O=>$(V)?V.value=O:null),label:e(o)("recipes.page.reagentPopup.reagentSolubilityInput"),hint:e(o)("recipes.page.reagentPopup.reagentSolubilityHint")},null,8,["modelValue","label","hint"]))]),_:1})]),_:1},512)]),_:1},8,["value"]),t(Ie,{value:("ReagentTypeName"in y?y.ReagentTypeName:e(ee)).COMPOUND},{default:n(()=>[t(fe,{ref_key:"reagentCompoundFormRef",ref:_},{default:n(()=>[t(ge,{modelValue:e(m),"onUpdate:modelValue":b[6]||(b[6]=O=>$(m)?m.value=O:null),label:e(o)("recipes.page.reagentPopup.reagentName"),variant:"underlined",rules:[e(c),B]},null,8,["modelValue","label","rules"]),t(ve,{modelValue:e(d),"onUpdate:modelValue":b[7]||(b[7]=O=>$(d)?d.value=O:null),inline:"",color:"primary",class:"ml-n2","hide-details":"auto",rules:[e(c)]},{default:n(()=>[t(J,{label:e(o)("common.dry"),value:!1},null,8,["label"]),t(J,{label:e(o)("common.liquid"),value:!0,class:"ml-2"},null,8,["label"])]),_:1},8,["modelValue","rules"]),t(ze,{"model-value":e(w),items:e(D),"item-title":"ion",variant:"underlined",label:e(o)("fertilizers.page.ionsInput"),hint:e(o)("fertilizers.page.ionsInputHint"),"persistent-hint":"","hide-details":"auto",multiple:"",chips:"","closable-chips":"",rules:[e(c)],class:"mb-4","onUpdate:modelValue":S},null,8,["model-value","items","label","hint","rules"]),(r(!0),g(E,null,G(e(w),O=>(r(),Z(q,{key:O.ion,modelValue:O.conc,"onUpdate:modelValue":Y=>O.conc=Y,label:O.ion,suffix:"%",variant:"underlined","persistent-placeholder":"",placeholder:"0","hide-details":"auto",rules:[e(c),e(h)],class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","label","rules"]))),128))]),_:1},512)]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),t(Ae),t(Re,null,{default:n(()=>[t(W,{variant:"text",onClick:b[9]||(b[9]=O=>l.value=!1)},{default:n(()=>[x(i(e(o)("buttons.close")),1)]),_:1}),t(Ne),t(W,{color:"primary",variant:"text",onClick:z},{default:n(()=>[x(i(e(o)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Va={class:"mb-4"},ha={class:"mt-4"},Oa={class:"d-flex align-center"},wa=de({name:"TheAddTrilonBPopup",__name:"TheAddTrilonBPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:l}){const c=Ce(u,"modelValue"),h=u,M=l;_e();const{t:o}=ce(),p=ke(),N=T(),R=T(0),f=T(),_=T([]);ae([_,f],()=>{let d=0;const v=new se(re).mass;_.value.forEach(a=>{const V=h.recipe.reagents.find(H=>H.key===a);V&&(d+=V.amount*v/new se(a).mass),(V==null?void 0:V.key)==="Fe2(SO4)3(H2O)9"&&(d*=2)}),f.value&&(d*=(100+f.value)/100),R.value=X(d)});async function m(){const{valid:d}=await N.value.validate();if(!d){p.showWarning(o("common.isFormErrors"));return}M("save",R.value),c.value=!1}return(d,v)=>{const a=ye;return r(),Z(Se,{modelValue:c.value,"onUpdate:modelValue":v[5]||(v[5]=V=>c.value=V),width:"500"},{default:n(()=>[t(xe,null,{default:n(()=>[t(He,null,{default:n(()=>[x(i(e(o)("recipes.page.trilonPopup.title")),1)]),_:1}),t(Te,null,{default:n(()=>[t(fe,{ref_key:"chelatorFormRef",ref:N},{default:n(()=>[P("div",Va,i(e(o)("recipes.page.trilonPopup.hint")),1),(r(!0),g(E,null,G(d.recipe.reagents,V=>(r(),g("div",{key:V.key,class:"d-flex align-center"},[["TrilonB"in d?d.TrilonB:e(re),"EDTA"in d?d.EDTA:e(me),"H2O"].includes(V.key)?L("",!0):(r(),g(E,{key:0},[t(a,{"model-value":V.amount,label:V.text,suffix:V.isLiquid?e(o)("units.ml"):e(o)("units.g"),"hide-details":"auto",class:"mb-2 mb-sm-4",readonly:""},null,8,["model-value","label","suffix"]),t(Xe,{modelValue:e(_),"onUpdate:modelValue":v[0]||(v[0]=H=>$(_)?_.value=H:null),value:V.key,class:"ml-2"},null,8,["modelValue","value"])],64))]))),128)),P("div",ha,i(e(o)("recipes.page.trilonPopup.chelatorIncrease")),1),P("div",Oa,[t(ve,{modelValue:e(f),"onUpdate:modelValue":v[1]||(v[1]=V=>$(f)?f.value=V:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:n(()=>[t(J,{label:"5%",value:5}),t(J,{label:"10%",value:10}),t(J,{label:"15%",value:15})]),_:1},8,["modelValue"]),t(a,{modelValue:e(f),"onUpdate:modelValue":v[2]||(v[2]=V=>$(f)?f.value=V:null),label:e(o)("recipes.page.trilonPopup.anotherValue"),suffix:"%","hide-details":"auto"},null,8,["modelValue","label"])]),t(a,{modelValue:e(R),"onUpdate:modelValue":v[3]||(v[3]=V=>$(R)?R.value=V:null),label:e(o)("recipes.page.trilonPopup.trilonAmount"),suffix:e(o)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10"},null,8,["modelValue","label","suffix"])]),_:1},512)]),_:1}),t(Ae),t(Re,null,{default:n(()=>[t(W,{variant:"text",onClick:v[4]||(v[4]=V=>c.value=!1)},{default:n(()=>[x(i(e(o)("buttons.cancel")),1)]),_:1}),t(Ne),t(W,{color:"primary",variant:"text",onClick:m},{default:n(()=>[x(i(e(o)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ca={class:"mb-4"},_a={class:"mt-4"},Sa={class:"d-flex align-center"},Ha={class:"mt-4 mb-6"},Ta={class:"d-flex align-center"},Ra=de({name:"TheAddEDTAPopup",__name:"TheAddEDTAPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:l}){const c=Ce(u,"modelValue"),h=u,M=l;_e();const{t:o}=ce(),p=ke(),N=T(),R=T(0),f=T(),_=T(4),m=T("KOH"),d=T(0),v=["NaOH","KOH","K2CO3"],a=T([]);ae([a,f,_,m],()=>{let H=0;const A=new se(me).mass;a.value.forEach(w=>{const D=h.recipe.reagents.find(S=>S.key===w);D&&(H+=D.amount*A/new se(w).mass),(D==null?void 0:D.key)==="Fe2(SO4)3(H2O)9"&&(H*=2)}),f.value&&(H*=(100+f.value)/100),R.value=X(H);const F=H/A;d.value=X(F*new se(m.value).mass*_.value)}),ae(m,H=>{["NaOH","KOH"].includes(H)?_.value=4:H==="K2CO3"&&(_.value=2)});async function V(){const{valid:H}=await N.value.validate();if(!H){p.showWarning(o("common.isFormErrors"));return}M("save",R.value,d.value,m.value),c.value=!1}return(H,A)=>{const F=ye;return r(),Z(Se,{modelValue:c.value,"onUpdate:modelValue":A[6]||(A[6]=w=>c.value=w),width:"500"},{default:n(()=>[t(xe,null,{default:n(()=>[t(He,null,{default:n(()=>[x(i(e(o)("recipes.page.edtaPopup.title")),1)]),_:1}),t(Te,null,{default:n(()=>[t(fe,{ref_key:"chelatorFormRef",ref:N},{default:n(()=>[P("div",Ca,i(e(o)("recipes.page.edtaPopup.hint")),1),(r(!0),g(E,null,G(H.recipe.reagents,w=>(r(),g("div",{key:w.key,class:"d-flex align-center"},[["TrilonB"in H?H.TrilonB:e(re),"EDTA"in H?H.EDTA:e(me),"H2O"].includes(w.key)?L("",!0):(r(),g(E,{key:0},[t(F,{"model-value":w.amount,label:w.text,suffix:w.isLiquid?e(o)("units.ml"):e(o)("units.g"),"hide-details":"auto",class:"mb-2 mb-sm-4",readonly:""},null,8,["model-value","label","suffix"]),t(Xe,{modelValue:e(a),"onUpdate:modelValue":A[0]||(A[0]=D=>$(a)?a.value=D:null),value:w.key,class:"ml-2"},null,8,["modelValue","value"])],64))]))),128)),P("div",_a,i(e(o)("recipes.page.edtaPopup.chelatorIncrease")),1),P("div",Sa,[t(ve,{modelValue:e(f),"onUpdate:modelValue":A[1]||(A[1]=w=>$(f)?f.value=w:null),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:n(()=>[t(J,{label:"5%",value:5}),t(J,{label:"10%",value:10}),t(J,{label:"15%",value:15})]),_:1},8,["modelValue"]),t(F,{modelValue:e(f),"onUpdate:modelValue":A[2]||(A[2]=w=>$(f)?f.value=w:null),label:e(o)("recipes.page.edtaPopup.anotherValue"),suffix:"%","hide-details":"auto"},null,8,["modelValue","label"])]),t(F,{"model-value":e(R),label:e(o)("recipes.page.edtaPopup.edtaAmount"),suffix:e(o)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10",readonly:""},null,8,["model-value","label","suffix"]),P("div",Ha,i(e(o)("recipes.page.edtaPopup.alkaliHint")),1),P("div",Ta,[t(gt,{modelValue:e(m),"onUpdate:modelValue":A[3]||(A[3]=w=>$(m)?m.value=w:null),items:v,label:e(o)("recipes.page.edtaPopup.alkaliSelect"),"hide-selected":"","hide-details":"auto",variant:"outlined",class:"w-50"},null,8,["modelValue","label"]),t(ve,{modelValue:e(_),"onUpdate:modelValue":A[4]||(A[4]=w=>$(_)?_.value=w:null),inline:"",color:"primary",class:"ml-2","hide-details":"auto"},{default:n(()=>[t(J,{label:"1",value:1}),t(J,{label:"2",value:2}),e(m)!=="K2CO3"?(r(),g(E,{key:0},[t(J,{label:"3",value:3}),t(J,{label:"4",value:4})],64)):L("",!0)]),_:1},8,["modelValue"])]),t(F,{"model-value":e(d),label:e(o)("recipes.page.edtaPopup.alkaliAmount"),suffix:e(o)("units.g"),variant:"outlined","hide-details":"auto",class:"mt-10",readonly:""},null,8,["model-value","label","suffix"])]),_:1},512)]),_:1}),t(Ae),t(Re,null,{default:n(()=>[t(W,{variant:"text",onClick:A[5]||(A[5]=w=>c.value=!1)},{default:n(()=>[x(i(e(o)("buttons.cancel")),1)]),_:1}),t(Ne),t(W,{color:"primary",variant:"text",onClick:V},{default:n(()=>[x(i(e(o)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),xa={class:"text-grey-darken-1 mb-4"},Pa={key:0},Aa={class:"font-weight-medium mb-2"},Na={class:"d-flex flex-wrap"},Ea={class:"font-weight-medium mr-1"},Ua=de({name:"TheUnitConcPopup",__name:"TheUnitConcPopup",props:ie({recipe:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:ie(["save"],["update:modelValue"]),setup(u,{emit:l}){const{t:c}=ce(),h=Xt(),M=ke(),o=Ce(u,"modelValue"),p=u,N=l,R=[he,me,re],f=T({}),_=T({}),m=T(),d=h.tankModels.map(S=>S.toJson()),v=K(()=>p.recipe.reagents.filter(S=>!R.includes(S.key))),a=K(()=>v.value.length>0);ae(o,S=>{S&&p.recipe.tankVolume&&(m.value={name:p.recipe.tankVolume.toString(),volume:p.recipe.tankVolume})}),ae(m,()=>{f.value=p.recipe.countRecipeUnitConcsByAmounts()});const V=K(()=>p.recipe.countRecipeIonUnitConcs(f.value)),H=K(()=>{const S=Me(V.value);return S.sort((U,B)=>B[1]-U[1]),S}),A=K(()=>Yt(V.value).reduce((S,U)=>S+U,0));function F(S){typeof S=="number"?(m.value={name:S.toString(),volume:S},p.recipe.tankVolume=+S):(m.value=S,p.recipe.tankVolume=S.volumeTotal),p.recipe.countRecipeUnitConcsByAmounts()}function w(S,U,B){const z=p.recipe.countReagentAmountByUnitConc(S,U,B);_.value[U.key]=z,Me(U.ions).forEach(([y,b])=>{const q=U.density??1;(B===""||B!==y)&&(f.value[U.key][y]=X(z/p.recipe.totalVolume/m.value.volume*b*1e3*q))})}async function D(){N("save",_.value),o.value=!1,M.show("Новые значения масс реагентов сохранены")}return(S,U)=>{const B=Zt,z=ye;return r(),Z(Se,{modelValue:o.value,"onUpdate:modelValue":U[2]||(U[2]=y=>o.value=y),width:"500"},{default:n(()=>[t(xe,null,{default:n(()=>[t(He,null,{default:n(()=>[x(i(e(c)("recipes.page.unitConcPopup.title")),1)]),_:1}),t(Te,null,{default:n(()=>[P("div",xa,[x(i(e(c)("recipes.page.unitConcPopup.hint"))+" ",1),t(Qt,{location:"bottom","max-width":"400","open-on-click":"","open-on-hover":""},{activator:n(({props:y})=>[t(B,te({name:"mdi-help-circle-outline",size:"18"},y),null,16)]),default:n(()=>[x(" "+i(e(c)("recipes.page.unitConcDescription")),1)]),_:1})]),t(ze,{modelValue:e(m),"onUpdate:modelValue":[U[0]||(U[0]=y=>$(m)?m.value=y:null),F],modelModifiers:{number:!0},items:e(d),"item-title":"name",variant:"underlined",label:e(c)("recipes.page.tankInputLabel"),"persistent-hint":"","hide-selected":"",suffix:e(c)("units.l")},null,8,["modelValue","items","label","suffix"]),t(ue,null,{default:n(()=>[S.recipe.tankVolume?(r(),g("div",Pa,[(r(!0),g(E,null,G(e(v),y=>(r(),Z($e,{key:y.key,class:"mb-3"},{default:n(()=>[t(Ve,{cols:"12",class:"font-weight-regular pb-1"},{default:n(()=>[x(i(y.text),1)]),_:2},1024),(r(!0),g(E,null,G(y.ions,(b,q)=>(r(),Z(Ve,{key:y.key+q,cols:y.ionsTotal>=2?"6":"",sm:y.ionsTotal>3?"4":"",class:"py-0"},{default:n(()=>[t(z,{modelValue:e(f)[y.key][q],"onUpdate:modelValue":[O=>e(f)[y.key][q]=O,O=>w(O,y,q)],modelModifiers:{number:!0},label:q,suffix:e(c)("units.mg/l / ml"),"hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","label","suffix"])]),_:2},1032,["cols","sm"]))),128))]),_:2},1024))),128)),e(a)?(r(),Z($e,{key:0},{default:n(()=>[t(Ve,{cols:"12"},{default:n(()=>[P("div",Aa,i(e(c)("common.total"))+", "+i(e(c)("units.mg/l / ml"))+": ",1),P("div",Na,[(r(!0),g(E,null,G(e(H),([y,b])=>(r(),g("div",{key:y,class:"d-flex justify-space-between mr-2"},[P("div",Ea,i(y)+":",1),P("div",null,i(("format"in S?S.format:e(X))(b))+" ("+i(("format"in S?S.format:e(X))(b/e(A)*100))+"%) ",1)]))),128))])]),_:1})]),_:1})):L("",!0)])):L("",!0)]),_:1})]),_:1}),t(Ae),t(Re,null,{default:n(()=>[t(W,{variant:"text",onClick:U[1]||(U[1]=y=>o.value=!1)},{default:n(()=>[x(i(e(c)("buttons.close")),1)]),_:1}),t(Ne),t(W,{color:"primary",variant:"text",onClick:D},{default:n(()=>[x(i(e(c)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Qe=[{name:"Kuban Aquariums Нитрат",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:49.71},{key:"(NH2)2CO",amount:5.02},{key:"NH4NO3",amount:6.71},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Фосфат",reagents:[{key:"H2O",amount:1e3},{key:"KH2PO4",amount:7.01},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Калий",reagents:[{key:"H2O",amount:1e3},{key:"K2SO4",amount:84.76},{key:"C6H7KO2",amount:.5}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Kuban Aquariums Микро",reagents:[{key:"H2O",amount:1e3},{key:"AgroMicsT",amount:11},{key:"Fe-EDTA13",amount:5.6},{key:"MgSO4(H2O)7",amount:30},{key:"K2SO4",amount:20},{key:"H3BO3",amount:.7},{key:"C6H8O6",amount:.1},{key:"C6H7KO2",amount:.5},{key:"C10H14N2Na2O8(H2O)2",amount:3}],tankVolume:100,description:"Рецепт взят с youtube канала Kuban Aquariums (https://www.youtube.com/watch?v=Vyq-R0tv384)"},{name:"Aqua Botanic Нитрат",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:82.88}],tankVolume:100,description:"Чистая калиевая селитра. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Нитрат+",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:49.71},{key:"(NH2)2CO",amount:5.02},{key:"NH4NO3",amount:6.71}],tankVolume:100,description:"Калиевая селитра, разбавленная мочевиной и нитратом аммония. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Фосфат",reagents:[{key:"H2O",amount:1e3},{key:"KH2PO4",amount:7.01}],tankVolume:100,description:"Чистый монофосфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Калий",reagents:[{key:"H2O",amount:1e3},{key:"K2SO4",amount:84.76}],tankVolume:100,description:"Чистый сульфат калия. Рецепт взят с сайта aqua-botanic.ru(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html)"},{name:"Aqua Botanic Микро",reagents:[{key:"H2O",amount:968},{key:"C6H8O7",amount:30},{key:"FeSO4(H2O)7",amount:10},{key:"MnSO4(H2O)5",amount:.5},{key:"CuSO4(H2O)5",amount:.05},{key:"ZnSO4(H2O)7",amount:.6},{key:"MgSO4(H2O)7",amount:10.54},{key:"H3BO3",amount:.3},{key:"K2SO4",amount:8.6},{key:"C63H88CoN14O14P",amount:.001},{key:"Citovit",amount:6},{key:"Ferovit",amount:6},{key:"H2SO4",amount:20}],tankVolume:100,description:`Рецепт взят с сайта aqua-botanic.ru
(https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html):

С помощью мерного стакана отмеряем 700 мл дистиллированной воды или воды из фильтра с обратным осмосом.
Воду предварительно кипятим и растворяем

* Лимонную кислоту 30 грамм
* Сульфат железа - 10 грамм
* Сульфат марганца - 0.5 грамм
* Сульфат меди - 0.05 грамм
* Сульфат цинка - 0.6 грамм
* Сульфат магния - 10.54 грамма
* сделать паузу в 1 час.
* Борная кислота - 0.3 грамма
* Сульфат калия - 8.6 грамма
* Цитовит 4 ампулы
* Феровит - 4 ампулы
* Витамин B12 2 ампулы
* Серная кислота - 20 мл.

Важно! Можно вливать только кислоту в воду, а не наоборот.
При желании, серную кислоту можно заменить на Сайдекс (2.5% раствор глутарового альдегида) в
количестве 200-250 мл. Долить воду в раствор с удобрением до отметки 1 литр. Воду можно не кипятить.

Растворять каждый последующий реактив можно только после того, как полностью растворится предыдущий.`},{name:"NPK Amania.org 1:15",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:106.45},{key:"KH2PO4",amount:5.77}],tankVolume:100,description:"Макро в соотношении 1 к 15. Рецепт взят с сайта amania.org"},{name:"NPK Amania.org 1:15 + амидный азот",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:53.6},{key:"(NH2)2CO",amount:16},{key:"KH2PO4",amount:5.77}],tankVolume:100,description:"Макро в соотношении 1 к 15. Калиевая селитра в соотношении 50 на 50 с мочевиной. Рецепт взят с сайта amania.org"},{name:"Удо Ермолаева. МИКРО",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"Fe2(SO4)3(H2O)9",amount:1.45},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C10H14N2Na2O8(H2O)2",amount:2.5}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (gh < 7)",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"Fe2(SO4)3(H2O)9",amount:1.45},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C10H14N2Na2O8(H2O)2",amount:1.75}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Удо Ермолаева. МИКРО (Железный купорос)",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:7.45},{key:"MgSO4(H2O)7",amount:16.4},{key:"FeSO4(H2O)7",amount:1.44},{key:"CuSO4(H2O)5",amount:.1},{key:"ZnSO4(H2O)7",amount:.04},{key:"H3BO3",amount:.1},{key:"(NH4)2MoO4",amount:.04},{key:"MnSO4(H2O)5",amount:.73},{key:"C14H18N3O10Na2Fe",amount:1},{key:"C10H14N2Na2O8(H2O)2",amount:1.75}],tankVolume:100,description:"Микро. Рецепт - https://aquascape-promotion.com/udobreniya-svoimi-rukami"},{name:"Pps-pro Macro",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:29.3},{key:"KNO3",amount:32.6},{key:"KH2PO4",amount:2.9},{key:"MgSO4(H2O)7",amount:20.2}],description:"Рецепт взят с сайта https://sites.google.com/site/aquaticplantfertilizer/pps-pro. Методика там же"},{name:"Pps-pro Micro",reagents:[{key:"H2O",amount:500},{key:"PlantexCMM",amount:28.6}],description:"Рецепт взят с сайта https://sites.google.com/site/aquaticplantfertilizer/pps-pro. Методика там же"},{name:"PMDD CMM",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:33},{key:"KNO3",amount:15},{key:"MgSO4(H2O)7",amount:15},{key:"PlantexCMM",amount:9.93}],description:"http://www.amania.org/Tech/liqfert-mikom.html"},{name:"PMDD CSM + B",reagents:[{key:"H2O",amount:500},{key:"K2SO4",amount:33},{key:"KNO3",amount:15},{key:"MgSO4(H2O)7",amount:15},{key:"H3BO3",amount:.714},{key:"PlantexCSM",amount:9.93}],description:"http://www.amania.org/Tech/liqfert-mikom.html"},{name:"Удар Макро",reagents:[{key:"H2O",amount:1e3},{key:"KNO3",amount:82},{key:"KH2PO4",amount:7},{key:"C6H7KO2",amount:.5}],description:"Это удобрение от Юрия Христенко (https://www.youtube.com/@Echinodorus)"},{name:"Удар Микро",reagents:[{key:"H2O",amount:1e3},{key:"AgroMicsT",amount:11},{key:"Fe-EDTA13",amount:5.6},{key:"K2SO4",amount:20},{key:"MgSO4(H2O)7",amount:30},{key:"H3BO3",amount:.7},{key:"C6H8O6",amount:3},{key:"C6H7KO2",amount:.5},{key:"C10H14N2Na2O8(H2O)2",amount:3}],description:"Это удобрение от Юрия Христенко (https://www.youtube.com/@Echinodorus)"}];Qe.sort((u,l)=>u.name.localeCompare(l.name));const Ma={class:"text-h6 text-sm-h5"},$a={class:"text-subtitle-1"},qa={class:"text-h6 text-md-h5"},Ia={class:"text-subtitle-1"},Ba={class:"text-body-2 text-grey-darken-1 mb-2"},Fa={key:0},Ka={key:0,class:"text-grey-darken-1 mt-6 mb-4"},Da={class:"mt-2 mt-sm-4 text-body-2"},La={key:0},Wa={key:0,style:{width:"100px"}},za={key:0,class:"d-flex justify-end mt-4"},ja={key:0,class:"mt-8"},Ja={key:1},Ga={class:"d-flex mt-10"},We=0,Za=de({__name:"[id]",setup(u){const{t:l}=ce(),{appRoutes:c}=ta(),{required:h,positive:M}=_e(),o=xt(),p=Rt(),N=ke(),R=Ze(),f=aa(),{getReagents:_}=Ge();let m=_(We);const d=T(null),v=T(null),a=Ht(new oa({name:"",description:"",tankVolume:null,reagents:[]}));ae(()=>a.reagents,()=>{if(!a.name&&a.reagents.length>1){const s=a.reagents[1];a.name=s.text}}),ae(()=>R.reagents,()=>{m=_(We)},{deep:!0});function V(s){s.length>a.reagents.length&&typeof[...s].pop()=="string"||(a.reagents=s)}function H(s){a.name=s.name,a.description=s.description,a.tankVolume=s.tankVolume}const A=s=>{typeof s=="string"||s===null||(v.value=s,a.reagents=[],s.reagents.forEach(({key:k,amount:I})=>{const j=m.find(Q=>Q.key===k);j&&(j.amount=I,a.reagents.push(j))}),H(s))};function F(s,k){k.amount=s,a.setReagentAmount(s,k.key)}function w(s,k){k.dilution=s}function D(s){const k=s-(a.totalVolume-a.waterVolume);a.setReagentAmount(k,"H2O")}const{checkName:S}=la(),U=T(!1),B=f.fertilizerRecipeModels,z=K(()=>p.params.id==="create"),y=K(()=>p.params.id!=="create"),b=K(()=>p.query.copy!==void 0),q=K(()=>p.query.share!==void 0),O=K(()=>+p.params.id),Y=T(!1),ne=T(!1),oe=T(!1),be=T(!1),et=K(()=>S(a.name)&&!y.value),tt=()=>!et.value||l("recipes.page.nameExists"),at=s=>a.isLiquid&&s.amount/a.totalVolume*1e3>s.solubility,ot=s=>a.isLiquid&&s.amount/a.totalVolume*1e3>s.solubility?`${l("validation.solubilityLimit")} - ${s.solubility} ${l("units.g/l")} ${l("common.for")} 25°С!`:"";if(z.value){const s=m.find(k=>k.key===he);s.amount=500,a.reagents.push(s)}Tt(async()=>{if(z.value&&!b.value)return;let s;if(q.value)[s]=JSON.parse(decodeURIComponent(p.query.share));else if(b.value){const I=p.query.copy;s=JSON.parse(JSON.stringify({...B[+I]}))}else z.value||(s=JSON.parse(JSON.stringify({...B[O.value]})));if(Object.keys(s).length===0){await o.push(c.value.recipes.path);return}const k={};s.reagents.forEach(I=>{k[I.key]=I}),m.forEach(I=>{I.key in k&&(I.amount=k[I.key].amount,I.dilution=k[I.key].dilution,a.reagents.push(I))}),H(s)});async function lt(){const{valid:s}=await d.value.validate();if(!s){N.showWarning(l("common.isFormErrors"));return}f.addRecipe({...a.toJson()}),N.show(l("recipes.page.message.recipeAdded")),await o.push(c.value.recipes.path)}async function nt(){const{valid:s}=await d.value.validate();if(!s){N.showWarning(l("common.isFormErrors"));return}f.editRecipe({index:O.value,recipe:a.toJson()}),N.show(l("recipes.page.message.recipeEdited")),await o.push(c.value.recipes.path)}async function st(){f.removeRecipe(O.value),N.show(l("recipes.page.message.recipeRemoved")),await o.push(c.value.recipes.path)}async function ut(){N.show(l("recipes.page.message.recipeCopied")),await o.push(`${c.value.recipes.path}create/?copy=${O.value}`)}function it(s){a.setReagentAmount(s,re)}function rt(s,k,I){a.setReagentAmount(s,me);let j=a.reagents.find(Q=>Q.key===I);j?j.amount=k:(j=m.find(Q=>Q.key===I),j.amount=k,a.reagents.push(j))}function mt(s){Me(s).forEach(([k,I])=>{const j=a.reagents.find(Q=>Q.key===k);j.isLiquid&&a.correctWaterVolumeByReagentAmount(X(I),j.amount),a.setReagentAmount(X(I),k)})}return Pt({title:l("meta.recipe.title")}),(s,k)=>{const I=yt,j=kt,Q=Vt,Fe=ht,Ee=ye,dt=da,ct=ga,pt=wa,ft=Ra,vt=Ua;return r(),Z(ea,{class:"mb-12"},{default:n(()=>[t($e,null,{default:n(()=>[t(I,{path:e(c).recipes.path},{default:n(()=>[!e(z)&&!e(q)?(r(),Z(W,{key:0,color:"primary",class:"ml-auto",size:"small",onClick:ut},{default:n(()=>[x(i(e(l)("buttons.copy")),1)]),_:1})):L("",!0)]),_:1},8,["path"]),t(j,null,{default:n(()=>[e(z)&&!e(b)?(r(),g(E,{key:0},[x(i(e(l)("recipes.page.titleNew")),1)],64)):e(b)?(r(),g(E,{key:1},[P("div",Ma,i(e(l)("recipes.page.titleCopy"))+" "+i(e(a).name),1),P("div",$a,i(e(l)("recipes.page.subtitleCopy")),1)],64)):e(q)?(r(),g(E,{key:2},[P("p",qa,i(e(l)("recipes.page.titleShare")),1),P("p",Ia,i(e(l)("recipes.page.subtitleShare")),1)],64)):(r(),g(E,{key:3},[x(i(e(a).name),1)],64))]),_:1}),t(Ve,{cols:"12",md:"8","offset-md":"2"},{default:n(()=>[t(fe,{ref_key:"recipeFormRef",ref:d},{default:n(()=>[P("div",Ba,i(e(a).isWater?e(l)("recipes.page.reagentsHintWater"):e(l)("recipes.page.reagentsHint")),1),t(Q,{"model-value":e(a).reagents,items:e(m),"item-title":"text",variant:"underlined",multiple:"",label:e(l)("common.reagents"),hint:e(l)("common.comboboxTypingHint"),"persistent-hint":"",chips:"","closable-chips":"","hide-details":"auto",class:"mb-2","onUpdate:modelValue":V},null,8,["model-value","items","label","hint"]),P("div",{class:"d-flex justify-end text-blue cursor-pointer",onClick:k[0]||(k[0]=C=>{Y.value=!0})},i(e(l)("recipes.page.noReagent")),1),t(Q,{modelValue:e(v),"onUpdate:modelValue":[k[1]||(k[1]=C=>$(v)?v.value=C:null),A],items:"FERTILIZER_RECIPES"in s?s.FERTILIZER_RECIPES:e(Qe),"item-title":"name",variant:"underlined",label:e(l)("common.recipes"),hint:e(l)("recipes.page.recipesHint"),"persistent-hint":"","hide-selected":"","hide-details":"auto"},null,8,["modelValue","items","label","hint"]),e(a).isReagents?(r(),g("div",Fa,[t(Fe,{modelValue:e(U),"onUpdate:modelValue":k[2]||(k[2]=C=>$(U)?U.value=C:null),button:"",class:"mt-10 mb-4"},{default:n(()=>[x(i(e(l)("common.reagents")),1)]),_:1},8,["modelValue"]),t(ue,null,{default:n(()=>[e(U)?(r(),g("div",Ka,[(r(!0),g(E,null,G(e(a).reagents,C=>(r(),g("div",{key:C.key,class:"d-flex flex-column flex-sm-row justify-space-between align-sm-center text-body-1 mb-2 mb-sm-0 text-body-2"},[P("div",null,i(C.text),1),P("div",null,i(C.percent),1)]))),128)),P("div",Da,i(e(l)("recipes.page.reagentsDescription")),1)])):L("",!0)]),_:1})])):L("",!0),t(ue,null,{default:n(()=>[e(a).isReagents?(r(),g("div",La,[(r(!0),g(E,null,G(e(a).reagents,C=>(r(),g("div",{key:C.key,class:"d-flex align-center mb-2"},[t(Ee,{"model-value":C.amount,label:C.text,suffix:C.isLiquid?e(l)("units.ml"):e(l)("units.g"),"hide-details":"auto",rules:[e(h),e(M)],error:at(C),"error-messages":ot(C),"onUpdate:modelValue":pe=>F(pe,C)},At({_:2},[C.key===("TrilonB"in s?s.TrilonB:e(re))?{name:"append",fn:n(()=>[t(W,{color:"primary",size:"small",onClick:k[3]||(k[3]=pe=>{ne.value=!0})},{default:n(()=>[x(i(e(l)("buttons.calculate")),1)]),_:1})]),key:"0"}:C.key===("EDTA"in s?s.EDTA:e(me))?{name:"append",fn:n(()=>[t(W,{color:"primary",size:"small",onClick:k[4]||(k[4]=pe=>{oe.value=!0})},{default:n(()=>[x(i(e(l)("buttons.calculate")),1)]),_:1})]),key:"1"}:void 0]),1032,["model-value","label","suffix","rules","error","error-messages","onUpdate:modelValue"]),C.isLiquid&&C.key!==("H2O"in s?s.H2O:e(he))&&C.type!==("ReagentTypeName"in s?s.ReagentTypeName:e(ee)).COMPOUND?(r(),g("div",Wa,[t(Ee,{"model-value":C.dilution,label:e(l)("recipes.page.dilution"),suffix:"%",class:"ml-2","hide-details":"auto","onUpdate:modelValue":pe=>w(pe,C)},null,8,["model-value","label","onUpdate:modelValue"])])):L("",!0)]))),128)),e(a).isLiquid?(r(),g("div",za,[t(W,{color:"primary",size:"small",onClick:k[5]||(k[5]=C=>{be.value=!0})},{default:n(()=>[x(i(e(l)("recipes.page.calculateReagentMass")),1)]),_:1})])):L("",!0),t(ue,null,{default:n(()=>[e(a).isSeveralLiquidReagents?(r(),g("div",ja,[t(Ee,{"model-value":e(a).totalVolume,label:e(l)("recipes.page.totalVolume"),suffix:e(l)("units.ml"),variant:"outlined",hint:e(a).isSeveralLiquidReagents?e(l)("recipes.page.totalVolumeHint"):"","persistent-hint":"auto",class:"mt-4","onUpdate:modelValue":D},null,8,["model-value","label","suffix","hint"])])):L("",!0)]),_:1})])):L("",!0)]),_:1}),e(a).isNotOnlyWaterReagent?(r(),g("div",Ja,[t(Fe,{class:"mt-10 mb-4"},{default:n(()=>[x(i(e(l)("recipes.page.fertilizerConc")),1)]),_:1}),t(dt,{recipe:e(a),class:"mb-10"},null,8,["recipe"]),t(ge,{modelValue:e(a).name,"onUpdate:modelValue":k[6]||(k[6]=C=>e(a).name=C),variant:"underlined",label:e(l)("recipes.page.name"),hint:e(l)("recipes.page.nameHint"),"hide-details":"auto",class:"mb-2 mb-sm-4",rules:[e(h),tt]},null,8,["modelValue","label","hint","rules"]),t(na,{modelValue:e(a).description,"onUpdate:modelValue":k[7]||(k[7]=C=>e(a).description=C),variant:"underlined",label:e(l)("recipes.page.description"),"hide-details":"auto","auto-grow":"",rows:"1",hint:e(l)("recipes.page.descriptionHint")},null,8,["modelValue","label","hint"]),P("div",Ga,[!e(z)&&!e(q)?(r(),Z(W,{key:0,color:"error",onClick:st},{default:n(()=>[x(i(e(l)("buttons.remove")),1)]),_:1})):L("",!0),t(W,{class:"ml-auto",onClick:k[8]||(k[8]=C=>s.$router.push(e(c).recipes.path))},{default:n(()=>[x(i(e(l)("buttons.cancel")),1)]),_:1}),t(W,te({color:"primary",class:"ml-2"},Nt(e(z)||e(q)?{click:lt}:{click:nt})),{default:n(()=>[x(i(e(l)("buttons.save")),1)]),_:1},16)])])):L("",!0)]),_:1},512)]),_:1})]),_:1}),t(ct,{modelValue:e(Y),"onUpdate:modelValue":k[9]||(k[9]=C=>$(Y)?Y.value=C:null)},null,8,["modelValue"]),t(pt,{modelValue:e(ne),"onUpdate:modelValue":k[10]||(k[10]=C=>$(ne)?ne.value=C:null),recipe:e(a),onSave:it},null,8,["modelValue","recipe"]),t(ft,{modelValue:e(oe),"onUpdate:modelValue":k[11]||(k[11]=C=>$(oe)?oe.value=C:null),recipe:e(a),onSave:rt},null,8,["modelValue","recipe"]),t(vt,{modelValue:e(be),"onUpdate:modelValue":k[12]||(k[12]=C=>$(be)?be.value=C:null),recipe:e(a),onSave:mt},null,8,["modelValue","recipe"])]),_:1})}}}),Go=Et(Za,[["__scopeId","data-v-11b1d24d"]]);export{Go as default};
