import{_ as Mo}from"./BVLof5m_.js";import{_ as So}from"./Cm755wyf.js";import{_ as Co}from"./C6M6_dFW.js";import{V as Ro,_ as Po}from"./DDqfE7fI.js";import{_ as nt}from"./C_zTs1Z2.js";import Ao from"./B1q7paHM.js";import{f as A}from"./FI_hX0un.js";import{e as le,C as To,k as ge,D as Me,c as _,o as v,a as y,d as O,t as x,j as c,b as w,F as j,w as R,I as D,L as W,M as $t,h as X,r as L,A as ne,G as Vo,H as Eo,E as ht,z as Do,f as Io,B as Oo,i as U,J as jo,K as $o}from"./CPabbfrG.js";import{s as cn}from"./BXpKWP0_.js";import{V as St}from"./B16J0bwJ.js";import{i as ie,f as pe,C as Qe,E as de,t as J,g as Ct,h as q,j as Ie,k as H,l as Lo,u as Wo,m as me,R as fn,n as zo,o as Ho,D as No,A as Bo,v as ye,q as hn,r as Oe,Q as Se,H as Ue,T as Lt,s as mn,w as Xo,x as Wt,y as Ze,z as zt,B as yn,F as De,G as Te,I as Yo,J as I,K as pn,P as Uo,M as Go,a as Fo,b as qo,N as Ko}from"./DW6pAsiN.js";import{a as pt,V as G,b as Jo}from"./_jEhrEot.js";import{u as Qo}from"./Dnq6Zlx_.js";import{u as Zo}from"./BleCdpuH.js";import{u as er}from"./CfOnZD1U.js";import{u as tr}from"./rnSZmKAG.js";import{u as nr}from"./EgPiOZOh.js";import{R as or}from"./BRCeRKMw.js";import{R as Ht}from"./BL0FC99F.js";import{u as rr,V as ar}from"./B5h0vf-N.js";import{a as he}from"./81WbUXLR.js";import{V as Ge}from"./D5tl2z6m.js";import{V as ir}from"./BepgMQe7.js";import"./B931MWyl.js";import"./DJCRK7CK.js";import"./AWOycWIW.js";import"./7gIdKzNg.js";import"./D0IulFyo.js";import"./DjacT3cQ.js";import"./GV1W1iWC.js";import"./81gvhX0P.js";import"./U8q07F0Q.js";import"./BinJlNjn.js";import"./C_KzYpfI.js";import"./Be1_qMtx.js";import"./BBggtmFf.js";/* empty css        */import"./rn75S15O.js";import"./BoIzNFIF.js";import"./DIIw9gwp.js";import"./DjjMRDDF.js";import"./BE8Domux.js";import"./CYc57goH.js";const sr={key:0,class:"d-flex mb-4"},lr={class:"mx-2 align-self-end mb-1"},dr={class:"font-weight-medium"},ur={style:{width:"60px"}},cr={key:1,class:"d-flex mb-4"},fr={style:{width:"80px"}},hr={class:"mx-3 align-self-end mb-1"},mr={style:{width:"60px"}},yr={class:"d-flex"},pr=le({__name:"TheHardnessTable",props:To({remineral:{},khDisabled:{type:Boolean,default:!1},caMgRatioDisabled:{type:Boolean,default:!1}},{changeVolume:{},changeVolumeModifiers:{},doseVolume:{},doseVolumeModifiers:{},gh:{},ghModifiers:{},kh:{},khModifiers:{},caMgRatio:{},caMgRatioModifiers:{}}),emits:["update:changeVolume","update:doseVolume","update:gh","update:kh","update:caMgRatio"],setup(t){const{t:e}=ge(),n=Me(t,"changeVolume"),o=Me(t,"doseVolume"),r=Me(t,"gh"),a=Me(t,"kh"),i=Me(t,"caMgRatio");return(s,l)=>{const d=nt;return v(),_("div",null,[s.remineral.isDry?(v(),_("div",sr,[y("div",lr,[y("span",dr,x(("format"in s?s.format:c(A))(s.remineral.totalMass))+" "+x(c(e)("units.g")),1),O(" "+x(c(e)("reminerals.page.explanation.dry")),1)]),y("div",ur,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),suffix:c(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])):(v(),_("div",cr,[y("div",fr,[w(d,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=u=>o.value=u),suffix:c(e)("units.ml"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])]),y("div",hr,x(c(e)("reminerals.page.explanation.liquid")),1),y("div",mr,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=u=>n.value=u),suffix:c(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])),y("div",yr,[w(d,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=u=>r.value=u),label:"Gh",suffix:"Gh",variant:"outlined","hide-details":"auto","persistent-hint":"",class:"mb-2",disabled:r.value===null},null,8,["modelValue","disabled"]),w(d,{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=u=>a.value=u),label:"Kh",suffix:"Kh",variant:"outlined","hide-details":"auto","persistent-hint":"",class:"mb-2 ml-2",disabled:a.value===null||s.khDisabled},null,8,["modelValue","disabled"]),w(d,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=u=>i.value=u),label:"Ca / Mg",variant:"outlined","hide-details":"auto","persistent-hint":"",class:"mb-2 ml-2",disabled:i.value===null||s.caMgRatioDisabled},null,8,["modelValue","disabled"])])])}}}),br={class:"pl-0 text-center"},gr={style:{"white-space":"nowrap"}},vr={class:"font-weight-medium"},xr={class:"pl-0 text-center"},wr=le({name:"TheSoluteElementsTable",__name:"TheSoluteElementsTable",props:{remineral:{}},setup(t){const{t:e}=ge(),n=t,o=j(()=>cn(n.remineral.concentrationWithoutHCO3)),r=j(()=>Object.keys(n.remineral.concentrationWithoutHCO3).length);return(a,i)=>(v(),_("div",null,[w(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[y("th",br,x(c(e)("common.element")),1),(v(!0),_(D,null,W(c(o),([s],l)=>(v(),_("th",{key:s,class:$t(["text-center",{"pr-0":l===c(r)-1}])},[y("div",gr,x(s)+", "+x(a.remineral.isLiquid?c(e)("units.g/l"):c(e)("units.g/1g")),1)],2))),128))])]),y("tbody",null,[y("tr",vr,[y("td",xr,x(c(e)("common.sum")),1),(v(!0),_(D,null,W(c(o),([s,l],d)=>(v(),_("td",{key:s,class:$t(["text-center",{"pr-0":d===c(r)-1}])},[l?(v(),_(D,{key:0},[O(x(("format"in a?a.format:c(A))(l,3)),1)],64)):(v(),_(D,{key:1},[O(" â€” ")],64))],2))),128))])])]),_:1})]))}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Nt={modes:{point(t,e){return et(t,e,{intersect:!0})},nearest(t,e,n){return Mr(t,e,n)},x(t,e,n){return et(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return et(t,e,{intersect:n.intersect,axis:"y"})}}};function Rt(t,e,n){return(Nt.modes[n.mode]||Nt.modes.nearest)(t,e,n)}function kr(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function _r(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function et(t,e,n){return t.filter(o=>n.intersect?o.inRange(e.x,e.y):kr(o,e,n.axis))}function Mr(t,e,n){let o=Number.POSITIVE_INFINITY;return et(t,e,n).reduce((r,a)=>{const i=a.getCenterPoint(),s=_r(e,i,n.axis),l=Ct(e,s);return l<o?(r=[a],o=l):l===o&&r.push(a),r},[]).sort((r,a)=>r._index-a._index).slice(0,1)}function ue(t,e,n){const o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}const Sr=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,ae=.001,ot=(t,e,n)=>Math.min(n,Math.max(e,t)),bn=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function Cr(t,e,n){for(const o of Object.keys(t))t[o]=ot(t[o],e,n);return t}function Rr(t,e,n,o){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+o,2)}function gn(t,{x:e,y:n,x2:o,y2:r},a,{borderWidth:i,hitTolerance:s}){const l=(i+s)/2,d=t.x>=e-l-ae&&t.x<=o+l+ae,u=t.y>=n-l-ae&&t.y<=r+l+ae;return a==="x"?d:(a==="y"||d)&&u}function vn(t,{rect:e,center:n},o,{rotation:r,borderWidth:a,hitTolerance:i}){const s=ue(t,n,J(-r));return gn(s,e,o,{borderWidth:a,hitTolerance:i})}function ce(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function Pr(t,e,n,o=!0){const r=n.split(".");let a=0;for(const i of e.split(".")){const s=r[a++];if(parseInt(i,10)<parseInt(s,10))break;if(Sr(s,i)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const xn=t=>typeof t=="string"&&t.endsWith("%"),wn=t=>parseFloat(t)/100,kn=t=>ot(wn(t),0,1),Ce=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Ar={box:t=>Ce(t.centerX,t.centerY),doughnutLabel:t=>Ce(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Ce(t.centerX,t.centerY),line:t=>Ce(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Ce(t.centerX,t.centerY)};function Pt(t,e){return e==="start"?0:e==="end"?t:xn(e)?kn(e)*t:t/2}function re(t,e,n=!0){return typeof e=="number"?e:xn(e)?(n?kn(e):wn(e))*t:t}function Tr(t,e){const{x:n,width:o}=t,r=e.textAlign;return r==="center"?n+o/2:r==="end"||r==="right"?n+o:n}function _n(t,e,{borderWidth:n,position:o,xAdjust:r,yAdjust:a},i){const s=ie(i),l=e.width+(s?i.width:0)+n,d=e.height+(s?i.height:0)+n,u=At(o),f=Bt(t.x,l,r,u.x),p=Bt(t.y,d,a,u.y);return{x:f,y:p,x2:f+l,y2:p+d,width:l,height:d,centerX:f+l/2,centerY:p+d/2}}function At(t,e="center"){return ie(t)?{x:ye(t.x,e),y:ye(t.y,e)}:(t=ye(t,e),{x:t,y:t})}const Mn=(t,e)=>t&&t.autoFit&&e<1;function Sn(t,e){const n=t.font,o=pe(n)?n:[n];return Mn(t,e)?o.map(function(r){const a=Ze(r);return a.size=Math.floor(r.size*e),a.lineHeight=r.lineHeight,Ze(a)}):o.map(r=>Ze(r))}function Cn(t){return t&&(q(t.xValue)||q(t.yValue))}function Bt(t,e,n=0,o){return t-Pt(e,o)+n}function ve(t,e,n){const o=n.init;if(o){if(o===!0)return Pn(e,n)}else return;return Vr(t,e,n)}function Rn(t,e,n){let o=!1;return e.forEach(r=>{me(t[r])?(o=!0,n[r]=t[r]):q(n[r])&&delete n[r]}),o}function Pn(t,e){const n=e.type||"line";return Ar[n](t)}function Vr(t,e,n){const o=Oe(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return Pn(e,n);if(ie(o))return o}const mt=new Map,Er=t=>isNaN(t)||t<=0,Dr=t=>t.reduce(function(e,n){return e+=n.string,e},"");function rt(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function at(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(J(o)),t.translate(-e,-n))}function K(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function xe(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function it(t,e){const n=e.content;if(rt(n))return{width:re(n.width,e.width),height:re(n.height,e.height)};const o=Sn(e),r=e.textStrokeWidth,a=pe(n)?n:[n],i=a.join()+Dr(o)+r+(t._measureText?"-spriting":"");return mt.has(i)||mt.set(i,$r(t,a,o,r)),mt.get(i)}function An(t,e,n){const{x:o,y:r,width:a,height:i}=e;t.save(),xe(t,n);const s=K(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),zo(t,{x:o,y:r,w:a,h:i,radius:Cr(Ho(n.borderRadius),0,Math.min(a,i)/2)}),t.closePath(),t.fill(),s&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function Tn(t,e,n,o){const r=n.content;if(rt(r)){t.save(),t.globalAlpha=zr(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const a=pe(r)?r:[r],i=Sn(n,o),s=n.color,l=pe(s)?s:[s],d=Tr(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Ir(t,n)&&Lr(t,{x:d,y:u},a,i),Wr(t,{x:d,y:u},a,{fonts:i,colors:l}),t.restore()}function Ir(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Or(t,e,n,o){const{radius:r,options:a}=e,i=a.pointStyle,s=a.rotation;let l=(s||0)*fn;if(rt(i)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),t.restore();return}Er(r)||jr(t,{x:n,y:o,radius:r,rotation:s,style:i,rad:l})}function jr(t,{x:e,y:n,radius:o,rotation:r,style:a,rad:i}){let s,l,d,u;switch(t.beginPath(),a){default:t.arc(e,n,o,0,mn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Lt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Lt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),t.closePath();break;case"rectRounded":u=o*.516,d=o-u,s=Math.cos(i+Se)*d,l=Math.sin(i+Se)*d,t.arc(e-s,n-l,u,i-H,i-Ue),t.arc(e+l,n-s,u,i-Ue,i),t.arc(e+s,n+l,u,i,i+Ue),t.arc(e-l,n+s,u,i+Ue,i+H),t.closePath();break;case"rect":if(!r){d=Math.SQRT1_2*o,t.rect(e-d,n-d,2*d,2*d);break}i+=Se;case"rectRot":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+l,n-s),t.lineTo(e+s,n+l),t.lineTo(e-l,n+s),t.closePath();break;case"crossRot":i+=Se;case"cross":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"star":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s),i+=Se,s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"line":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(i)*o,n+Math.sin(i)*o);break}t.fill()}function $r(t,e,n,o){t.save();const r=e.length;let a=0,i=o;for(let s=0;s<r;s++){const l=n[Math.min(s,n.length-1)];t.font=l.string;const d=e[s];a=Math.max(a,t.measureText(d).width+o),i+=l.lineHeight}return t.restore(),{width:a,height:i}}function Lr(t,{x:e,y:n},o,r){t.beginPath();let a=0;o.forEach(function(i,s){const l=r[Math.min(s,r.length-1)],d=l.lineHeight;t.font=l.string,t.strokeText(i,e,n+d/2+a),a+=d}),t.stroke()}function Wr(t,{x:e,y:n},o,{fonts:r,colors:a}){let i=0;o.forEach(function(s,l){const d=a[Math.min(l,a.length-1)],u=r[Math.min(l,r.length-1)],f=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=d,t.fillText(s,e,n+f/2+i),i+=f,t.fill()})}function zr(t,e){const n=Wt(t)?t:e;return Wt(n)?ot(n,0,1):1}const Vn=["left","bottom","top","right"];function Hr(t,e){const{pointX:n,pointY:o,options:r}=e,a=r.callout,i=a&&a.display&&Ur(e,a);if(!i||Fr(e,a,i))return;if(t.save(),t.beginPath(),!K(t,a))return t.restore();const{separatorStart:l,separatorEnd:d}=Nr(e,i),{sideStart:u,sideEnd:f}=Xr(e,i,l);(a.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(d.x,d.y)),t.moveTo(u.x,u.y),t.lineTo(f.x,f.y);const p=ue({x:n,y:o},e.getCenterPoint(),J(-e.rotation));t.lineTo(p.x,p.y),t.stroke(),t.restore()}function Nr(t,e){const{x:n,y:o,x2:r,y2:a}=t,i=Br(t,e);let s,l;return e==="left"||e==="right"?(s={x:n+i,y:o},l={x:s.x,y:a}):(s={x:n,y:o+i},l={x:r,y:s.y}),{separatorStart:s,separatorEnd:l}}function Br(t,e){const{width:n,height:o,options:r}=t,a=r.callout.margin+r.borderWidth/2;return e==="right"?n+a:e==="bottom"?o+a:-a}function Xr(t,e,n){const{y:o,width:r,height:a,options:i}=t,s=i.callout.start,l=Yr(e,i.callout);let d,u;return e==="left"||e==="right"?(d={x:n.x,y:o+re(a,s)},u={x:d.x+l,y:d.y}):(d={x:n.x+re(r,s),y:n.y},u={x:d.x,y:d.y+l}),{sideStart:d,sideEnd:u}}function Yr(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Ur(t,e){const n=e.position;return Vn.includes(n)?n:Gr(t,e)}function Gr(t,e){const{x:n,y:o,x2:r,y2:a,width:i,height:s,pointX:l,pointY:d,centerX:u,centerY:f,rotation:p}=t,S={x:u,y:f},M=e.start,g=re(i,M),C=re(s,M),T=[n,n+g,n+g,r],k=[o+C,a,o,a],m=[];for(let E=0;E<4;E++){const z=ue({x:T[E],y:k[E]},S,J(p));m.push({position:Vn[E],distance:Ct(z,{x:l,y:d})})}return m.sort((E,z)=>E.distance-z.distance)[0].position}function Fr(t,e,n){const{pointX:o,pointY:r}=t,a=e.margin;let i=o,s=r;return n==="left"?i+=a:n==="right"?i-=a:n==="top"?s+=a:n==="bottom"&&(s-=a),t.inRange(i,s)}const Xt={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function be(t,e,n){return e=typeof e=="number"?e:t.parse(e),hn(e)?t.getPixelForValue(e):n}function se(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const r=n.charAt(0),a=Object.values(t).filter(i=>i.axis&&i.axis===r);return a.length?a[0].id:r}function En(t,e){if(t){const n=t.options.reverse,o=be(t,e.min,n?e.end:e.start),r=be(t,e.max,n?e.start:e.end);return{start:o,end:r}}}function Dn(t,e){const{chartArea:n,scales:o}=t,r=o[se(o,e,"xScaleID")],a=o[se(o,e,"yScaleID")];let i=n.width/2,s=n.height/2;return r&&(i=be(r,e.xValue,r.left+r.width/2)),a&&(s=be(a,e.yValue,a.top+a.height/2)),{x:i,y:s}}function Tt(t,e){const n=t.scales,o=n[se(n,e,"xScaleID")],r=n[se(n,e,"yScaleID")];if(!o&&!r)return{};let{left:a,right:i}=o||t.chartArea,{top:s,bottom:l}=r||t.chartArea;const d=Yt(o,{min:e.xMin,max:e.xMax,start:a,end:i});a=d.start,i=d.end;const u=Yt(r,{min:e.yMin,max:e.yMax,start:l,end:s});return s=u.start,l=u.end,{x:a,y:s,x2:i,y2:l,width:i-a,height:l-s,centerX:a+(i-a)/2,centerY:s+(l-s)/2}}function In(t,e){if(!Cn(e)){const n=Tt(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const r=o*2,a=n.centerX+e.xAdjust,i=n.centerY+e.yAdjust;return{x:a-o,y:i-o,x2:a+o,y2:i+o,centerX:a,centerY:i,width:r,height:r,radius:o}}return Kr(t,e)}function qr(t,e){const{scales:n,chartArea:o}=t,r=n[e.scaleID],a={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return r?Jr(r,a,e):Qr(n,a,e),a}function On(t,e){const n=Tt(t,e);return n.initProperties=ve(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:ta(t,n,e),initProperties:n.initProperties}],n}function Kr(t,e){const n=Dn(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function Yt(t,e){const n=En(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function Jr(t,e,n){const o=be(t,n.value,NaN),r=be(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=r):(e.y=o,e.y2=r)}function Qr(t,e,n){for(const o of Object.keys(Xt)){const r=t[se(t,n,o)];if(r){const{min:a,max:i,start:s,end:l,startProp:d,endProp:u}=Xt[o],f=En(r,{min:n[a],max:n[i],start:r[s],end:r[l]});e[d]=f.start,e[u]=f.end}}}function Zr({properties:t,options:e},n,o,r){const{x:a,x2:i,width:s}=t;return jn({start:a,end:i,borderWidth:e.borderWidth},{position:o.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function ea({properties:t,options:e},n,o,r){const{y:a,y2:i,height:s}=t;return jn({start:a,end:i,borderWidth:e.borderWidth},{position:o.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function jn(t,e){const{start:n,end:o,borderWidth:r}=t,{position:a,padding:{start:i,end:s},adjust:l}=e,d=o-r-n-i-s-e.size;return n+r/2+l+Pt(d,a)}function ta(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const r=At(o.position),a=Ie(o.padding),i=it(t.ctx,o),s=Zr({properties:e,options:n},i,r,a),l=ea({properties:e,options:n},i,r,a),d=i.width+a.width,u=i.height+a.height;return{x:s,y:l,x2:s+d,y2:l+u,width:d,height:u,centerX:s+d/2,centerY:l+u/2,rotation:o.rotation}}const bt=["enter","leave"],Vt=bt.concat("click");function na(t,e,n){e.listened=Rn(n,Vt,e.listeners),e.moveListened=!1,bt.forEach(o=>{me(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&me(o.click)&&(e.listened=!0),e.moveListened||bt.forEach(r=>{me(o[r])&&(e.listened=!0,e.moveListened=!0)})})}function oa(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return ra(t,e,n);case"click":return aa(t,e,n)}}function ra(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=Rt(t.visibleElements,e,n.interaction):o=[];const r=t.hovered;t.hovered=o;const a={state:t,event:e};let i=Ut(a,"leave",r,o);return Ut(a,"enter",o,r)||i}function Ut({state:t,event:e},n,o,r){let a;for(const i of o)r.indexOf(i)<0&&(a=$n(i.options[n]||t.listeners[n],i,e)||a);return a}function aa(t,e,n){const o=t.listeners,r=Rt(t.visibleElements,e,n.interaction);let a;for(const i of r)a=$n(i.options.click||o.click,i,e)||a;return a}function $n(t,e,n){return Oe(t,[e.$context,n])===!0}const tt=["afterDraw","beforeDraw"];function ia(t,e,n){const o=e.visibleElements;e.hooked=Rn(n,tt,e.hooks),e.hooked||o.forEach(r=>{e.hooked||tt.forEach(a=>{me(r.options[a])&&(e.hooked=!0)})})}function Gt(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return Oe(o,[e.$context])}}function sa(t,e,n){const o=fa(t.scales,e,n);let r=Ft(e,o,"min","suggestedMin");r=Ft(e,o,"max","suggestedMax")||r,r&&me(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function la(t,e){for(const n of t)ua(n,e)}function Ft(t,e,n,o){if(hn(e[n])&&!da(t.options,n,o)){const r=t[n]!==e[n];return t[n]=e[n],r}}function da(t,e,n){return q(t[e])||q(t[n])}function ua(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=se(e,t,n);o&&!e[o]&&ca(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function ca(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(q(t[n+o]))return!0;return!1}function fa(t,e,n){const o=e.axis,r=e.id,a=o+"ScaleID",i={min:ye(e.min,Number.NEGATIVE_INFINITY),max:ye(e.max,Number.POSITIVE_INFINITY)};for(const s of n)s.scaleID===r?qt(s,e,["value","endValue"],i):se(t,s,a)===r&&qt(s,e,[o+"Min",o+"Max",o+"Value"],i);return i}function qt(t,e,n,o){for(const r of n){const a=t[r];if(q(a)){const i=e.parse(a);o.min=Math.min(o.min,i),o.max=Math.max(o.max,i)}}}class we extends de{inRange(e,n,o,r){const{x:a,y:i}=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation));return gn({x:a,y:i},this.getProps(["x","y","x2","y2"],r),o,this.options)}getCenterPoint(e){return ce(this,e)}draw(e){e.save(),at(e,this.getCenterPoint(),this.options.rotation),An(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return On(e,n)}}we.id="boxAnnotation";we.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};we.defaultRoutes={borderColor:"color",backgroundColor:"color"};we.descriptors={label:{_fallback:!0}};class st extends de{inRange(e,n,o,r){return vn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options;!n.display||!n.content||(ga(e,this),e.save(),at(e,this.getCenterPoint(),this.rotation),Tn(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const o=ha(e,n);if(!o)return{};const{controllerMeta:r,point:a,radius:i}=ya(e,n,o);let s=it(e.ctx,n);const l=pa(s,i);Mn(n,l)&&(s={width:s.width*l,height:s.height*l});const{position:d,xAdjust:u,yAdjust:f}=n,p=_n(a,s,{borderWidth:0,position:d,xAdjust:u,yAdjust:f});return{initProperties:ve(e,p,n),...p,...r,rotation:n.rotation,_fitRatio:l}}}st.id="doughnutLabelAnnotation";st.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};st.defaultRoutes={};function ha(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,o){const r=o.controller;return r instanceof No&&ma(t,e,o.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?o:n},void 0)}function ma(t,e,n){if(!e.autoHide)return!0;for(let o=0;o<n.length;o++)if(!n[o].hidden&&t.getDataVisibility(o))return!0}function ya({chartArea:t},e,n){const{left:o,top:r,right:a,bottom:i}=t,{innerRadius:s,offsetX:l,offsetY:d}=n.controller,u=(o+a)/2+l,f=(r+i)/2+d,p={left:Math.max(u-s,o),right:Math.min(u+s,a),top:Math.max(f-s,r),bottom:Math.min(f+s,i)},S={x:(p.left+p.right)/2,y:(p.top+p.bottom)/2},M=e.spacing+e.borderWidth/2,g=s-M,C=S.y>f,T=C?r+M:i-M,k=ba(T,u,f,g);return{controllerMeta:{_centerX:u,_centerY:f,_radius:g,_counterclockwise:C,...k},point:S,radius:Math.min(s,Math.min(p.right-p.left,p.bottom-p.top)/2)}}function pa({width:t,height:e},n){const o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/o}function ba(t,e,n,o){const r=Math.pow(n-t,2),a=Math.pow(o,2),i=e*-2,s=Math.pow(e,2)+r-a,l=Math.pow(i,2)-4*s;if(l<=0)return{_startAngle:0,_endAngle:mn};const d=(-i-Math.sqrt(l))/2,u=(-i+Math.sqrt(l))/2;return{_startAngle:zt({x:e,y:n},{x:d,y:t}).angle,_endAngle:zt({x:e,y:n},{x:u,y:t}).angle}}function ga(t,e){const{_centerX:n,_centerY:o,_radius:r,_startAngle:a,_endAngle:i,_counterclockwise:s,options:l}=e;t.save();const d=K(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,o,r,a,i,s),t.closePath(),t.fill(),d&&t.stroke(),t.restore()}class je extends de{inRange(e,n,o,r){return vn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=!q(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),at(e,this.getCenterPoint(),this.rotation),Hr(e,this),An(e,this,n),Tn(e,va(this),n),e.restore())}resolveElementProperties(e,n){let o;if(Cn(n))o=Dn(e,n);else{const{centerX:s,centerY:l}=Tt(e,n);o={x:s,y:l}}const r=Ie(n.padding),a=it(e.ctx,n),i=_n(o,a,n,r);return{initProperties:ve(e,i,n),pointX:o.x,pointY:o.y,...i,rotation:n.rotation}}}je.id="labelAnnotation";je.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};je.defaultRoutes={borderColor:"color"};function va({x:t,y:e,width:n,height:o,options:r}){const a=r.borderWidth/2,i=Ie(r.padding);return{x:t+i.left+a,y:e+i.top+a,width:n-i.left-i.right-r.borderWidth,height:o-i.top-i.bottom-r.borderWidth}}const Et=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),gt=(t,e,n)=>Et(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Kt=(t,e,n)=>Et(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Ae=t=>t*t,xa=(t,e,{x:n,y:o,x2:r,y2:a},i)=>i==="y"?{start:Math.min(o,a),end:Math.max(o,a),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},Jt=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,vt=(t,e,n,o)=>({x:Jt(t.x,e.x,n.x,o),y:Jt(t.y,e.y,n.y,o)}),Qt=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),Zt=(t,e,n,o)=>-Math.atan2(Qt(t.x,e.x,n.x,o),Qt(t.y,e.y,n.y,o))+.5*H;class $e extends de{inRange(e,n,o,r){const a=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y"){const i={mouseX:e,mouseY:n},{path:s,ctx:l}=this;if(s){K(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,f=e*u.currentDevicePixelRatio,p=n*u.currentDevicePixelRatio,S=l.isPointInStroke(s,f,p)||xt(this,i,r);return l.restore(),S}const d=Ae(a);return Ma(this,i,d,r)||xt(this,i,r)}return wa(this,{mouseX:e,mouseY:n},o,{hitSize:a,useFinalPosition:r})}getCenterPoint(e){return ce(this,e)}draw(e){const{x:n,y:o,x2:r,y2:a,cp:i,options:s}=this;if(e.save(),!K(e,s))return e.restore();xe(e,s);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-o,2));if(s.curve&&i)return Ea(e,this,i,l),e.restore();const{startOpts:d,endOpts:u,startAdjust:f,endAdjust:p}=Ln(this),S=Math.atan2(a-o,r-n);e.translate(n,o),e.rotate(S),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-p,0),e.shadowColor=s.borderShadowColor,e.stroke(),wt(e,0,f,d),wt(e,l,-p,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=qr(e,n),{x:r,y:a,x2:i,y2:s}=o,l=ka(o,e.chartArea),d=l?_a({x:r,y:a},{x:i,y:s},e.chartArea):{x:r,y:a,x2:i,y2:s,width:Math.abs(i-r),height:Math.abs(s-a)};if(d.centerX=(i+r)/2,d.centerY=(s+a)/2,d.initProperties=ve(e,d,n),n.curve){const f={x:d.x,y:d.y},p={x:d.x2,y:d.y2};d.cp=Va(d,n,Ct(f,p))}const u=Sa(e,d,n.label);return u._visible=l,d.elements=[{type:"label",optionScope:"label",properties:u,initProperties:d.initProperties}],d}}$e.id="lineAnnotation";const en={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};$e.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},en),fill:!1,length:12,start:Object.assign({},en),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},je.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};$e.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};$e.defaultRoutes={borderColor:"color"};function wa(t,{mouseX:e,mouseY:n},o,{hitSize:r,useFinalPosition:a}){const i=xa(e,n,t.getProps(["x","y","x2","y2"],a),o);return bn(i,r)||xt(t,{mouseX:e,mouseY:n},a,o)}function ka({x:t,y:e,x2:n,y2:o},{top:r,right:a,bottom:i,left:s}){return!(t<s&&n<s||t>a&&n>a||e<r&&o<r||e>i&&o>i)}function tn({x:t,y:e},n,{top:o,right:r,bottom:a,left:i}){return t<i&&(e=Kt(i,{x:t,y:e},n),t=i),t>r&&(e=Kt(r,{x:t,y:e},n),t=r),e<o&&(t=gt(o,{x:t,y:e},n),e=o),e>a&&(t=gt(a,{x:t,y:e},n),e=a),{x:t,y:e}}function _a(t,e,n){const{x:o,y:r}=tn(t,e,n),{x:a,y:i}=tn(e,t,n);return{x:o,y:r,x2:a,y2:i,width:Math.abs(a-o),height:Math.abs(i-r)}}function Ma(t,{mouseX:e,mouseY:n},o=ae,r){const{x:a,y:i,x2:s,y2:l}=t.getProps(["x","y","x2","y2"],r),d=s-a,u=l-i,f=Ae(d)+Ae(u),p=f===0?-1:((e-a)*d+(n-i)*u)/f;let S,M;return p<0?(S=a,M=i):p>1?(S=s,M=l):(S=a+p*d,M=i+p*u),Ae(e-S)+Ae(n-M)<=o}function xt(t,{mouseX:e,mouseY:n},o,r){const a=t.label;return a.options.display&&a.inRange(e,n,r,o)}function Sa(t,e,n){const o=n.borderWidth,r=Ie(n.padding),a=it(t.ctx,n),i=a.width+r.width+o,s=a.height+r.height+o;return Ra(e,n,{width:i,height:s,padding:r},t.chartArea)}function Ca(t){const{x:e,y:n,x2:o,y2:r}=t,a=Math.atan2(r-n,o-e);return a>H/2?a-H:a<H/-2?a+H:a}function Ra(t,e,n,o){const{width:r,height:a,padding:i}=n,{xAdjust:s,yAdjust:l}=e,d={x:t.x,y:t.y},u={x:t.x2,y:t.y2},f=e.rotation==="auto"?Ca(t):J(e.rotation),p=Pa(r,a,f),S=Aa(t,e,{labelSize:p,padding:i},o),M=t.cp?vt(d,t.cp,u,S):Et(d,u,S),g={size:p.w,min:o.left,max:o.right,padding:i.left},C={size:p.h,min:o.top,max:o.bottom,padding:i.top},T=on(M.x,g)+s,k=on(M.y,C)+l;return{x:T-r/2,y:k-a/2,x2:T+r/2,y2:k+a/2,centerX:T,centerY:k,pointX:M.x,pointY:M.y,width:r,height:a,rotation:Xo(f)}}function Pa(t,e,n){const o=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*o)}}function Aa(t,e,n,o){let r;const a=Ta(t,o);return e.position==="start"?r=nn({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?r=1-nn({w:t.x-t.x2,h:t.y-t.y2},n,e,a):r=Pt(1,e.position),r}function nn(t,e,n,o){const{labelSize:r,padding:a}=e,i=t.w*o.dx,s=t.h*o.dy,l=i>0&&(r.w/2+a.left-o.x)/i,d=s>0&&(r.h/2+a.top-o.y)/s;return ot(Math.max(l,d),0,.25)}function Ta(t,e){const{x:n,x2:o,y:r,y2:a}=t,i=Math.min(r,a)-e.top,s=Math.min(n,o)-e.left,l=e.bottom-Math.max(r,a),d=e.right-Math.max(n,o);return{x:Math.min(s,d),y:Math.min(i,l),dx:s<=d?1:-1,dy:i<=l?1:-1}}function on(t,e){const{size:n,min:o,max:r,padding:a}=e,i=n/2;return n>r-o?(r+o)/2:(o>=t-a-i&&(t=o+a+i),r<=t+a+i&&(t=r-a-i),t)}function Ln(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:rn(t,n),endAdjust:rn(t,o)}}function rn(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,r=t.options.borderWidth/2,a={x:n,y:o+r};return Math.abs(gt(0,a,{x:0,y:r}))}function wt(t,e,n,o){if(!o||!o.display)return;const{length:r,width:a,fill:i,backgroundColor:s,borderColor:l}=o,d=Math.abs(e-r)+n;t.beginPath(),xe(t,o),K(t,o),t.moveTo(d,-a),t.lineTo(e+n,0),t.lineTo(d,a),i===!0?(t.fillStyle=s||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function Va(t,e,n){const{x:o,y:r,x2:a,y2:i,centerX:s,centerY:l}=t,d=Math.atan2(i-r,a-o),u=At(e.controlPoint,0),f={x:s+re(n,u.x,!1),y:l+re(n,u.y,!1)};return ue(f,{x:s,y:l},d)}function an(t,{x:e,y:n},{angle:o,adjust:r},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(o),wt(t,0,-r,a),t.restore())}function Ea(t,e,n,o){const{x:r,y:a,x2:i,y2:s,options:l}=e,{startOpts:d,endOpts:u,startAdjust:f,endAdjust:p}=Ln(e),S={x:r,y:a},M={x:i,y:s},g=Zt(S,n,M,0),C=Zt(S,n,M,1)-H,T=vt(S,n,M,f/o),k=vt(S,n,M,1-p/o),m=new Path2D;t.beginPath(),m.moveTo(T.x,T.y),m.quadraticCurveTo(n.x,n.y,k.x,k.y),t.shadowColor=l.borderShadowColor,t.stroke(m),e.path=m,e.ctx=t,an(t,T,{angle:g,adjust:f},d),an(t,k,{angle:C,adjust:p},u)}class Le extends de{inRange(e,n,o,r){const a=this.options.rotation,i=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y")return Da({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),a,i);const{x:s,y:l,x2:d,y2:u}=this.getProps(["x","y","x2","y2"],r),f=o==="y"?{start:l,end:u}:{start:s,end:d},p=ue({x:e,y:n},this.getCenterPoint(r),J(-a));return p[o]>=f.start-i-ae&&p[o]<=f.end+i+ae}getCenterPoint(e){return ce(this,e)}draw(e){const{width:n,height:o,centerX:r,centerY:a,options:i}=this;e.save(),at(e,this.getCenterPoint(),i.rotation),xe(e,this.options),e.beginPath(),e.fillStyle=i.backgroundColor;const s=K(e,i);e.ellipse(r,a,o/2,n/2,H/2,0,2*H),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return On(e,n)}}Le.id="ellipseAnnotation";Le.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},we.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Le.defaultRoutes={borderColor:"color",backgroundColor:"color"};Le.descriptors={label:{_fallback:!0}};function Da(t,e,n,o){const{width:r,height:a,centerX:i,centerY:s}=e,l=r/2,d=a/2;if(l<=0||d<=0)return!1;const u=J(n||0),f=Math.cos(u),p=Math.sin(u),S=Math.pow(f*(t.x-i)+p*(t.y-s),2),M=Math.pow(p*(t.x-i)-f*(t.y-s),2);return S/Math.pow(l+o,2)+M/Math.pow(d+o,2)<=1.0001}class lt extends de{inRange(e,n,o,r){const{x:a,y:i,x2:s,y2:l,width:d}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return o!=="x"&&o!=="y"?Rr({x:e,y:n},this.getCenterPoint(r),d/2,u):bn(o==="y"?{start:i,end:l,value:n}:{start:a,end:s,value:e},u)}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,xe(e,n);const r=K(e,n);Or(e,this,this.centerX,this.centerY),r&&!rt(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=In(e,n);return o.initProperties=ve(e,o,n),o}}lt.id="pointAnnotation";lt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};lt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class dt extends de{inRange(e,n,o,r){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&Oa(this.elements,e,n,r);const a=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation)),i=this.elements.map(d=>o==="y"?d.bY:d.bX),s=Math.min(...i),l=Math.max(...i);return a[o]>=s&&a[o]<=l}getCenterPoint(e){return ce(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,xe(e,o);const r=K(e,o);let a=!0;for(const i of n)a?(e.moveTo(i.x,i.y),a=!1):e.lineTo(i.x,i.y);e.closePath(),e.fill(),r&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=In(e,n),{sides:r,rotation:a}=n,i=[],s=2*H/r;let l=a*fn;for(let d=0;d<r;d++,l+=s){const u=Ia(o,n,l);u.initProperties=ve(e,o,n),i.push(u)}return o.elements=i,o}}dt.id="polygonAnnotation";dt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};dt.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Ia({centerX:t,centerY:e},{radius:n,borderWidth:o,hitTolerance:r},a){const i=(o+r)/2,s=Math.sin(a),l=Math.cos(a),d={x:t+s*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:d.x,y:d.y,centerX:d.x,centerY:d.y,bX:t+s*(n+i),bY:e-l*(n+i)}}}function Oa(t,e,n,o){let r=!1,a=t[t.length-1].getProps(["bX","bY"],o);for(const i of t){const s=i.getProps(["bX","bY"],o);s.bY>n!=a.bY>n&&e<(a.bX-s.bX)*(n-s.bY)/(a.bY-s.bY)+s.bX&&(r=!r),a=s}return r}const oe={box:we,doughnutLabel:st,ellipse:Le,label:je,line:$e,point:lt,polygon:dt};Object.keys(oe).forEach(t=>{yn.describe(`elements.${oe[t].id}`,{_fallback:"plugins.annotation.common"})});const ja={update:Object.assign},$a=Vt.concat(tt),sn=(t,e)=>ie(e)?_t(t,e):t,kt=t=>t==="color"||t==="font";function Dt(t="line"){return oe[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function La(t,e,n,o){const r=za(t,n.animations,o),a=e.annotations,i=Ba(e.elements,a);for(let s=0;s<a.length;s++){const l=a[s],d=Wn(i,s,l.type),u=l.setContext(Na(t,d,i,l)),f=d.resolveElementProperties(t,u);f.skip=Wa(f),"elements"in f&&(Ha(d,f.elements,u,r),delete f.elements),q(d.x)||Object.assign(d,f),Object.assign(d,f.initProperties),f.options=zn(u),r.update(d,f)}}function Wa(t){return isNaN(t.x)||isNaN(t.y)}function za(t,e,n){return n==="reset"||n==="none"||n==="resize"?ja:new Bo(t,e)}function Ha(t,e,n,o){const r=t.elements||(t.elements=[]);r.length=e.length;for(let a=0;a<e.length;a++){const i=e[a],s=i.properties,l=Wn(r,a,i.type,i.initProperties),d=n[i.optionScope].override(i);s.options=zn(d),o.update(l,s)}}function Wn(t,e,n,o){const r=oe[Dt(n)];let a=t[e];return(!a||!(a instanceof r))&&(a=t[e]=new r,Object.assign(a,o)),a}function zn(t){const e=oe[Dt(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,_t(t,e.defaults),_t(t,e.defaultRoutes));for(const o of $a)n[o]=t[o];return n}function _t(t,e){const n={};for(const o of Object.keys(e)){const r=e[o],a=t[o];kt(o)&&pe(a)?n[o]=a.map(i=>sn(i,r)):n[o]=sn(a,r)}return n}function Na(t,e,n,o){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:o.id,type:"annotation"}))}function Ba(t,e){const n=e.length,o=t.length;if(o<n){const r=n-o;t.splice(o,0,...new Array(r))}else o>n&&t.splice(n,o-n);return t}var Xa="3.1.0";const te=new Map,ln=t=>t.type!=="doughnutLabel",Ya=Vt.concat(tt);var Ua={id:"annotation",version:Xa,beforeRegister(){Pr("chart.js","4.0",Qe.version)},afterRegister(){Qe.register(oe)},afterUnregister(){Qe.unregister(oe)},beforeInit(t){te.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=te.get(t),r=o.annotations=[];let a=n.annotations;ie(a)?Object.keys(a).forEach(i=>{const s=a[i];ie(s)&&(s.id=i,r.push(s))}):pe(a)&&r.push(...a),la(r.filter(ln),t.scales)},afterDataLimits(t,e){const n=te.get(t);sa(t,e.scale,n.annotations.filter(ln).filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=te.get(t);na(t,o,n),La(t,o,n,e.mode),o.visibleElements=o.elements.filter(r=>!r.skip&&r.options.display),ia(t,o,n)},beforeDatasetsDraw(t,e,n){Re(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Re(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Re(t,e.index,n.clip)},beforeDraw(t,e,n){Re(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Re(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=te.get(t);oa(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){te.delete(t)},getAnnotations(t){const e=te.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Rt(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!Ya.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${oe[Dt(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:kt,_fallback:!0},_indexable:kt}},additionalOptionScopes:[""]};function Re(t,e,n){const{ctx:o,chartArea:r}=t,a=te.get(t);n&&Lo(o,r);const i=Ga(a.visibleElements,e).sort((s,l)=>s.element.options.z-l.element.options.z);for(const s of i)Fa(o,r,a,s);n&&Wo(o)}function Ga(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const r of o.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function Fa(t,e,n,o){const r=o.element;o.main?(Gt(n,r,"beforeDraw"),r.draw(t,e),Gt(n,r,"afterDraw")):r.draw(t,e)}/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var dn=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),Ve={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):Te(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var o=[].concat(e),r=o.length,a=t.font,i=0,s;for(t.font=n.string,s=0;s<r;++s)i=Math.max(t.measureText(o[s]).width,i);return t.font=a,{height:r*n.lineHeight,width:i}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),o=[],r,a,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],a=n.indexOf(s),a===-1?o.push([s,1]):n.splice(a,1);for(r=0,i=n.length;r<i;++r)o.push([n[r],-1]);return o},rasterize:function(t){return Math.round(t*dn)/dn}};function yt(t,e){var n=e.x,o=e.y;if(n===null)return{x:0,y:-1};if(o===null)return{x:1,y:0};var r=t.x-n,a=t.y-o,i=Math.sqrt(r*r+a*a);return{x:i?r/i:0,y:i?a/i:-1}}function qa(t,e,n,o,r){switch(r){case"center":n=o=0;break;case"bottom":n=0,o=1;break;case"right":n=1,o=0;break;case"left":n=-1,o=0;break;case"top":n=0,o=-1;break;case"start":n=-n,o=-o;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),o=Math.sin(r);break}return{x:t,y:e,vx:n,vy:o}}var Ka=0,Hn=1,Nn=2,Bn=4,Xn=8;function Fe(t,e,n){var o=Ka;return t<n.left?o|=Hn:t>n.right&&(o|=Nn),e<n.top?o|=Xn:e>n.bottom&&(o|=Bn),o}function Ja(t,e){for(var n=t.x0,o=t.y0,r=t.x1,a=t.y1,i=Fe(n,o,e),s=Fe(r,a,e),l,d,u;!(!(i|s)||i&s);)l=i||s,l&Xn?(d=n+(r-n)*(e.top-o)/(a-o),u=e.top):l&Bn?(d=n+(r-n)*(e.bottom-o)/(a-o),u=e.bottom):l&Nn?(u=o+(a-o)*(e.right-n)/(r-n),d=e.right):l&Hn&&(u=o+(a-o)*(e.left-n)/(r-n),d=e.left),l===i?(n=d,o=u,i=Fe(n,o,e)):(r=d,a=u,s=Fe(r,a,e));return{x0:n,x1:r,y0:o,y1:a}}function qe(t,e){var n=e.anchor,o=t,r,a;return e.clamp&&(o=Ja(o,e.area)),n==="start"?(r=o.x0,a=o.y0):n==="end"?(r=o.x1,a=o.y1):(r=(o.x0+o.x1)/2,a=(o.y0+o.y1)/2),qa(r,a,t.vx,t.vy,e.align)}var Ke={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,o=Math.cos(n),r=Math.sin(n),a=t.innerRadius,i=t.outerRadius;return qe({x0:t.x+o*a,y0:t.y+r*a,x1:t.x+o*i,y1:t.y+r*i,vx:o,vy:r},e)},point:function(t,e){var n=yt(t,e.origin),o=n.x*t.options.radius,r=n.y*t.options.radius;return qe({x0:t.x-o,y0:t.y-r,x1:t.x+o,y1:t.y+r,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=yt(t,e.origin),o=t.x,r=t.y,a=0,i=0;return t.horizontal?(o=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),i=Math.abs(t.base-t.y)),qe({x0:o,y0:r+i,x1:o+a,y1:r,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=yt(t,e.origin);return qe({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},F=Ve.rasterize;function Qa(t){var e=t.borderWidth||0,n=t.padding,o=t.size.height,r=t.size.width,a=-r/2,i=-o/2;return{frame:{x:a-n.left-e,y:i-n.top-e,w:r+n.width+e*2,h:o+n.height+e*2},text:{x:a,y:i,w:r,h:o}}}function Za(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var o=n.getBasePixel();return t.horizontal?{x:o,y:null}:{x:null,y:o}}function ei(t){return t instanceof pn?Ke.arc:t instanceof Uo?Ke.point:t instanceof Go?Ke.bar:Ke.fallback}function ti(t,e,n,o,r,a){var i=Math.PI/2;if(a){var s=Math.min(a,r/2,o/2),l=e+s,d=n+s,u=e+o-s,f=n+r-s;t.moveTo(e,d),l<u&&d<f?(t.arc(l,d,s,-Math.PI,-i),t.arc(u,d,s,-i,0),t.arc(u,f,s,0,i),t.arc(l,f,s,i,Math.PI)):l<u?(t.moveTo(l,n),t.arc(u,d,s,-i,i),t.arc(l,d,s,i,Math.PI+i)):d<f?(t.arc(l,d,s,-Math.PI,0),t.arc(l,f,s,0,Math.PI)):t.arc(l,d,s,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,o,r)}function ni(t,e,n){var o=n.backgroundColor,r=n.borderColor,a=n.borderWidth;!o&&(!r||!a)||(t.beginPath(),ti(t,F(e.x)+a/2,F(e.y)+a/2,F(e.w)-a,F(e.h)-a,n.borderRadius),t.closePath(),o&&(t.fillStyle=o,t.fill()),r&&a&&(t.strokeStyle=r,t.lineWidth=a,t.lineJoin="miter",t.stroke()))}function oi(t,e,n){var o=n.lineHeight,r=t.w,a=t.x,i=t.y+o/2;return e==="center"?a+=r/2:(e==="end"||e==="right")&&(a+=r),{h:o,w:r,x:a,y:i}}function ri(t,e,n){var o=t.shadowBlur,r=n.stroked,a=F(n.x),i=F(n.y),s=F(n.w);r&&t.strokeText(e,a,i,s),n.filled&&(o&&r&&(t.shadowBlur=0),t.fillText(e,a,i,s),o&&r&&(t.shadowBlur=o))}function ai(t,e,n,o){var r=o.textAlign,a=o.color,i=!!a,s=o.font,l=e.length,d=o.textStrokeColor,u=o.textStrokeWidth,f=d&&u,p;if(!(!l||!i&&!f))for(n=oi(n,r,s),t.font=s.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=o.textShadowBlur,t.shadowColor=o.textShadowColor,i&&(t.fillStyle=a),f&&(t.lineJoin="round",t.lineWidth=u,t.strokeStyle=d),p=0,l=e.length;p<l;++p)ri(t,e[p],{stroked:f,filled:i,w:n.w,x:n.x,y:n.y+n.h*p})}var Yn=function(t,e,n,o){var r=this;r._config=t,r._index=o,r._model=null,r._rects=null,r._ctx=e,r._el=n};De(Yn.prototype,{_modelize:function(t,e,n,o){var r=this,a=r._index,i=Ze(I([n.font,{}],o,a)),s=I([n.color,yn.color],o,a);return{align:I([n.align,"center"],o,a),anchor:I([n.anchor,"center"],o,a),area:o.chart.chartArea,backgroundColor:I([n.backgroundColor,null],o,a),borderColor:I([n.borderColor,null],o,a),borderRadius:I([n.borderRadius,0],o,a),borderWidth:I([n.borderWidth,0],o,a),clamp:I([n.clamp,!1],o,a),clip:I([n.clip,!1],o,a),color:s,display:t,font:i,lines:e,offset:I([n.offset,4],o,a),opacity:I([n.opacity,1],o,a),origin:Za(r._el,o),padding:Ie(I([n.padding,4],o,a)),positioner:ei(r._el),rotation:I([n.rotation,0],o,a)*(Math.PI/180),size:Ve.textSize(r._ctx,e,i),textAlign:I([n.textAlign,"start"],o,a),textShadowBlur:I([n.textShadowBlur,0],o,a),textShadowColor:I([n.textShadowColor,s],o,a),textStrokeColor:I([n.textStrokeColor,s],o,a),textStrokeWidth:I([n.textStrokeWidth,0],o,a)}},update:function(t){var e=this,n=null,o=null,r=e._index,a=e._config,i,s,l,d=I([a.display,!0],t,r);d&&(i=t.dataset.data[r],s=ye(Oe(a.formatter,[i,t]),i),l=Te(s)?[]:Ve.toTextLines(s),l.length&&(n=e._modelize(d,l,a,t),o=Qa(n))),e._model=n,e._rects=o},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,o=t.ctx,r=n._model,a=n._rects,i;this.visible()&&(o.save(),r.clip&&(i=r.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=Ve.bound(0,r.opacity,1),o.translate(F(e.x),F(e.y)),o.rotate(r.rotation),ni(o,a.frame,r),ai(o,r.lines,a.text,r),o.restore())}});var ii=Number.MIN_SAFE_INTEGER||-9007199254740991,si=Number.MAX_SAFE_INTEGER||9007199254740991;function Pe(t,e,n){var o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}function un(t,e){var n=si,o=ii,r=e.origin,a,i,s,l,d;for(a=0;a<t.length;++a)i=t[a],s=i.x-r.x,l=i.y-r.y,d=e.vx*s+e.vy*l,n=Math.min(n,d),o=Math.max(o,d);return{min:n,max:o}}function Je(t,e){var n=e.x-t.x,o=e.y-t.y,r=Math.sqrt(n*n+o*o);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var Un=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};De(Un.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,o=e._rect;return t=Pe(t,e.center(),-e._rotation),!(t.x<o.x-n||t.y<o.y-n||t.x>o.x+o.w+n*2||t.y>o.y+o.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),o=[Je(e[0],e[1]),Je(e[0],e[3])],r,a,i;for(this._rotation!==t._rotation&&o.push(Je(n[0],n[1]),Je(n[0],n[3])),r=0;r<o.length;++r)if(a=un(e,o[r]),i=un(n,o[r]),a.max<i.min||i.max<a.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,o=t.center();return[Pe({x:e.x,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y+e.h},o,n),Pe({x:e.x,y:e.y+e.h},o,n)]}});function Gn(t,e,n){var o=e.positioner(t,e),r=o.vx,a=o.vy;if(!r&&!a)return{x:o.x,y:o.y};var i=n.w,s=n.h,l=e.rotation,d=Math.abs(i/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),u=Math.abs(i/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),f=1/Math.max(Math.abs(r),Math.abs(a));return d*=r*f,u*=a*f,d+=e.offset*r,u+=e.offset*a,{x:o.x+d,y:o.y+u}}function li(t,e){var n,o,r,a;for(n=t.length-1;n>=0;--n)for(r=t[n].$layout,o=n-1;o>=0&&r._visible;--o)a=t[o].$layout,a._visible&&r._box.intersects(a._box)&&e(r,a);return t}function di(t){var e,n,o,r,a,i,s;for(e=0,n=t.length;e<n;++e)o=t[e],r=o.$layout,r._visible&&(s=new Proxy(o._el,{get:(l,d)=>l.getProps([d],!0)[d]}),a=o.geometry(),i=Gn(s,o.model(),a),r._box.update(i,a,o.rotation()));return li(t,function(l,d){var u=l._hidable,f=d._hidable;u&&f||f?d._visible=!1:u&&(l._visible=!1)})}var Ee={prepare:function(t){var e=[],n,o,r,a,i;for(n=0,r=t.length;n<r;++n)for(o=0,a=t[n].length;o<a;++o)i=t[n][o],e.push(i),i.$layout={_box:new Un,_hidable:!1,_visible:!0,_set:n,_idx:i._index};return e.sort(function(s,l){var d=s.$layout,u=l.$layout;return d._idx===u._idx?u._set-d._set:u._idx-d._idx}),this.update(e),e},update:function(t){var e=!1,n,o,r,a,i;for(n=0,o=t.length;n<o;++n)r=t[n],a=r.model(),i=r.$layout,i._hidable=a&&a.display==="auto",i._visible=r.visible(),e|=i._hidable;e&&di(t)},lookup:function(t,e){var n,o;for(n=t.length-1;n>=0;--n)if(o=t[n].$layout,o&&o._visible&&o._box.contains(e))return t[n];return null},draw:function(t,e){var n,o,r,a,i,s;for(n=0,o=e.length;n<o;++n)r=e[n],a=r.$layout,a._visible&&(i=r.geometry(),s=Gn(r._el,r.model(),i),a._box.update(s,i,r.rotation()),r.draw(t,s))}},ui=function(t){if(Te(t))return null;var e=t,n,o,r;if(ie(t))if(!Te(t.label))e=t.label;else if(!Te(t.r))e=t.r;else for(e="",n=Object.keys(t),r=0,o=n.length;r<o;++r)e+=(r!==0?", ":"")+n[r]+": "+t[n[r]];return""+e},ci={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:ui,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},$="$datalabels",Fn="$default";function fi(t,e){var n=t.datalabels,o={},r=[],a,i;return n===!1?null:(n===!0&&(n={}),e=De({},[e,n]),a=e.labels||{},i=Object.keys(a),delete e.labels,i.length?i.forEach(function(s){a[s]&&r.push(De({},[e,a[s],{_key:s}]))}):r.push(e),o=r.reduce(function(s,l){return Yo(l.listeners||{},function(d,u){s[u]=s[u]||{},s[u][l._key||Fn]=d}),delete l.listeners,s},{}),{labels:r,listeners:o})}function Mt(t,e,n,o){if(e){var r=n.$context,a=n.$groups,i;e[a._set]&&(i=e[a._set][a._key],i&&Oe(i,[r,o])===!0&&(t[$]._dirty=!0,n.update(r)))}}function hi(t,e,n,o,r){var a,i;!n&&!o||(n?o?n!==o&&(i=a=!0):i=!0:a=!0,i&&Mt(t,e.leave,n,r),a&&Mt(t,e.enter,o,r))}function mi(t,e){var n=t[$],o=n._listeners,r,a;if(!(!o.enter&&!o.leave)){if(e.type==="mousemove")a=Ee.lookup(n._labels,e);else if(e.type!=="mouseout")return;r=n._hovered,n._hovered=a,hi(t,o,r,a,e)}}function yi(t,e){var n=t[$],o=n._listeners.click,r=o&&Ee.lookup(n._labels,e);r&&Mt(t,o,r,e)}var pi={id:"datalabels",defaults:ci,beforeInit:function(t){t[$]={_actives:[]}},beforeUpdate:function(t){var e=t[$];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var o=e.index,r=t[$],a=r._datasets[o]=[],i=t.isDatasetVisible(o),s=t.data.datasets[o],l=fi(s,n),d=e.meta.data||[],u=t.ctx,f,p,S,M,g,C,T,k;for(u.save(),f=0,S=d.length;f<S;++f)if(T=d[f],T[$]=[],i&&T&&t.getDataVisibility(f)&&!T.skip)for(p=0,M=l.labels.length;p<M;++p)g=l.labels[p],C=g._key,k=new Yn(g,u,T,f),k.$groups={_set:o,_key:C||Fn},k.$context={active:!1,chart:t,dataIndex:f,dataset:s,datasetIndex:o},k.update(k.$context),T[$].push(k),a.push(k);u.restore(),De(r._listeners,l.listeners,{merger:function(m,E,z){E[m]=E[m]||{},E[m][e.index]=z[m],r._listened=!0}})},afterUpdate:function(t){t[$]._labels=Ee.prepare(t[$]._datasets)},afterDatasetsDraw:function(t){Ee.draw(t,t[$]._labels)},beforeEvent:function(t,e){if(t[$]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":mi(t,n);break;case"click":yi(t,n);break}}},afterEvent:function(t){var e=t[$],n=e._actives,o=e._actives=t.getActiveElements(),r=Ve.arrayDiff(n,o),a,i,s,l,d,u,f;for(a=0,i=r.length;a<i;++a)if(d=r[a],d[1])for(f=d[0].element[$]||[],s=0,l=f.length;s<l;++s)u=f[s],u.$context.active=d[1]===1,u.update(u.$context);(e._dirty||r.length)&&(Ee.update(e._labels),t.render()),delete e._dirty}};const bi=le({name:"PieChart",__name:"PieChart",props:{data:{},options:{}},setup(t){return Qe.register(pn,Fo,qo,Ua),(e,n)=>(v(),X(c(Ko),{id:"my-chart-id",options:e.options,data:e.data,plugins:[c(pi)]},null,8,["options","data","plugins"]))}}),gi={class:"text-h6 mb-4"},vi={class:"font-weight-medium"},xi={class:"text-right"},wi={class:"text-h6 mb-4"},ki={class:"font-weight-medium"},_i={class:"text-right"},Mi={class:"text-h6 mb-2"},Si={class:"d-flex flex-wrap"},Ci={class:"font-weight-medium mr-1"},Ri=le({__name:"TheCationsAndAnions",props:{remineral:{}},setup(t){const{t:e}=ge(),n=t,o=j(()=>{const i=Object.entries(n.remineral.cations).filter(([,d])=>d[0]>0);i.sort((d,u)=>u[1][0]-d[1][0]);const s=i.map(([d])=>d),l=i.map(([,d])=>d[1]);return{datasets:[{backgroundColor:["#4db6ac","#ff8a65","#64B5F6"],data:l,datalabels:{color:"white",font:{size:20},formatter:function(d,u){return s[u.dataIndex]}}}]}}),r=j(()=>{const i=Object.entries(n.remineral.anions).filter(([,d])=>d[0]>0);i.sort((d,u)=>u[1][0]-d[1][0]);const s=i.map(([d])=>d),l=i.map(([,d])=>d[1]);return{datasets:[{backgroundColor:["#4db6ac","#ff8a65","#64B5F6"],data:l,datalabels:{color:"white",font:{size:20},formatter:function(d,u){return s[u.dataIndex]}}}]}}),a=j(()=>({responsive:!0,maintainAspectRatio:!0}));return(i,s)=>{const l=bi;return v(),X(pt,null,{default:R(()=>[w(G,{cols:"12",class:"text-h6 text-center"},{default:R(()=>[O(" TDS ~"+x(("format"in i?i.format:c(A))(i.remineral.tds))+" ppm ",1)]),_:1}),w(G,{cols:"5",sm:"2"},{default:R(()=>[y("div",gi,x(c(e)("reminerals.page.cations")),1),y("div",null,[(v(!0),_(D,null,W(i.remineral.cations,(d,u)=>(v(),_("div",{key:u,class:"d-flex justify-space-between mb-3 text-body-2"},[y("div",vi,x(u),1),y("div",xi,[y("div",null,x(("format"in i?i.format:c(A))(d[0]*100))+"%",1),y("div",null,x(("format"in i?i.format:c(A))(d[1]))+", "+x(c(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(G,{cols:"7",sm:"4"},{default:R(()=>[w(l,{data:c(o),options:c(a)},null,8,["data","options"])]),_:1}),w(G,{cols:"5",sm:"2"},{default:R(()=>[y("div",wi,x(c(e)("reminerals.page.anions")),1),y("div",null,[(v(!0),_(D,null,W(i.remineral.anions,(d,u)=>(v(),_("div",{key:u,class:"d-flex justify-space-between mb-3 text-body-2"},[y("div",ki,x(u),1),y("div",_i,[y("div",null,x(("format"in i?i.format:c(A))(d[0]*100))+"%",1),y("div",null,x(("format"in i?i.format:c(A))(d[1]))+", "+x(c(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(G,{cols:"7",sm:"4"},{default:R(()=>[w(l,{data:c(r),options:c(a)},null,8,["data","options"])]),_:1}),w(G,{cols:"12"},{default:R(()=>[y("div",Mi,x(c(e)("reminerals.page.ionsTotal")),1),y("div",Si,[(v(!0),_(D,null,W(("sortObject"in i?i.sortObject:c(cn))(i.remineral.concentrationInChangeWater),([d,u])=>(v(),_("span",{key:d,class:"mr-2"},[y("span",Ci,x(d)+":",1),y("span",null,x(("format"in i?i.format:c(A))(u/i.remineral.tds*100))+"%",1)]))),128))])]),_:1})]),_:1})}}}),Pi={key:1,class:"text-left"},Ai={key:1},Ti={key:1},Vi={class:"d-flex align-center"},Ei={style:{width:"40px"}},Di={style:{width:"40px"}},Ii={class:"d-flex align-center",style:{width:"60px"}},Oi=le({name:"TheRemineralsRecipesTable",__name:"TheRemineralsRecipesTable",props:{remineral:{},reagents:{}},setup(t){const{t:e}=ge(),n=t,o=[{gh:1,volume:10},{gh:6,volume:10},{gh:8,volume:10}],r=L(null),a=L(null),i=L(n.remineral.changeVolume),s=j(()=>n.reagents.map(g=>g.key));function l(g,C){const T=n.remineral.gh/g,k=n.remineral.changeVolume/C,m=T*k,E={total:0};return n.reagents.forEach(z=>{E[z.key]=z.amount/m,E.total+=z.amount/m}),E}function d(g,C){return n.remineral.doseVolume*(C/n.remineral.changeVolume)*(g/n.remineral.gh)}function u(g){return n.remineral.kh/n.remineral.gh*g}function f(g){return n.remineral.gh/n.remineral.kh*g}function p(g){a.value=u(g)}function S(g){r.value=f(g)}function M(g){i.value=g}return(g,C)=>{const T=nt;return v(),X(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[g.remineral.isDry?(v(),_(D,{key:0},[(v(!0),_(D,null,W(c(s),k=>(v(),_("th",{key:k,class:"text-left"},x(k),1))),128)),C[3]||(C[3]=y("th",null," Ð¡ÑƒÐ¼Ð¼Ð° ",-1))],64)):(v(),_("th",Pi," ÐžÐ±ÑŠÐµÐ¼ Ñ€ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð°, Ð¼Ð» ")),C[4]||(C[4]=y("th",{class:"text-left"}," Gh/Kh ",-1)),C[5]||(C[5]=y("th",{class:"text-left"}," ÐžÐ±ÑŠÐµÐ¼ ",-1))])]),y("tbody",null,[(v(),_(D,null,W(o,(k,m)=>y("tr",{key:m},[g.remineral.isDry?(v(),_(D,{key:0},[(v(!0),_(D,null,W(c(s),E=>(v(),_("td",{key:E},x(("format"in g?g.format:c(A))(l(k.gh,k.volume)[E]))+" Ð³ ",1))),128)),y("td",null,x(("format"in g?g.format:c(A))(l(k.gh,k.volume).total))+" Ð³ ",1)],64)):(v(),_("td",Ai,x(("format"in g?g.format:c(A))(d(k.gh,k.volume)))+" Ð¼Ð» ",1)),y("td",null,x(("format"in g?g.format:c(A))(k.gh))+" / "+x(("format"in g?g.format:c(A))(u(k.gh))),1),y("td",null,x(k.volume)+" Ð»",1)])),64)),y("tr",null,[g.remineral.isDry?(v(),_(D,{key:0},[(v(!0),_(D,null,W(c(s),k=>(v(),_("td",{key:k},x(("format"in g?g.format:c(A))(l(c(r),c(i))[k]))+" Ð³ ",1))),128)),y("td",null,x(("format"in g?g.format:c(A))(l(c(r),c(i)).total))+" Ð³ ",1)],64)):(v(),_("td",Ti,x(("format"in g?g.format:c(A))(d(c(r),c(i))))+" Ð¼Ð» ",1)),y("td",null,[y("div",Vi,[y("div",Ei,[w(T,{modelValue:c(r),"onUpdate:modelValue":[C[0]||(C[0]=k=>ne(r)?r.value=k:null),p],modelModifiers:{number:!0},placeholder:"Gh",class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue"])]),C[6]||(C[6]=y("div",{class:"mx-2"}," / ",-1)),y("div",Di,[w(T,{modelValue:c(a),"onUpdate:modelValue":[C[1]||(C[1]=k=>ne(a)?a.value=k:null),S],modelModifiers:{number:!0},placeholder:"Kh",disabled:c(a)===0,class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","disabled"])])])]),y("td",null,[y("div",Ii,[w(T,{modelValue:c(i),"onUpdate:modelValue":[C[2]||(C[2]=k=>ne(i)?i.value=k:null),M],modelModifiers:{number:!0},suffix:c(e)("units.l"),class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","suffix"])])])])])]),_:1})}}}),ji={class:"d-flex align-end mb-2"},$i={class:"mr-2 mb-1"},Li={style:{width:"60px"}},Wi={class:"ml-4 mb-1"},zi=le({name:"TheRemineralsCompoundsTable",__name:"TheRemineralsMixTable",props:{remineral:{}},setup(t){const{t:e}=ge(),n=L(100);return(o,r)=>{const a=nt;return v(),_("div",null,[y("div",ji,[y("div",$i,x(c(e)("reminerals.page.mix.t1")),1),y("div",Li,[w(a,{modelValue:c(n),"onUpdate:modelValue":r[0]||(r[0]=i=>ne(n)?n.value=i:null),suffix:c(e)("units.g"),"hide-details":"auto",class:"mt-0 pt-0"},null,8,["modelValue","suffix"])]),r[1]||(r[1]=O(" , ")),y("div",Wi,x(c(e)("reminerals.page.mix.t2")),1)]),w(St,null,{default:R(()=>[y("thead",null,[y("tr",null,[(v(!0),_(D,null,W(o.remineral.reagents,i=>(v(),_("th",{key:i.key,class:"text-left"},x(i.key),1))),128))])]),y("tbody",null,[y("tr",null,[(v(!0),_(D,null,W(o.remineral.reagents,i=>(v(),_("td",{key:i.key},x(("format"in o?o.format:c(A))(i.amount/o.remineral.totalMass*c(n)))+" Ð³ ",1))),128))])])]),_:1})])}}}),qn=[{reagents:[{key:"CaSO4(H2O)2",amount:1.28},{key:"MgSO4(H2O)7",amount:1.88}],changeVolume:10,name:"Kuban Aquariums Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð²Ð·ÑÑ‚ Ñ youtube ÐºÐ°Ð½Ð°Ð»Ð° Kuban Aquariums (https://www.youtube.com/watch?v=KQE7l637Rd8)"},{reagents:[{key:"CaSO4(H2O)2",amount:1.253},{key:"MgSO4(H2O)7",amount:.844}],changeVolume:10,name:"Samomes Gh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaCO3",amount:.708},{key:"MgSO4(H2O)7",amount:.895}],changeVolume:10,name:"Samomes Gh/Kh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaCO3",amount:.357},{key:"CaSO4(H2O)2",amount:.641},{key:"MgSO4(H2O)7",amount:.84}],changeVolume:10,name:"Samomes Gh/Kh-",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaSO4(H2O)2",amount:5},{key:"MgSO4(H2O)7",amount:7},{key:"CaCl2",amount:3},{key:"K2CO3",amount:.5},{key:"NaHCO3",amount:1}],changeVolume:10,name:"Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ"},{reagents:[{key:"CaCO3",amount:.714},{key:"CaSO4(H2O)2",amount:.395},{key:"MgSO4(H2O)7",amount:1.196}],changeVolume:10,name:"Samomes Gh8/Kh4",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¡ÐµÑ€ÐµÐ³Ð¸ Ð•Ñ„Ñ€ÐµÐ¼Ð¾Ð²Ð° ;)"}];qn.sort((t,e)=>t.name.localeCompare(e.name));const Hi={class:"text-h6 text-sm-h5"},Ni={class:"text-subtitle-1"},Bi={class:"text-h6 text-md-h5"},Xi={class:"text-subtitle-1"},Yi={class:"text-body-2 text-grey-darken-1 mb-2"},Ui={key:0},Gi={class:"d-flex ml-4"},Fi={style:{width:"40px"}},qi={style:{width:"40px"}},Ki={key:0},Ji=1,Hs=le({__name:"[id]",setup(t){const{t:e}=ge(),{appRoutes:n}=Qo(),o=Vo(),r=Eo(),{required:a,positive:i}=Zo(),s=er(),l=tr(),{getReagents:d}=nr(),u=L(null),f=L([]),p=ht({}),S=ht({}),M=L({}),g=L(null),C=L(null),T=L(null),k=L(null),m=ht(new or({name:"",description:"",reagents:[],changeVolume:10,doseVolume:10})),E=d(Ji),z=j(()=>f.value.length>0),Kn=j(()=>f.value.some(h=>h.isLiquid)),It=j(()=>m.totalMass>0),Ot=j(()=>Object.values(M.value).some(h=>h===!0));function Q(){Object.entries(m.ghPerReagent).forEach(([h,b])=>{p[h]=A(b)})}function Z(){Object.entries(m.khPerReagent).forEach(([h,b])=>{S[h]=A(b)})}function Y(){g.value=A(m.gh)}function N(){C.value=A(m.kh)}function B(){T.value=A(m.caMgRatio)}function ut(){m.reagents.forEach(h=>{const b=f.value.find(V=>V.key===h.key);b.amount=A(h.amount)})}function Jn(h){h&&(m.doseVolume=h,Q(),Z(),Y(),N(),B())}function Qn(h){h&&(m.changeVolume=h,Q(),Z(),Y(),N(),B())}Do(f,()=>{if(!m.name&&f.value.length===1){const h=f.value[0];m.name=h.text}});function Zn(h){h.length>f.value.length&&typeof[...h].pop()=="string"||(f.value=h,m.reagents=[...f.value].map(b=>new Ht(b)),Q(),Z(),Y(),N(),B())}function eo(h){M.value[h]=!M.value[h]}function to(h,b){m.setReagentAmount(h,b);const V=f.value.find(ee=>ee.key===b);V.amount=h,p[b]=A(m.ghPerReagent[b]),S[b]=A(m.khPerReagent[b]),Y(),N(),B()}function no(h,b){const V=m.countReagentAmountByGh(b,h);m.setReagentAmount(V,b.key),p[b.key]=h,b.amount=A(V),S[b.key]=A(m.khPerReagent[b.key]),Y(),N(),B()}function oo(h,b){const V=m.countReagentAmountByKh(b,h);m.setReagentAmount(V,b.key),S[b.key]=h,b.amount=A(V),p[b.key]=A(m.ghPerReagent[b.key]),Y(),N(),B()}function ro(h){h&&(m.updateReagentAmountsByGh(h,M.value),g.value=h,Q(),Z(),N(),B(),ut())}function ao(h){h&&(m.updateReagentAmountsByKh(h),C.value=h,Q(),Z(),Y(),B(),ut())}function io(h){h&&(m.updateReagentAmountsByGhAndCaMgRatio(g.value,h),T.value=h,Q(),Z(),N(),ut())}function jt(h){m.name=h.name,m.description=h.description,m.changeVolume=h.changeVolume,m.doseVolume=h.doseVolume}const so=h=>{if(typeof h=="string"||h===null){k.value=h;return}f.value=[],m.reagents=[],h.reagents.forEach(({key:b,amount:V})=>{const ee=E.find(Ye=>Ye.key===b);ee&&(ee.amount=V,f.value.push(ee),m.reagents.push(ee))}),jt(h),Y(),N(),B(),Q(),Z()},{checkName:lo}=rr(),We=j(()=>o.params.id==="create"),ct=j(()=>o.params.id!=="create"),ze=j(()=>o.query.copy!==void 0),ke=j(()=>o.params.query==="share"),He=L(!1),Ne=L(!1),Be=L(!1),Xe=j(()=>+o.params.id),uo=j(()=>lo(m.name)&&!ct.value),co=()=>!uo.value||e("reminerals.page.message.nameExists"),fo=h=>m.isLiquid&&h.amount/m.totalVolume*1e3>h.solubility,ho=h=>m.isLiquid&&h.amount/m.totalVolume*1e3>h.solubility?`${e("validation.solubilityLimit")} - ${h.solubility} ${e("units.g/l")} ${e("common.for")} 25Â°Ð¡!`:"";Io(async()=>{if(We.value&&!ze.value)return;let h;if(ke.value)[h]=JSON.parse(decodeURIComponent(o.params.query));else if(ze.value){const V=o.query.copy;h=JSON.parse(JSON.stringify({...l.remineralRecipes[+V]}))}else ct.value&&(h=JSON.parse(JSON.stringify({...l.remineralRecipes[+Xe.value]})));if(Object.keys(h).length===0){await r.push(n.value.reminerals.path);return}const b={};h.reagents.forEach(V=>{b[V.key]=V}),E.forEach(V=>{V.key in b&&(V.amount=b[V.key].amount,m.reagents.push(V),f.value.push(new Ht({...V.toJson(),amount:A(V.amount)})))}),jt(h),Y(),N(),B(),Q(),Z()});async function mo(){const{valid:h}=await u.value.validate();if(!h){s.showWarning(e("common.isFormErrors"));return}l.addRemineral({...m.toJson()}),s.show(e("reminerals.page.message.add")),await r.push(n.value.reminerals.path)}async function yo(){const{valid:h}=await u.value.validate();if(!h){s.showWarning(e("common.isFormErrors"));return}l.editRemineral({index:+Xe.value,remineral:{...m.toJson()}}),s.show(e("reminerals.page.message.edit")),await r.push(n.value.reminerals.path)}async function po(){l.removeRemineral(+Xe.value),s.show(e("reminerals.page.message.remove")),await r.push(n.value.reminerals.path)}async function bo(){s.show(e("reminerals.page.message.copy")),await r.push(`${n.value.reminerals.path}create/?copy=${Xe.value}`)}return Oo({title:"Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€"}),(h,b)=>{const V=Mo,ee=So,Ye=Co,_e=Po,ft=nt,go=Ao,vo=pr,xo=wr,wo=Ri,ko=Oi,_o=zi;return v(),X(Jo,{class:"mb-12"},{default:R(()=>[w(pt,null,{default:R(()=>[w(V,{path:c(n).reminerals.path},{default:R(()=>[!c(We)&&!c(ke)?(v(),X(Ge,{key:0,color:"primary",class:"ml-auto",size:"small",onClick:bo},{default:R(()=>[O(x(c(e)("buttons.copy")),1)]),_:1})):U("",!0)]),_:1},8,["path"]),w(ee,null,{default:R(()=>[c(We)&&!c(ze)?(v(),_(D,{key:0},[O(x(c(e)("reminerals.page.titleNew")),1)],64)):c(ze)?(v(),_(D,{key:1},[y("div",Hi,x(c(e)("reminerals.page.titleNew"))+" "+x(c(m).name),1),y("div",Ni,x(c(e)("reminerals.page.subtitleCopy")),1)],64)):c(ke)?(v(),_(D,{key:2},[y("p",Bi,x(c(e)("reminerals.page.titleShare")),1),y("p",Xi,x(c(e)("reminerals.page.subtitleShare")),1)],64)):(v(),_(D,{key:3},[O(x(c(m).name),1)],64))]),_:1}),w(G,{cols:"12",md:"8","offset-md":"2"},{default:R(()=>[w(Ro,{ref_key:"remineralFormRef",ref:u},{default:R(()=>[y("div",Yi,x(c(e)("reminerals.page.reagentsHint")),1),w(Ye,{"model-value":c(f),items:c(E),"item-title":"text",label:c(e)("common.reagents"),hint:"ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð½Ð°Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº",variant:"underlined",multiple:"","persistent-hint":"","hide-details":"auto","validate-on-blur":"",chips:"","closable-chips":"",rules:[c(a)],class:"mb-2","onUpdate:modelValue":Zn},null,8,["model-value","items","label","rules"]),w(Ye,{modelValue:c(k),"onUpdate:modelValue":[b[0]||(b[0]=P=>ne(k)?k.value=P:null),so],items:"REMINERAL_RECIPES"in h?h.REMINERAL_RECIPES:c(qn),"item-title":"name",variant:"underlined",label:c(e)("common.recipes"),hint:c(e)("reminerals.page.recipesHint"),"persistent-hint":"","hide-details":"auto"},null,8,["modelValue","items","label","hint"]),w(he,null,{default:R(()=>[c(z)?(v(),_("div",Ui,[w(_e,{class:"mt-10 mb-3"},{default:R(()=>[O(x(c(e)("common.reagents")),1)]),_:1}),(v(!0),_(D,null,W(c(f),P=>(v(),_("div",{key:P.key,class:"d-flex mb-4"},[w(ft,{"model-value":P.amount,label:P.text,suffix:P.isLiquid?c(e)("units.ml"):c(e)("units.g"),"hide-details":"auto",disabled:c(M)[P.key],rules:[c(a),c(i)],error:fo(P),"error-messages":ho(P),"onUpdate:modelValue":fe=>to(fe,P.key)},null,8,["model-value","label","suffix","disabled","rules","error","error-messages","onUpdate:modelValue"]),y("div",Gi,[y("div",Fi,[w(ft,{"model-value":c(p)[P.key],label:"Gh",class:"mt-0 pt-0","hide-details":"auto",disabled:c(p)[P.key]===null||c(M)[P.key],"onUpdate:modelValue":fe=>no(fe,P)},null,8,["model-value","disabled","onUpdate:modelValue"])]),b[7]||(b[7]=y("div",{class:"mx-2 align-self-end mb-1"}," / ",-1)),y("div",qi,[w(ft,{"model-value":c(S)[P.key],label:"Kh",class:"mt-0 pt-0","hide-details":"auto",disabled:c(S)[P.key]===null||c(M)[P.key],"onUpdate:modelValue":fe=>oo(fe,P)},null,8,["model-value","disabled","onUpdate:modelValue"])]),w(go,{name:`mdi:${c(M)[P.key]?"lock":"lock-open-variant"}`,size:"24",class:"mt-3 ml-2 align-self-center mr-2 cursor-pointer text-grey-darken-1",onClick:fe=>eo(P.key)},null,8,["name","onClick"])])]))),128)),w(vo,{"change-volume":c(m).changeVolume,"dose-volume":c(m).doseVolume,gh:c(g),kh:c(C),"ca-mg-ratio":c(T),remineral:c(m),"kh-disabled":c(Ot),"ca-mg-ratio-disabled":c(Ot),class:"mt-4","onUpdate:changeVolume":Qn,"onUpdate:doseVolume":Jn,"onUpdate:gh":ro,"onUpdate:kh":ao,"onUpdate:caMgRatio":io},null,8,["change-volume","dose-volume","gh","kh","ca-mg-ratio","remineral","kh-disabled","ca-mg-ratio-disabled"]),w(he,null,{default:R(()=>[c(It)?(v(),_("div",Ki,[w(_e,{modelValue:c(He),"onUpdate:modelValue":b[1]||(b[1]=P=>ne(He)?He.value=P:null),class:"my-4",button:""},{default:R(()=>[O(" ÐšÐ¾Ð½Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ñ†Ð¸Ñ "+x(c(m).isLiquid?"Ñ€Ð°ÑÑ‚Ð²Ð¾Ñ€Ð°":"ÑÐ¼ÐµÑÐ¸"),1)]),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[c(He)?(v(),X(xo,{key:0,remineral:c(m),class:"mb-10"},null,8,["remineral"])):U("",!0)]),_:1}),w(_e,{class:"mt-10 mb-3"},{default:R(()=>b[8]||(b[8]=[O(" ÐšÐ¾Ð½Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ñ†Ð¸Ñ Ð² Ð¿Ð¾Ð´Ð¼ÐµÐ½Ð½Ð¾Ð¹ Ð²Ð¾Ð´Ðµ ")])),_:1}),w(wo,{remineral:c(m),class:"mt-4"},null,8,["remineral"]),w(_e,{modelValue:c(Ne),"onUpdate:modelValue":b[2]||(b[2]=P=>ne(Ne)?Ne.value=P:null),class:"my-4",button:""},{default:R(()=>b[9]||(b[9]=[O(" Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ñ Ð½Ð°Ð²ÐµÑÐºÐ°Ð¼Ð¸ ")])),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[c(Ne)?(v(),X(ko,{key:0,remineral:c(m),reagents:c(f)},null,8,["remineral","reagents"])):U("",!0)]),_:1}),!c(m).isLiquid&&!c(Kn)?(v(),_(D,{key:0},[w(_e,{modelValue:c(Be),"onUpdate:modelValue":b[3]||(b[3]=P=>ne(Be)?Be.value=P:null),class:"mt-10 mb-3",button:""},{default:R(()=>[O(x(c(e)("reminerals.page.mix.title")),1)]),_:1},8,["modelValue"]),w(he,null,{default:R(()=>[c(Be)?(v(),X(_o,{key:0,remineral:c(m)},null,8,["remineral"])):U("",!0)]),_:1})],64)):U("",!0)])):U("",!0)]),_:1})])):U("",!0)]),_:1}),w(he,null,{default:R(()=>[c(It)?(v(),X(pt,{key:0,class:"mt-4"},{default:R(()=>[w(G,{cols:"12"},{default:R(()=>[w(ir,{modelValue:c(m).name,"onUpdate:modelValue":b[4]||(b[4]=P=>c(m).name=P),label:c(e)("reminerals.page.name"),hint:c(e)("reminerals.page.nameHint"),variant:"underlined","hide-details":"auto",rules:[c(a),co],class:"mb-4"},null,8,["modelValue","label","hint","rules"]),w(ar,{modelValue:c(m).description,"onUpdate:modelValue":b[5]||(b[5]=P=>c(m).description=P),label:c(e)("reminerals.page.description"),hint:c(e)("reminerals.page.descriptionHint"),variant:"underlined","hide-details":"auto","auto-grow":"",rows:"1"},null,8,["modelValue","label","hint"])]),_:1}),w(G,{class:"d-flex mt-10",cols:"12"},{default:R(()=>[c(ct)&&!c(ke)?(v(),X(Ge,{key:0,color:"error",onClick:po},{default:R(()=>[O(x(c(e)("buttons.remove")),1)]),_:1})):U("",!0),w(Ge,{class:"ml-auto",onClick:b[6]||(b[6]=P=>h.$router.push(c(n).reminerals.path))},{default:R(()=>[O(x(c(e)("buttons.cancel")),1)]),_:1}),w(Ge,jo({color:"primary",class:"ml-2"},$o(c(We)||c(ke)?{click:mo}:{click:yo})),{default:R(()=>[O(x(c(e)("buttons.save")),1)]),_:1},16)]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}});export{Hs as default};
