import{q as B,O as q,E as f,r as O,D,R as L,av as he,a1 as P,f as F,Y as ze,ap as Me,bt as Ue,af as pe,ac as be,bu as $e,e as Se,u as De,m as H,s as Ve,a7 as ae,aw as xe,y as U,bv as je,b as g,I as Y,N as Je,a8 as oe,au as Ye,a6 as qe,ae as ke,M as Fe,b8 as Ge,h as Ke,o as We,j as ue,z as Ze,w as Q,a as ee,d as re,aa as Te,P as te,Q as Xe,ag as Qe}from"./C4AY6iDY.js";import{u as et,b as ce,c as tt}from"./C_viBdnf.js";import{f as at}from"./B931MWyl.js";import{j as ot,C as nt,o as lt,q as Ie,l as st,x as we,D as it,E as ut,t as rt,f as ct,c as J,V as ve,n as vt,p as dt,y as mt,z as ft}from"./_MrG4Qzc.js";import{a as z,c as G,m as ne,e as gt,u as yt,b as ht}from"./C1PmHpO2.js";import{u as pt}from"./DknDYpsM.js";import{u as bt}from"./Bht1taiZ.js";import{u as St}from"./IiSMleoJ.js";import{u as Vt}from"./CY94b49y.js";import{u as xt}from"./XRdpvuJH.js";import{H as de,R as me}from"./BQGgX5ID.js";import{a as kt}from"./CusXBXJr.js";import{V as Tt}from"./qzx_-4Xp.js";import{u as _e}from"./D_YM2NF9.js";const j=Symbol.for("vuetify:layout"),Pe=Symbol.for("vuetify:layout-item"),fe=1e3,It=B({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),wt=B({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Ce(){const e=q(j);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function _t(e){const l=q(j);if(!l)throw new Error("[Vuetify] Could not find injected layout");const t=e.id??`layout-item-${ze()}`,a=he("useLayoutItem");be(Pe,{id:t});const s=P(!1);Me(()=>s.value=!0),Ue(()=>s.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:u}=l.register(a,{...e,active:f(()=>s.value?!1:e.active.value),id:t});return pe(()=>l.unregister(t)),{layoutItemStyles:o,layoutRect:l.layoutRect,layoutItemScrimStyles:u}}const Pt=(e,l,t,a)=>{let s={top:0,left:0,right:0,bottom:0};const o=[{id:"",layer:{...s}}];for(const u of e){const n=l.get(u),r=t.get(u),m=a.get(u);if(!n||!r||!m)continue;const v={...s,[n.value]:parseInt(s[n.value],10)+(m.value?parseInt(r.value,10):0)};o.push({id:u,layer:v}),s=v}return o};function Ct(e){const l=q(j,null),t=f(()=>l?l.rootZIndex.value-100:fe),a=O([]),s=D(new Map),o=D(new Map),u=D(new Map),n=D(new Map),r=D(new Map),{resizeRef:m,contentRect:v}=ot(),i=f(()=>{const S=new Map,w=e.overlaps??[];for(const p of w.filter(I=>I.includes(":"))){const[I,k]=p.split(":");if(!a.value.includes(I)||!a.value.includes(k))continue;const y=s.get(I),_=s.get(k),C=o.get(I),E=o.get(k);!y||!_||!C||!E||(S.set(k,{position:y.value,amount:parseInt(C.value,10)}),S.set(I,{position:_.value,amount:-parseInt(E.value,10)}))}return S}),h=f(()=>{const S=[...new Set([...u.values()].map(p=>p.value))].sort((p,I)=>p-I),w=[];for(const p of S){const I=a.value.filter(k=>{var y;return((y=u.get(k))==null?void 0:y.value)===p});w.push(...I)}return Pt(w,s,o,n)}),x=f(()=>!Array.from(r.values()).some(S=>S.value)),c=f(()=>h.value[h.value.length-1].layer),b=f(()=>({"--v-layout-left":L(c.value.left),"--v-layout-right":L(c.value.right),"--v-layout-top":L(c.value.top),"--v-layout-bottom":L(c.value.bottom),...x.value?void 0:{transition:"none"}})),V=f(()=>h.value.slice(1).map((S,w)=>{let{id:p}=S;const{layer:I}=h.value[w],k=o.get(p),y=s.get(p);return{id:p,...I,size:Number(k.value),position:y.value}})),N=S=>V.value.find(w=>w.id===S),d=he("createLayout"),T=P(!1);F(()=>{T.value=!0}),be(j,{register:(S,w)=>{let{id:p,order:I,position:k,layoutSize:y,elementSize:_,active:C,disableTransitions:E,absolute:Be}=w;u.set(p,I),s.set(p,k),o.set(p,y),n.set(p,C),E&&r.set(p,E);const le=$e(Pe,d==null?void 0:d.vnode).indexOf(S);le>-1?a.value.splice(le,0,p):a.value.push(p);const se=f(()=>V.value.findIndex($=>$.id===p)),K=f(()=>t.value+h.value.length*2-se.value*2),Ee=f(()=>{const $=k.value==="left"||k.value==="right",W=k.value==="right",Oe=k.value==="bottom",Z=_.value??y.value,He=Z===0?"%":"px",ie={[k.value]:0,zIndex:K.value,transform:`translate${$?"X":"Y"}(${(C.value?0:-(Z===0?100:Z))*(W||Oe?-1:1)}${He})`,position:Be.value||t.value!==fe?"absolute":"fixed",...x.value?void 0:{transition:"none"}};if(!T.value)return ie;const R=V.value[se.value];if(!R)throw new Error(`[Vuetify] Could not find layout item "${p}"`);const X=i.value.get(p);return X&&(R[X.position]+=X.amount),{...ie,height:$?`calc(100% - ${R.top}px - ${R.bottom}px)`:_.value?`${_.value}px`:void 0,left:W?void 0:`${R.left}px`,right:W?`${R.right}px`:void 0,top:k.value!=="bottom"?`${R.top}px`:void 0,bottom:k.value!=="top"?`${R.bottom}px`:void 0,width:$?_.value?`${_.value}px`:void 0:`calc(100% - ${R.left}px - ${R.right}px)`}}),Le=f(()=>({zIndex:K.value-1}));return{layoutItemStyles:Ee,layoutItemScrimStyles:Le,zIndex:K}},unregister:S=>{u.delete(S),s.delete(S),o.delete(S),n.delete(S),r.delete(S),a.value=a.value.filter(w=>w!==S)},mainRect:c,mainStyles:b,getLayoutItem:N,items:V,layoutRect:v,rootZIndex:t});const A=f(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),M=f(()=>({zIndex:l?t.value:void 0,position:l?"relative":void 0,overflow:l?"hidden":void 0}));return{layoutClasses:A,layoutStyles:M,getLayoutItem:N,items:V,layoutRect:v,layoutRef:m}}const ge={webManifest:{href:"/manifest.webmanifest"}},aa=Se({async setup(){if(ge){const e=O({link:[]});De(e);const{webManifest:l}=ge;if(l){const{href:t}=l;e.value.link.push({rel:"manifest",href:t})}}return()=>null}});function Rt(e){const l=P(e());let t=-1;function a(){clearInterval(t)}function s(){a(),qe(()=>l.value=e())}function o(u){const n=u?getComputedStyle(u):{transitionDuration:.2},r=parseFloat(n.transitionDuration)*1e3||200;if(a(),l.value<=0)return;const m=performance.now();t=window.setInterval(()=>{const v=performance.now()-m+r;l.value=Math.max(e()-v,0),l.value<=0&&a()},r)}return Ye(a),{clear:a,time:l,start:o,reset:s}}const Nt=B({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ut({location:"bottom"}),...it(),...we(),...st(),...oe(),...Je(tt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),At=H()({name:"VSnackbar",props:Nt(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const a=Ve(e,"modelValue"),{positionClasses:s}=nt(e),{scopeId:o}=et(),{themeClasses:u}=ae(e),{colorClasses:n,colorStyles:r,variantClasses:m}=lt(e),{roundedClasses:v}=Ie(e),i=Rt(()=>Number(e.timeout)),h=O(),x=O(),c=P(!1),b=P(0),V=O(),N=q(j,void 0);xe(()=>!!N,()=>{const y=Ce();ke(()=>{V.value=y.mainStyles.value})}),U(a,T),U(()=>e.timeout,T),F(()=>{a.value&&T()});let d=-1;function T(){i.reset(),window.clearTimeout(d);const y=Number(e.timeout);if(!a.value||y===-1)return;const _=je(x.value);i.start(_),d=window.setTimeout(()=>{a.value=!1},y)}function A(){i.reset(),window.clearTimeout(d)}function M(){c.value=!0,A()}function S(){c.value=!1,T()}function w(y){b.value=y.touches[0].clientY}function p(y){Math.abs(b.value-y.changedTouches[0].clientY)>50&&(a.value=!1)}function I(){c.value&&S()}const k=f(()=>e.location.split(" ").reduce((y,_)=>(y[`v-snackbar--${_}`]=!0,y),{}));return z(()=>{const y=ce.filterProps(e),_=!!(t.default||t.text||e.text);return g(ce,Y({ref:h,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},k.value,s.value,e.class],style:[V.value,e.style]},y,{modelValue:a.value,"onUpdate:modelValue":C=>a.value=C,contentProps:Y({class:["v-snackbar__wrapper",u.value,n.value,v.value,m.value],style:[r.value],onPointerenter:M,onPointerleave:S},y.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:w,onTouchend:p,onAfterLeave:I},o),{default:()=>{var C,E;return[rt(!1,"v-snackbar"),e.timer&&!c.value&&g("div",{key:"timer",class:"v-snackbar__timer"},[g(ct,{ref:x,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":i.time.value},null)]),_&&g("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((C=t.text)==null?void 0:C.call(t))??e.text,(E=t.default)==null?void 0:E.call(t)]),t.actions&&g(J,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[g("div",{class:"v-snackbar__actions"},[t.actions({isActive:a})])]})]},activator:t.activator})}),at({},h)}}),Bt={class:"d-flex flex-column flex-md-row align-md-center"},Et={class:"d-flex justify-space-between"},oa=Se({__name:"TheUpdateNotification",setup(e){const{mdAndUp:l}=Fe(),{$pwa:t}=Ge(),a=O(!1);F(async()=>{a.value=t.needRefresh});function s(){t.updateServiceWorker()}function o(){a.value=!1}return(u,n)=>(We(),Ke(At,{modelValue:ue(a),"onUpdate:modelValue":n[0]||(n[0]=r=>Ze(a)?a.value=r:null),timeout:"-1",location:ue(l)?"right":"bottom"},{default:Q(()=>[ee("div",Bt,[n[3]||(n[3]=ee("div",{class:"mb-4 mb-md-0"}," Доступно обновление ",-1)),ee("div",Et,[g(ve,{variant:"outlined",size:"small",class:"ml-md-2 mr-2",onClick:o},{default:Q(()=>n[1]||(n[1]=[re(" Позже ")])),_:1}),g(ve,{variant:"outlined",size:"small",onClick:s},{default:Q(()=>n[2]||(n[2]=[re(" Обновить ")])),_:1})])])]),_:1},8,["modelValue","location"]))}}),na=()=>{const e=pt(),l=bt(),t=St(),a=Vt(),{getReagents:s}=xt();function o(){if(e.isUpdated||(((JSON.parse(localStorage.getItem("udata"))||{}).tanks||[]).forEach(r=>{const m={name:r.name,volume:r.volume,waterChangePercent:r.waterChange,waterChangeVolume:r.waterChangeVolume,filterVolume:r.filter};e.addTank(m)}),e.setUpdated(!0)),!l.isUpdated){const n=(JSON.parse(localStorage.getItem("udata"))||{}).recipes||[],m=s(0),v=m.find(i=>i.key===de);n.forEach(i=>{const h={name:i.name,description:i.note,tankVolume:i.tankVolume,reagents:[]};i.volume&&(v.amount=i.volume,h.reagents.push(v.toJson())),Object.entries(i.mass).forEach(([x,c])=>{const b=m.find(V=>V.key===x);b instanceof me&&c&&(b.amount=c,h.reagents.push(b.toJson()))}),l.addRecipe(h)}),l.setUpdated(!0)}if(!a.isUpdated){const n=(JSON.parse(localStorage.getItem("udata"))||{}).reminerals||[],m=s(0),v=m.find(i=>i.key===de);n.forEach(i=>{const h={name:i.name,description:i.note,changeVolume:i.volume,doseVolume:i.doseVolume,totalVolume:i.substanceVolume,reagents:[]};i.substanceVolume&&(v.amount=i.substanceVolume,h.reagents.push(v.toJson())),Object.entries(i.mass).forEach(([x,c])=>{const b=m.find(V=>V.key===x);b instanceof me&&c&&(b.amount=c,h.reagents.push(b.toJson()))}),a.addRemineral(h)}),a.setUpdated(!0)}t.isUpdated||(((JSON.parse(localStorage.getItem("udata"))||{}).fertilizers||[]).forEach(r=>{const m={name:r.name,description:r.note,isPercent:r.isPercent,isLiquid:r.isLiluid||!0,ions:{}};Object.entries(r.elements).forEach(([v,i])=>{i&&(m.ions[v]=i)}),t.addFertilizer(m)}),t.setUpdated(!0))}return{copyOldData:o}},Lt=B({...G(),...It({fullHeight:!0}),...oe()},"VApp"),la=H()({name:"VApp",props:Lt(),setup(e,l){let{slots:t}=l;const a=ae(e),{layoutClasses:s,getLayoutItem:o,items:u,layoutRef:n}=Ct(e),{rtlClasses:r}=Te();return z(()=>{var m;return g("div",{ref:n,class:["v-application",a.themeClasses.value,s.value,r.value,e.class],style:[e.style]},[g("div",{class:"v-application__wrap"},[(m=t.default)==null?void 0:m.call(t)])])}),{getLayoutItem:o,items:u,theme:a}}}),Re=B({text:String,...G(),...ne()},"VToolbarTitle"),Ne=H()({name:"VToolbarTitle",props:Re(),setup(e,l){let{slots:t}=l;return z(()=>{const a=!!(t.default||t.text||e.text);return g(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[a&&g("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),Ot=[null,"prominent","default","comfortable","compact"],Ae=B({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ot.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ft(),...G(),...mt(),...we(),...ne({tag:"header"}),...oe()},"VToolbar"),ye=H()({name:"VToolbar",props:Ae(),setup(e,l){var x;let{slots:t}=l;const{backgroundColorClasses:a,backgroundColorStyles:s}=gt(te(e,"color")),{borderClasses:o}=vt(e),{elevationClasses:u}=dt(e),{roundedClasses:n}=Ie(e),{themeClasses:r}=ae(e),{rtlClasses:m}=Te(),v=P(!!(e.extended||(x=t.extension)!=null&&x.call(t))),i=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),h=f(()=>v.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Xe({VBtn:{variant:"text"}}),z(()=>{var N;const c=!!(e.title||t.title),b=!!(t.image||e.image),V=(N=t.extension)==null?void 0:N.call(t);return v.value=!!(e.extended||V),g(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,o.value,u.value,n.value,r.value,m.value,e.class],style:[s.value,e.style]},{default:()=>[b&&g("div",{key:"image",class:"v-toolbar__image"},[t.image?g(J,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):g(Tt,{key:"image-img",cover:!0,src:e.image},null)]),g(J,{defaults:{VTabs:{height:L(i.value)}}},{default:()=>{var d,T,A;return[g("div",{class:"v-toolbar__content",style:{height:L(i.value)}},[t.prepend&&g("div",{class:"v-toolbar__prepend"},[(d=t.prepend)==null?void 0:d.call(t)]),c&&g(Ne,{key:"title",text:e.title},{text:t.title}),(T=t.default)==null?void 0:T.call(t),t.append&&g("div",{class:"v-toolbar__append"},[(A=t.append)==null?void 0:A.call(t)])])]}}),g(J,{defaults:{VTabs:{height:L(h.value)}}},{default:()=>[g(kt,null,{default:()=>[v.value&&g("div",{class:"v-toolbar__extension",style:{height:L(h.value)}},[V])]})]})]})}),{contentHeight:i,extensionHeight:h}}}),Ht=B({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function zt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=l;let a=0,s=0;const o=O(null),u=P(0),n=P(0),r=P(0),m=P(!1),v=P(!1),i=f(()=>Number(e.scrollThreshold)),h=f(()=>Qe((i.value-u.value)/i.value||0)),x=()=>{const c=o.value;if(!c||t&&!t.value)return;a=u.value,u.value="window"in c?c.pageYOffset:c.scrollTop;const b=c instanceof Window?document.documentElement.scrollHeight:c.scrollHeight;if(s!==b){s=b;return}v.value=u.value<a,r.value=Math.abs(u.value-i.value)};return U(v,()=>{n.value=n.value||u.value}),U(m,()=>{n.value=0}),F(()=>{U(()=>e.scrollTarget,c=>{var V;const b=c?document.querySelector(c):window;b&&b!==o.value&&((V=o.value)==null||V.removeEventListener("scroll",x),o.value=b,o.value.addEventListener("scroll",x,{passive:!0}))},{immediate:!0})}),pe(()=>{var c;(c=o.value)==null||c.removeEventListener("scroll",x)}),t&&U(t,x,{immediate:!0}),{scrollThreshold:i,currentScroll:u,currentThreshold:r,isScrollActive:m,scrollRatio:h,isScrollingUp:v,savedScroll:n}}const Mt=B({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ae(),...wt(),...Ht(),height:{type:[Number,String],default:64}},"VAppBar"),sa=H()({name:"VAppBar",props:Mt(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const a=O(),s=Ve(e,"modelValue"),o=f(()=>{var T;const d=new Set(((T=e.scrollBehavior)==null?void 0:T.split(" "))??[]);return{hide:d.has("hide"),fullyHide:d.has("fully-hide"),inverted:d.has("inverted"),collapse:d.has("collapse"),elevate:d.has("elevate"),fadeImage:d.has("fade-image")}}),u=f(()=>{const d=o.value;return d.hide||d.fullyHide||d.inverted||d.collapse||d.elevate||d.fadeImage||!s.value}),{currentScroll:n,scrollThreshold:r,isScrollingUp:m,scrollRatio:v}=zt(e,{canScroll:u}),i=f(()=>o.value.hide||o.value.fullyHide),h=f(()=>e.collapse||o.value.collapse&&(o.value.inverted?v.value>0:v.value===0)),x=f(()=>e.flat||o.value.fullyHide&&!s.value||o.value.elevate&&(o.value.inverted?n.value>0:n.value===0)),c=f(()=>o.value.fadeImage?o.value.inverted?1-v.value:v.value:void 0),b=f(()=>{var A,M;if(o.value.hide&&o.value.inverted)return 0;const d=((A=a.value)==null?void 0:A.contentHeight)??0,T=((M=a.value)==null?void 0:M.extensionHeight)??0;return i.value?n.value<r.value||o.value.fullyHide?d+T:d:d+T});xe(f(()=>!!e.scrollBehavior),()=>{ke(()=>{i.value?o.value.inverted?s.value=n.value>r.value:s.value=m.value||n.value<r.value:s.value=!0})});const{ssrBootStyles:V}=_e(),{layoutItemStyles:N}=_t({id:e.name,order:f(()=>parseInt(e.order,10)),position:te(e,"location"),layoutSize:b,elementSize:P(void 0),active:s,absolute:te(e,"absolute")});return z(()=>{const d=ye.filterProps(e);return g(ye,Y({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...N.value,"--v-toolbar-image-opacity":c.value,height:void 0,...V.value},e.style]},d,{collapse:h.value,flat:x.value}),t)}),{}}}),ia=H()({name:"VAppBarTitle",props:Re(),setup(e,l){let{slots:t}=l;return z(()=>g(Ne,Y(e,{class:"v-app-bar-title"}),t)),{}}}),Ut=B({scrollable:Boolean,...G(),...ht(),...ne({tag:"main"})},"VMain"),ua=H()({name:"VMain",props:Ut(),setup(e,l){let{slots:t}=l;const{dimensionStyles:a}=yt(e),{mainStyles:s}=Ce(),{ssrBootStyles:o}=_e();return z(()=>g(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,o.value,a.value,e.style]},{default:()=>{var u,n;return[e.scrollable?g("div",{class:"v-main__scroller"},[(u=t.default)==null?void 0:u.call(t)]):(n=t.default)==null?void 0:n.call(t)]}})),{}}});export{la as V,aa as _,na as a,sa as b,ia as c,At as d,oa as e,ua as f,wt as m,_t as u};
