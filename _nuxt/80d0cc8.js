(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{707:function(e,t,n){"use strict";n.d(t,"h",(function(){return _})),n.d(t,"e",(function(){return I})),n.d(t,"k",(function(){return E})),n.d(t,"i",(function(){return O})),n.d(t,"g",(function(){return C})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"j",(function(){return N})),n.d(t,"m",(function(){return x})),n.d(t,"l",(function(){return S})),n.d(t,"n",(function(){return j})),n.d(t,"o",(function(){return P})),n.d(t,"f",(function(){return M}));n(10),n(13),n(15),n(16);var r=n(3),o=n(65),l=n(14),c=(n(4),n(12),n(263),n(198),n(11),n(33),n(45),n(29),n(32),n(262),n(199),n(706)),m=n(708),h=n(38),f=n(39),d=(n(24),n(48),n(34),n(79),n(55),function(){function e(t){Object(h.a)(this,e),this.formulaInit=t}return Object(f.a)(e,[{key:"mass",get:function(){var e=this,t=0;return Object.keys(this.composition).forEach((function(n){t+=c.a[n]*e.composition[n]})),t}},{key:"formula",get:function(){return e.replaceSupAndSub(this.formulaInit)}},{key:"composition",get:function(){var t=e.cleanParentheses(this.formula);return e.formulaToJson(t)}},{key:"simplifiedFormula",get:function(){return this.createSimplifiedFormula()}},{key:"createSimplifiedFormula",value:function(){var e="";return Object.entries(this.composition).forEach((function(t){var n=Object(l.a)(t,2),element=n[0],r=n[1];e+=element,1!==r&&(e+=r)})),e}}],[{key:"replaceSupAndSub",value:function(e){return e.replace(/[⁰¹²³⁴-⁹₀-₉]/g,(function(e){return e.charCodeAt(0).toString(16).slice(-1)}))}},{key:"isLowerCase",value:function(e){return/^[a-z]$/.test(e)}},{key:"isUpperCase",value:function(e){return/^[A-Z]$/.test(e)}},{key:"isNumber",value:function(e){return/^\d+$/.test(e)}},{key:"createComposition",value:function(e){var t={};return e.forEach((function(e){var n=Object(l.a)(e,2),element=n[0],r=n[1];element in t?t[element]+=+r:t[element]=+r})),t}},{key:"getParenthesisGroups",value:function(e){var t=[],n=[];return e.split("").forEach((function(e,r){"("===e&&t.push(r),")"===e&&n.push([t.pop(),r])})),n}},{key:"createElemList",value:function(t){var n=t.split(""),r="",o="",l=[];return n.forEach((function(t){0===r.length&&e.isUpperCase(t)?r=t:1===r.length&&e.isLowerCase(t)?r+=t:r.length>0&&(e.isNumber(t)?o+=t:e.isUpperCase(t)&&(0===o.length&&(o="1"),l.push([r,o]),r=t,o=""))})),0===o.length&&(o="1"),l.push([r,o]),l}},{key:"cleanParentheses",value:function(t){if(!t.includes("("))return t;for(var n=e.getParenthesisGroups(t)[0],r=Object(l.a)(n,2),o=r[0],c=r[1],m="",i=1;e.isNumber(t[c+i]);)m+=t[c+i],i+=1;0===m.length&&(m="1");var h=+m,f=t.substring(o+1,c),d=e.createElemList(f),v="";d.forEach((function(e){var t=Object(l.a)(e,2),element=t[0],n=t[1];v+=element,v+=n*h}));var T="(".concat(f,")");1!==h&&(T+=h);var _=t.replace(T,v);return e.cleanParentheses(_)}},{key:"formulaToJson",value:function(t){if(0===t.length)return{};var n=e.createElemList(t);return e.createComposition(n)}}]),e}());function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=function(e){var t={};return Object.values(e).forEach((function(e){Object.entries(e).forEach((function(e){var n=Object(l.a)(e,2),r=n[0],o=n[1];void 0===t[r]&&(t[r]=0),t[r]+=o}))})),t},I=function(e){var t=function(e){var t=0,n=m.a[e].ions;return Object.entries(n).forEach((function(e){var n=Object(l.a)(e,2),r=n[0],o=n[1];t+=c.a[r]*o.count})),t}(e),n={},r=m.a[e].ions;return Object.entries(r).forEach((function(e){var r=Object(l.a)(e,2),o=r[0],m=r[1];m.isNeeded&&(n[o]=c.a[o]*m.count/t)})),n},E=function(e){var t=!1;return Object.values(e).forEach((function(e){Object.keys(e).forEach((function(n){e[n]&&(t=!0)}))})),t},O=function(e){var t={};return Object.values(e).forEach((function(e){Object.keys(e).forEach((function(n){void 0===t[n]&&(t[n]=0),t[n]+=e[n]}))})),t},C=function(e){var t=0,n=O(e);return Object.keys(n).forEach((function(e){t+=n[e]})),t},y=function(e){var t,n=0;return Object(o.a)(e).forEach((function(e){n+=+e?c.a[t]*(parseInt(e,10)-1):c.a[e],t=e})),n},R={N:"NO3",NO3:"N",P:"PO4",PO4:"P",S:"SO4",SO4:"S"},A={NO3:"N",PO4:"P",P2O5:"P2",SO4:"S",K2O:"K2",MgO:"Mg",CaO:"Ca"},w=function(e){return R[e]||e},k=function(e){return w(e)!==e?y(w(e))/y(e):1},N=function(e){var t=new d(e).mass;return new d(A[e]).mass/t},x=function(e){return e.reagents&&e.reagents.length>0},S=function(e){return e.elements&&Object.keys(e.elements).length>0},j=function(){var filter=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return Object.entries(m.a).forEach((function(t){var n=Object(l.a)(t,2),r=n[0],data=n[1],o=!1;0!==filter.length?filter.forEach((function(element){r.includes(element)&&(o=!0)})):o=!0,o&&e.push(T({key:r,text:"".concat(data.name," - ").concat(r)},data))})),e.sort((function(a,b){return a.text.localeCompare(b.text)})),e},P=function(e,t){return e.sort((function(a,b){return a[t].localeCompare(b[t])})),e},M=function(e,t,n){var r=e[t],o=e[n];return r&&o?(r*k(t)/(o*k(n))).toFixed(2):"—"}},713:function(e,t,n){var content=n(726);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("0afac06e",content,!0,{sourceMap:!1})},718:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var r={CO3:60.01001,HCO3:61.01812},o={Mg:4.346,Ca:7.144},l=2.804},721:function(e,t,n){"use strict";n.r(t),n.d(t,"FERTILIZATION_EVERY_DAY",(function(){return m})),n.d(t,"FERTILIZATION_IN_TAP_WATER",(function(){return h})),n.d(t,"FERTILIZATION_MIX",(function(){return f}));var r=n(3),o=(n(23),n(4),n(12),n(11),n(10),n(13),n(15),n(16),n(707));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m=0,h=1,f=2,d={name:"FertilizersDoseTable",props:{fertilizationType:{type:Number,default:m},recipesSelected:{type:Array,default:function(){return[]}},days:{type:Number,default:1},waterChangeVolume:{type:Number,default:0},isFertilizationTypes:{type:Boolean,default:!0},isWaterChange:{type:Boolean,default:!0}},data:function(){return{FERTILIZATION_IN_TAP_WATER:h,FERTILIZATION_EVERY_DAY:m,FERTILIZATION_MIX:f,mode:[{text:"Ежедневно",value:!1},{text:"Всего",value:!0}],amountDayTotal:[]}},computed:{isTotal:{get:function(){return this.$store.state.schedule.isTotalMode},set:function(e){this.$store.commit("SCHEDULE_SET_TOTAL_MODE",e)}}},watch:{isTotal:function(e){var t=this;e&&this.recipesSelected.forEach((function(e,n){e.amountDay&&(t.amountDayTotal[n]=e.amountDay*t.days)}))}},methods:{isFertilizer:o.l,inputRecipeAmount:function(e,t){var n=this.recipesSelected[t],r=""!==e?+e:"";if(this.fertilizationType===h){var o=r/this.days;this.$emit("input",t,c(c({},n),{},{amount:r,amountDay:o}))}else this.fertilizationType===f&&this.$emit("input",t,c(c({},n),{},{amount:r}))},inputRecipeAmountDay:function(e,t){var n=this.recipesSelected[t],r=""!==e?+e:"";if(this.fertilizationType===m){var o=r*this.days;this.$emit("input",t,c(c({},n),{},{amount:o,amountDay:r}))}else this.fertilizationType===f&&this.$emit("input",t,c(c({},n),{},{amountDay:r}))},inputRecipeAmountDayTotal:function(e,t){var n=this.recipesSelected[t],r=""!==e?+e:"";this.amountDayTotal[t]=r;var o=r/this.days;if(this.fertilizationType===m){var l=r;this.$emit("input",t,c(c({},n),{},{amount:l,amountDay:o}))}else this.fertilizationType===f&&this.$emit("input",t,c(c({},n),{},{amountDay:o}))}}},v=(n(725),n(37)),T=n(46),_=n.n(T),I=n(684),E=n(733),O=n(734),C=n(739),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isFertilizationTypes?n("v-radio-group",{staticClass:"my-2",attrs:{value:e.fertilizationType,"hide-details":"auto",column:"xs"===e.$vuetify.breakpoint.name,row:"xs"!==e.$vuetify.breakpoint.name},on:{change:function(t){return e.$emit("change",t)}}},[n("v-radio",{attrs:{label:"Каждый день",value:0}}),e._v(" "),n("v-radio",{staticClass:"mt-1 mt-sm-0",attrs:{label:"В подменную воду",value:1}}),e._v(" "),n("v-radio",{staticClass:"mt-1 mt-sm-0",attrs:{label:"Комбинированная подача",value:2}})],1):e._e(),e._v(" "),[e.FERTILIZATION_IN_TAP_WATER,e.FERTILIZATION_MIX].includes(e.fertilizationType)&&e.isWaterChange?n("number-field",{staticClass:"mt-4",attrs:{value:e.waterChangeVolume,label:"Введите объем подмены",hint:"Это нужно для подсчета дозы на подмену"},on:{input:function(t){return e.$emit("water-change",+t)}}}):e._e(),e._v(" "),n("div",{staticClass:"d-flex mt-4"},[[e.FERTILIZATION_IN_TAP_WATER,e.FERTILIZATION_MIX].includes(e.fertilizationType)&&e.isFertilizationTypes?n("div",{staticClass:"text-subtitle-1 font-weight-medium w-60 pr-2",class:{"w-100":e.fertilizationType===e.FERTILIZATION_IN_TAP_WATER}},[n("span",{staticStyle:{position:"relative",top:"3px"}},[e.FERTILIZATION_IN_TAP_WATER===e.fertilizationType?[e._v("\n          Весь объем удобрений\n        ")]:[e._v("\n          Подмена\n        ")]],2),e._v(" "),n("v-divider",{staticClass:"mt-1"})],1):e._e(),e._v(" "),[e.FERTILIZATION_EVERY_DAY,e.FERTILIZATION_MIX].includes(e.fertilizationType)?n("div",{staticClass:"text-subtitle-1 w-40 font-weight-medium",class:{"w-100":e.fertilizationType===e.FERTILIZATION_EVERY_DAY}},[n("v-select",{staticClass:"mt-0 pt-0",attrs:{items:e.mode,"item-text":"text","item-value":"value","hide-details":"auto"},model:{value:e.isTotal,callback:function(t){e.isTotal=t},expression:"isTotal"}})],1):e._e()]),e._v(" "),e._l(e.recipesSelected,(function(t,r){return n("div",{key:r,staticClass:"d-flex justify-space-between align-center"},[[e.FERTILIZATION_IN_TAP_WATER,e.FERTILIZATION_MIX].includes(e.fertilizationType)?n("number-field",{staticClass:"pr-2",class:{"w-60":e.fertilizationType===e.FERTILIZATION_MIX},attrs:{value:t.amount,"precision-show":2,"precision-value":4,label:t.name,suffix:t.volume>0||e.isFertilizer(t)?"мл":"г","hide-details":"auto"},on:{input:function(t){return e.inputRecipeAmount(t,r)}}}):e._e(),e._v(" "),[e.FERTILIZATION_EVERY_DAY,e.FERTILIZATION_MIX].includes(e.fertilizationType)?n("div",{staticClass:"d-flex",class:{"w-100":e.fertilizationType===e.FERTILIZATION_EVERY_DAY,"w-40":e.FERTILIZATION_MIX||e.isTotal}},[e.isTotal?e._e():n("number-field",{attrs:{value:t.amountDay,"precision-show":2,"precision-value":4,label:e.FERTILIZATION_EVERY_DAY===e.fertilizationType?t.name:"",suffix:t.volume>0||e.isFertilizer(t)?"мл/день":"г/день","hide-details":"auto"},on:{input:function(t){return e.inputRecipeAmountDay(t,r)}}}),e._v(" "),e.isTotal?n("number-field",{attrs:{value:e.amountDayTotal[r],"precision-show":2,"precision-value":4,label:e.FERTILIZATION_EVERY_DAY===e.fertilizationType?t.name:"",suffix:t.volume>0||e.isFertilizer(t)?"мл":"г","hide-details":"auto"},on:{input:function(t){return e.inputRecipeAmountDayTotal(t,r)}}}):e._e()],1):e._e()],1)}))],2)}),[],!1,null,"3925251a",null);t.default=component.exports;_()(component,{NumberField:n(200).default}),_()(component,{VDivider:I.a,VRadio:E.a,VRadioGroup:O.a,VSelect:C.a})},723:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));n(65),n(4),n(12),n(11),n(33),n(45),n(29);var r=n(718),o=function(e,t,n){var o=0;return"Ca"in e&&(o+=e.Ca*t/(r.a.Ca*n)),"Mg"in e&&(o+=e.Mg*t/(r.a.Mg*n)),o*=1e3},l=function(e,t,n){var o=0;return"CO3"in e&&(o+=e.CO3/(n*r.b.HCO3)*(r.b.HCO3/r.b.CO3)*r.c*t,o*=1e3),o}},725:function(e,t,n){"use strict";n(713)},726:function(e,t,n){var r=n(20)(!1);r.push([e.i,".w-60[data-v-3925251a]{width:60%}.w-50[data-v-3925251a]{width:50%}.w-40[data-v-3925251a]{width:40%}",""]),e.exports=r},904:function(e,t,n){"use strict";n.r(t),n.d(t,"REMINERALIZATION_TYPES_REM",(function(){return C})),n.d(t,"REMINERALIZATION_TYPES_TAP",(function(){return y})),n.d(t,"REMINERALIZATION_TYPES_MIX",(function(){return R}));n(10),n(13),n(15),n(16);var r=n(19),o=n(65),l=n(3),c=(n(272),n(23),n(60),n(4),n(263),n(29),n(12),n(11),n(32),n(160),n(1)),m=n(81),h=n(706),f=n(708),d=n(718),v=[{name:"Аквапозитив GH+",kh:0,gh:6,mass:2,volume:10,ca:14,mg:3.5,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Аквапозитив GH/KH+",kh:3,gh:8,mass:3,volume:10,ca:13.8,mg:3.4,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Aquayer Remineral GH/KH+",kh:2,gh:3,mass:4,volume:50,ca:17.7,mg:5.5,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Aquabalance GH-бустер",kh:0,gh:3.5,mass:14,volume:100,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Aquabalance Aqua-бустер",kh:2.25,gh:4.5,mass:7,volume:50,ca:15,mg:4.3,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Dennerle Osmose ReMineral+",kh:1.3,gh:2,mass:10,volume:100,ca:45.5,mg:9.5,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"Seachem Equilibrium",kh:0,gh:3,mass:16,volume:80,ca:8.06,mg:2.41,note:"Это заводское удобрение. Все данные взяты с этикетки."},{name:"WaterSci Remineral Gh+",kh:0,gh:8,mass:1,volume:1,ca:27.54,mg:6.48,liquid:!0,note:"Это фирменное удобрение. Все данные взяты из официальных источников:\nhttps://watersci.ru\nhttps://vk.com/watersci"},{name:"WaterSci Remineral Kh+",kh:4,gh:0,mass:1,volume:1,ca:0,mg:0,liquid:!0,note:"Это фирменное удобрение. Все данные взяты из официальных источников:\nhttps://watersci.ru\nhttps://vk.com/watersci"}],T=n(707),_=n(721),I=n(723);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C=0,y=1,R=2,A={name:"Remineralization",components:{FertilizersDoseTable:_.default},head:function(){return{title:"Водоподготовка в аквариуме",meta:[{hid:"description",name:"description",content:"Данный калькулятор позволяет подготовить подменную воду с нужными параметрами жесткости воды и легко рассчитать итоговую жесткость в аквариуме."},{hid:"keywords",name:"keywords",content:"подмена, жесткость воды, gh, kh"}]}},data:function(){return{FORMULAS:f.a,ELEMENTS:h.a,GH:d.a,REMINERALS:v,FERTILIZATION_IN_TAP_WATER:_.FERTILIZATION_IN_TAP_WATER,REMINERALIZATION_TYPES_REM:C,REMINERALIZATION_TYPES_TAP:y,REMINERALIZATION_TYPES_MIX:R,dialog:!0,tank:{name:null,volume:null,waterChangeVolume:0},waterChange:0,osmosisChange:0,ghInit:0,khInit:0,ghWaterChange:0,khWaterChange:0,recipesSelected:[],remineralsSelected:[],isOwnRemineral:!1,ownRemineral:{kh:0,gh:0,mass:0,volume:0},rulesCalculation:[function(e){return!Number.isNaN(+e)&&+e!=1/0||"Проверьте вводимые параметры"}]}},computed:O(O({},Object(m.d)(["tanks","recipes","fertilizers","reminerals"])),{},{remineralizationType:{get:function(){return this.$store.state.remineralization.type},set:function(e){this.osmosisChange=0,this.ghInit=0,this.khInit=0,this.ghWaterChange=0,this.khWaterChange=0,this.recipesSelected=[],this.remineralsSelected=[],this.$store.commit("REMINERALIZATION_SET_TYPE",e)}},isTests:{get:function(){return this.$store.state.remineralization.isTests},set:function(e){this.$store.commit("REMINERALIZATION_SET_IS_TESTS",e)}},remineralsAll:function(){var e=this.reminerals.map((function(e){return O(O({},e),{},{mass:Object.values(e.mass).reduce((function(e,t){return e+t}),0),reagents:O({},e.mass)})}));return[].concat(Object(o.a)(v),Object(o.a)(e))},items:function(){return[].concat(Object(o.a)(this.recipes),Object(o.a)(this.fertilizers))},osmosisChangeVolume:function(){return this.tank.volume*this.waterChange*this.osmosisChange/1e4},totalElements:function(){var e={};return this.recipesSelected.forEach((function(t){Object.keys(t.concentration).forEach((function(n){Object.keys(t.concentration[n]).forEach((function(r){if(r in e||(e[r]=0),t.amount){var o=t.amount*t.concentration[n][r];!t.volume&&Object(T.m)(t)&&(o*=1e3),e[r]+=o}}))}))})),e},waterChangeGh:function(){var e=this,t=this.totalElements.Ca,n=this.totalElements.Mg,r=0;return t&&(r+=t/(this.GH.Ca*this.tank.waterChangeVolume)),n&&(r+=n/(this.GH.Mg*this.tank.waterChangeVolume)),this.remineralsSelected.forEach((function(t){t.amount&&(r+=t.gh*t.amount*t.volume/(e.tank.waterChangeVolume*t.mass))})),this.ghWaterChange*(1-this.osmosisChange/100)+r},waterChangeKh:function(){var e=this,t=0,n=this.totalElements.CO3;return n&&(t+=Object(I.b)(n,this.tank.waterChangeVolume)),this.remineralsSelected.forEach((function(n){n.amount&&(t+=n.kh*n.amount*n.volume/(e.tank.waterChangeVolume*n.mass))})),this.khWaterChange*(1-this.osmosisChange/100)+t},totalGh:function(){var e=this,t=this.totalElements.Ca,n=this.totalElements.Mg,r=0;t&&(r+=t/(this.GH.Ca*this.tank.volume)),n&&(r+=n/(this.GH.Mg*this.tank.volume)),this.remineralsSelected.forEach((function(t){t.amount&&(r+=t.gh*t.amount*t.volume/(e.waterChange/100*e.tank.volume*t.mass)*(e.waterChange/100))}));var o=this.ghWaterChange*(1-this.osmosisChange/100)*this.waterChange/100;return this.ghInit*(1-this.waterChange/100)+o+r},totalKh:function(){var e=this,t=0,n=this.totalElements.CO3;n&&(t+=Object(I.b)(n,this.tank.volume)),this.remineralsSelected.forEach((function(n){n.amount&&(t+=n.kh*n.amount*n.volume/(e.waterChange/100*e.tank.volume*n.mass)*(e.waterChange/100))}));var r=this.khWaterChange*(1-this.osmosisChange/100)*this.waterChange/100;return this.khInit*(1-this.waterChange/100)+r+t}}),watch:{recipesSelected:function(){this.recipesSelected.forEach((function(e){e.amount||(e.amount=""),e.amountDay||(e.amountDay="")}))}},methods:{isRecipe:T.m,isFertilizer:T.l,convertIonName:T.c,convertIonRatio:T.d,countPercent:T.e,countTotalIonConcentration:T.h,inputDose:function(e,t){c.a.set(this.recipesSelected,e,t)},inputGhInit:function(e){e<0||(this.ghInit=+e)},inputKhInit:function(e){e<0||(this.khInit=+e)},inputGhWaterChange:function(e){e<0||(this.ghWaterChange=+e)},inputKhWaterChange:function(e){e<0||(this.khWaterChange=+e)},chooseTank:function(e){"object"===Object(r.a)(e)?this.tank=O({},e):(this.tank.name=e,this.tank.volume=+e),this.tank.volume<0||(this.tank.waterChangeVolume=this.tank.waterChangeVolume||0,this.tank.waterChangeVolume>this.tank.volume&&(this.tank.waterChangeVolume=this.tank.volume),this.waterChange=this.tank.waterChangeVolume/this.tank.volume*100)},inputWaterChange:function(e){e<0||e<=100&&(this.waterChange=+e,this.tank.waterChangeVolume=this.tank.volume*e/100)},inputWaterChangeVolume:function(e){e<0||e<=this.tank.volume&&(this.tank.waterChangeVolume=+e,this.waterChange=e/this.tank.volume*100)},inputOsmosisChange:function(e){e<0||e<=100&&(this.osmosisChange=+e)},addOwnRemineral:function(){this.remineralsSelected.push(O({name:"Свой"},this.ownRemineral)),this.ownRemineral={kh:0,gh:0,reagentsMassObject:0,volume:0}},onRemoveRemineral:function(e){this.remineralsSelected.splice(e,1)}}},w=n(37),k=n(46),N=n.n(k),x=n(264),S=n(770),j=n(694),P=n(762),M=n(705),L=n(684),z=n(131),F=n(247),Z=n(733),D=n(734),V=n(695),Y=n(681),component=Object(w.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"mb-10"},[n("v-row",[n("page-title",[e._v("\n      Водоподготовка\n    ")]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"8","offset-sm":"2"}},[n("v-combobox",{attrs:{items:e.tanks,value:e.tank.volume,"item-text":"name","item-value":"volume",label:"Объем аквариума","hide-selected":"","hide-details":"auto",hint:"Выберите аквариум или введите объем (это может быть объем подмены)","persistent-hint":"",suffix:"л","return-object":!0},on:{input:e.chooseTank}}),e._v(" "),n("div",{staticClass:"mt-2 mt-sm-4"},[e._v("\n        Выберите тип подмены\n      ")]),e._v(" "),n("div",{staticClass:"d-flex flex-column flex-md-row"},[n("v-radio-group",{staticClass:"my-2",attrs:{"hide-details":"auto",column:"xs"===e.$vuetify.breakpoint.name,row:"xs"!==e.$vuetify.breakpoint.name},model:{value:e.remineralizationType,callback:function(t){e.remineralizationType=t},expression:"remineralizationType"}},[n("v-radio",{attrs:{label:"Осмос + реминерализатор",value:e.REMINERALIZATION_TYPES_REM}}),e._v(" "),n("v-radio",{staticClass:"mt-1 mt-sm-0",attrs:{label:"Осмос + водопровод",value:e.REMINERALIZATION_TYPES_TAP}}),e._v(" "),n("v-radio",{staticClass:"mt-1 mt-sm-0",attrs:{label:"Другое",value:e.REMINERALIZATION_TYPES_MIX}})],1),e._v(" "),n("v-checkbox",{staticClass:"my-2",attrs:{label:"Тестирую воду"},model:{value:e.isTests,callback:function(t){e.isTests=t},expression:"isTests"}})],1),e._v(" "),n("v-expand-transition",[e.tank.volume&&null!==e.remineralizationType?n("div",[n("div",{staticClass:"text-subtitle-1"},[e._v("\n            Подмена\n          ")]),e._v(" "),n("div",{staticClass:"d-flex flex-column flex-sm-row align-sm-center"},[n("number-field",{staticClass:"pt-0 mt-0",attrs:{value:e.tank.waterChangeVolume,label:"Объем",hint:"Введите объем подмены","persistent-hint":"","single-line":"",suffix:"л","precision-show":1,"append-icon":"mdi-arrow-up-bold-circle-outline"},on:{input:e.inputWaterChangeVolume,"click:append":function(t){return e.inputWaterChangeVolume(e.tank.volume)}}}),e._v(" "),n("number-field",{staticClass:"pt-0 mt-0 ml-sm-3",attrs:{value:e.waterChange,label:"Процент",hint:"или процент подмены от общего объема","persistent-hint":"","single-line":"",suffix:"%","precision-show":1,"append-icon":"mdi-arrow-up-bold-circle-outline"},on:{input:e.inputWaterChange,"click:append":function(t){return e.inputWaterChange(100)}}}),e._v(" "),[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)?n("number-field",{staticClass:"mt-0 pt-0 ml-sm-3",attrs:{value:e.osmosisChange,"precision-show":1,label:"Процент",hint:"\n                Осмос: "+e.osmosisChangeVolume.toFixed(1)+" л.\n                Водопровод: "+(e.tank.waterChangeVolume-e.osmosisChangeVolume).toFixed(1)+" л.\n              ","persistent-hint":"","single-line":"",suffix:"%","append-icon":"mdi-arrow-up-bold-circle-outline"},on:{input:e.inputOsmosisChange,"click:append":function(t){return e.inputOsmosisChange(100)}}}):e._e()],1),e._v(" "),n("v-expand-transition",[e.isTests||[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)?n("div",[n("div",{staticClass:"text-headline mt-8"},[e._v("\n                Исходная жесткость\n              ")]),e._v(" "),n("div",{staticClass:"d-flex"},[[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)?n("number-field",{attrs:{value:e.ghWaterChange,label:"Gh водопровода",suffix:"dGh","hide-details":"auto"},on:{input:e.inputGhWaterChange}}):e._e(),e._v(" "),e.isTests?n("number-field",{class:{"ml-3":[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)},attrs:{value:e.ghInit,label:"Gh в аквариуме",suffix:"dGh","hide-details":"auto"},on:{input:e.inputGhInit}}):e._e()],1),e._v(" "),n("div",{staticClass:"d-flex"},[[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)?n("number-field",{attrs:{value:e.khWaterChange,label:"Kh водопровода",suffix:"dKh","hide-details":"auto"},on:{input:e.inputKhWaterChange}}):e._e(),e._v(" "),e.isTests?n("number-field",{class:{"ml-3":[e.REMINERALIZATION_TYPES_TAP,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)},attrs:{value:e.khInit,label:"Kh в аквариуме",suffix:"dKh","hide-details":"auto"},on:{input:e.inputKhInit}}):e._e()],1)]):e._e()])],1):e._e()]),e._v(" "),n("v-expand-transition",[e.tank.volume&&[e.REMINERALIZATION_TYPES_REM,e.REMINERALIZATION_TYPES_MIX].includes(e.remineralizationType)?n("div",[n("div",{staticClass:"text-subtitle-1 mt-8"},[e._v("\n            Реминерализатор и удобрения\n          ")]),e._v(" "),n("div",{staticClass:"d-flex flex-column flex-sm-row mb-8"},[n("v-combobox",{attrs:{items:e.remineralsAll,label:"Реминерализатор",hint:"Выберите готовый реминерализатор","item-text":"name","return-object":!0,"persistent-hint":"",multiple:""},model:{value:e.remineralsSelected,callback:function(t){e.remineralsSelected=t},expression:"remineralsSelected"}}),e._v(" "),n("v-combobox",{staticClass:"ml-sm-3",attrs:{items:e.items,label:"Удобрение",hint:"и/или удобрение из списка","item-text":"name","return-object":!0,"persistent-hint":"",multiple:""},model:{value:e.recipesSelected,callback:function(t){e.recipesSelected=t},expression:"recipesSelected"}})],1),e._v(" "),n("div",{staticClass:"mb-8"},[n("div",{staticClass:"d-flex align-center mb-2"},[n("v-divider"),e._v(" "),n("v-btn",{staticClass:"px-4",attrs:{center:"",text:""},on:{click:function(t){e.isOwnRemineral=!e.isOwnRemineral}}},[e._v("\n                Свой состав\n                "),n("v-icon",[e._v(e._s(e.isOwnRemineral?"mdi-chevron-up":"mdi-chevron-down"))])],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-expand-transition",[e.isOwnRemineral?n("div",[n("v-row",{staticClass:"d-flex flex-wrap mb-2"},[n("v-col",{attrs:{cols:"6"}},[n("number-field",{attrs:{label:"Gh",suffix:"dGh","hide-details":"auto"},model:{value:e.ownRemineral.gh,callback:function(t){e.$set(e.ownRemineral,"gh",t)},expression:"ownRemineral.gh"}}),e._v(" "),n("number-field",{attrs:{label:"Объем",hint:"Объем, на который рассчитан состав",suffix:"л","hide-details":"auto"},model:{value:e.ownRemineral.volume,callback:function(t){e.$set(e.ownRemineral,"volume",t)},expression:"ownRemineral.volume"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("number-field",{attrs:{label:"Kh",suffix:"dKh","hide-details":"auto"},model:{value:e.ownRemineral.kh,callback:function(t){e.$set(e.ownRemineral,"kh",t)},expression:"ownRemineral.kh"}}),e._v(" "),n("number-field",{attrs:{label:"Масса",hint:"Масса, которая повышает Gh и Кh в n объеме на m градусов",suffix:"г","hide-details":"auto"},model:{value:e.ownRemineral.mass,callback:function(t){e.$set(e.ownRemineral,"mass",t)},expression:"ownRemineral.mass"}})],1)],1),e._v(" "),n("div",{staticClass:"d-flex justify-end"},[n("v-btn",{attrs:{color:"primary"},on:{click:e.addOwnRemineral}},[e._v("\n                    Добавить\n                  ")])],1)],1):e._e()])],1)]):e._e()]),e._v(" "),e._l(e.remineralsSelected,(function(t,r){return n("div",{key:"rem_"+r},[n("div",{staticClass:"d-flex align-start"},[n("number-field",{attrs:{label:t.name,hint:t.liquid?"Введите объем реминерализатора":"Введите массу реминерализатора",suffix:t.liquid?"мл":"г","persistent-hint":""},model:{value:t.amount,callback:function(n){e.$set(t,"amount",n)},expression:"remineral.amount"}}),e._v(" "),n("v-icon",{staticClass:"cursor-pointer ml-2 ml-md-2 mt-5 mt-md-5",on:{click:function(t){return e.onRemoveRemineral(r)}}},[e._v("\n            mdi-delete\n          ")])],1),e._v(" "),t.reagents?n("div",{staticClass:"d-flex body-2 text--secondary my-2 my-md-4"},[n("div",{staticClass:"mr-2 mr-md-4"},[e._v("\n            Реагенты:\n          ")]),e._v(" "),n("div",e._l(t.reagents,(function(o,l){return n("div",{key:"rem_"+r+"_"+o},[e._v("\n              "+e._s(l)+":\n              "),t.amount?[e._v("\n                "+e._s((o*(t.amount/t.mass)).toFixed(2))+" г\n              ")]:[e._v("\n                —\n              ")]],2)})),0)]):e._e()])})),e._v(" "),e.recipesSelected.length>0?n("fertilizers-dose-table",{attrs:{"fertilization-type":e.FERTILIZATION_IN_TAP_WATER,"is-fertilization-types":!1,"is-water-change":!1,"recipes-selected":e.recipesSelected,days:7},on:{input:e.inputDose}}):e._e(),e._v(" "),n("v-expand-transition",[e.tank.volume&&null!==e.remineralizationType?n("div",{staticClass:"mt-8"},[n("div",{staticClass:"text-subtitle-1 mb-2"},[e._v("\n            Подготовленная жесткость\n          ")]),e._v(" "),n("div",[n("div",{staticClass:"d-flex"},[n("v-text-field",{staticClass:"mb-3",attrs:{value:e.waterChangeGh.toFixed(2),label:"Gh в подмене",suffix:"dGh","hide-details":"auto",readonly:"",outlined:"","persistent-hint":"",rules:e.rulesCalculation}}),e._v(" "),e.isTests?n("v-text-field",{staticClass:"mb-3 ml-3",attrs:{value:e.totalGh.toFixed(2),label:"Gh в аквариуме",suffix:"dGh","hide-details":"auto",readonly:"",outlined:"","persistent-hint":"",rules:e.rulesCalculation}}):e._e()],1),e._v(" "),n("div",{staticClass:"d-flex"},[n("v-text-field",{attrs:{value:e.waterChangeKh.toFixed(2),label:"Kh в подмене",suffix:"dKh","hide-details":"auto",readonly:"",outlined:"","persistent-hint":"",rules:e.rulesCalculation}}),e._v(" "),e.isTests?n("v-text-field",{staticClass:"ml-3",attrs:{value:e.totalKh.toFixed(2),label:"Kh в аквариуме",suffix:"dKh","hide-details":"auto",readonly:"",outlined:"","persistent-hint":"",rules:e.rulesCalculation}}):e._e()],1)])]):e._e()])],2),e._v(" "),n("the-guide",[e._v("\n      На этой странице можно рассчитать Gh/Kh в аквариуме в зависимости от исходной воды, разбавления осмосом,\n      реминерализатора и дозировок удобрений.\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;N()(component,{PageTitle:n(201).default,NumberField:n(200).default,FertilizersDoseTable:n(721).default,TheGuide:n(202).default}),N()(component,{VBtn:x.a,VCheckbox:S.a,VCol:j.a,VCombobox:P.a,VContainer:M.a,VDivider:L.a,VExpandTransition:z.a,VIcon:F.a,VRadio:Z.a,VRadioGroup:D.a,VRow:V.a,VTextField:Y.a})}}]);