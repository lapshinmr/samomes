import{f as c}from"./DHChNhVW.js";import{e as A,B as _,k as F,C as S,r as h,E as f,h as $,o as y,w as s,b as a,d as E,t as V,j as e,z as I,c as T,i as G,a as B,H as U,L as D}from"./Dt_hY5Oj.js";import{u as H}from"./DLpJezXQ.js";import{u as K}from"./CEN6kidz.js";import{R as v}from"./CgbmeEYS.js";import{a as j}from"./DVYLtouC.js";import{V as L}from"./3yyLXgcO.js";import{V as q,a as z,b as W,c as J}from"./1ZPuLRBT.js";import{V as Q}from"./AlMIrVF_.js";import{V as p}from"./Bcp7-2_3.js";import{V as X}from"./BZRvyWuu.js";import{V as x}from"./BFeFc3tU.js";import{V as Y}from"./oyapwneb.js";import{M as Z}from"./pIIQsBHX.js";const ee={key:0,class:"mt-6"},te={class:"font-weight-medium"},oe=A({__name:"TheAddRatioPopup",props:_({concentration:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:_(["save"],["update:modelValue"]),setup(b,{emit:g}){const{t:o}=F(),l=S(b,"modelValue"),R=b,M=g,C=m=>m in R.concentration||o("popups.addRatio.elementInputError"),{required:k}=H(),N=K(),w=h(),u=h(),d=h(),t=f(()=>v.countRatio(R.concentration,u.value,d.value));async function i(){const{valid:m}=await w.value.validate();if(!m){N.showWarning(o("common.isFormErrors"));return}M("save",[u.value,d.value]),u.value=null,d.value=null,l.value=!1}return(m,n)=>(y(),$(L,{modelValue:l.value,"onUpdate:modelValue":n[3]||(n[3]=r=>l.value=r),width:"500"},{default:s(()=>[a(q,null,{default:s(()=>[a(z,null,{default:s(()=>[E(V(e(o)("popups.addRatio.title")),1)]),_:1}),a(W,null,{default:s(()=>[a(Q,{ref_key:"formRef",ref:w},{default:s(()=>[a(p,{modelValue:e(u),"onUpdate:modelValue":n[0]||(n[0]=r=>I(u)?u.value=r:null),label:e(o)("popups.addRatio.firstElementInput"),hint:e(o)("popups.addRatio.elementInputHint"),variant:"underlined",rules:[e(k),C],"persistent-hint":""},null,8,["modelValue","label","hint","rules"]),a(p,{modelValue:e(d),"onUpdate:modelValue":n[1]||(n[1]=r=>I(d)?d.value=r:null),label:e(o)("popups.addRatio.secondElementInput"),hint:e(o)("popups.addRatio.elementInputHint"),variant:"underlined",rules:[e(k),C],"persistent-hint":""},null,8,["modelValue","label","hint","rules"]),a(j,null,{default:s(()=>[e(t)!==null?(y(),T("div",ee,[E(V(e(o)("popups.addRatio.ratioIs"))+" ",1),B("span",te,V(("format"in m?m.format:e(c))(e(t))||"—"),1)])):G("",!0)]),_:1})]),_:1},512)]),_:1}),a(X),a(J,null,{default:s(()=>[a(x,{variant:"text",onClick:n[2]||(n[2]=r=>l.value=!1)},{default:s(()=>[E(V(e(o)("buttons.cancel")),1)]),_:1}),a(Y),a(x,{color:"primary",variant:"text",onClick:i},{default:s(()=>[E(V(e(o)("buttons.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ae={class:"text-body-2"},ne={class:"d-flex flex-wrap ga-2"},he=A({name:"TheElementsRatios",__name:"TheElementsRatios",props:{concentration:{},isGh:{type:Boolean,default:!1}},setup(b){const{t:g}=F(),o=b,l=h(!1),R=h([]),M=f(()=>v.countRatio(o.concentration,"NO3","PO4")),C=f(()=>v.countRatio(o.concentration,"NO3","K")),k=f(()=>v.countRatio(o.concentration,"Ca","Mg")),N=f(()=>v.countRatio(o.concentration,"Fe","Mn")),w=f(()=>v.countGh(o.concentration,1/Z)),u=f(()=>R.value.map(([t,i])=>[t,i,v.countRatio(o.concentration,t,i)]));function d(t){R.value.push(t)}return(t,i)=>{const m=oe;return y(),T("div",ae,[B("div",ne,[a(p,{"model-value":("format"in t?t.format:e(c))(e(M))||"—",label:"NO3 / PO4",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(C))||"—",label:"NO3 / K",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(N))||"—",label:"Fe / Mn",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),a(p,{"model-value":("format"in t?t.format:e(c))(e(k))||"—",label:"Ca / Mg",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"]),t.isGh?(y(),$(p,{key:0,"model-value":("format"in t?t.format:e(c))(e(w),2)||"—",label:"Gh",variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value"])):G("",!0),(y(!0),T(U,null,D(e(u),([n,r,O],P)=>(y(),$(p,{key:`${n}_${r}_${P}`,"model-value":("format"in t?t.format:e(c))(O)||"—",label:`${n} / ${r}`,variant:"outlined",readonly:"",density:"compact","hide-details":"auto",style:{"min-width":"100px"}},null,8,["model-value","label"]))),128))]),B("div",{class:"d-flex justify-end text-blue cursor-pointer text-body-1 mt-4",onClick:i[0]||(i[0]=n=>{l.value=!0})},V(e(g)("common.noRatio")),1),a(m,{modelValue:e(l),"onUpdate:modelValue":i[1]||(i[1]=n=>I(l)?l.value=n:null),concentration:o.concentration,onSave:d},null,8,["modelValue","concentration"])])}}});export{he as _};
