import{_ as Co}from"./D1H-iQXl.js";import{_ as So}from"./BennhIYQ.js";import{_ as Ro}from"./D0Eyi-NH.js";import{V as Po,_ as Ao}from"./DxPFgVMm.js";import{_ as nt}from"./DFy-W6Nl.js";import cn from"./Dd_ptEuo.js";import{f as A}from"./DHChNhVW.js";import{e as le,B as To,k as be,C as Me,c as _,o as v,a as p,d as O,t as y,j as u,b as w,E as j,w as S,H as I,K as W,L as $t,h as X,r as L,z as ne,F as Vo,G as Eo,D as ht,y as Io,f as Do,A as Oo,i as U,I as jo,J as $o}from"./C4AY6iDY.js";import{s as fn}from"./Ch8e8etN.js";import{V as Ct}from"./C_FTRR8m.js";import{i as ie,f as pe,C as Qe,E as de,t as J,g as St,h as q,j as De,k as B,l as Lo,u as Wo,m as me,R as hn,n as zo,o as Bo,D as Ho,A as No,v as ye,q as mn,r as Oe,Q as Ce,H as Ue,T as Lt,s as yn,w as Xo,x as Wt,y as Ze,z as zt,B as pn,F as Ie,G as Te,I as Yo,J as D,K as gn,P as Uo,M as Go,a as Fo,b as qo,N as Ko}from"./D4R6pQQ5.js";import{b as Jo}from"./BBggtmFf.js";import{a as pt,V as G,b as Qo}from"./D_ojGsqK.js";import{u as Zo}from"./CJauG_RX.js";import{u as er}from"./Cku8uNeL.js";import{u as tr}from"./Ci8V9Md_.js";import{u as nr}from"./CY94b49y.js";import{u as or}from"./XRdpvuJH.js";import{R as rr}from"./ciCyplrD.js";import{R as Bt}from"./BQGgX5ID.js";import{u as ar,V as ir}from"./DghbaQsc.js";import{a as he}from"./CusXBXJr.js";import{V as Ge}from"./_MrG4Qzc.js";import{V as sr}from"./CbywPFrM.js";import"./B931MWyl.js";import"./CY07sUq5.js";import"./C1PmHpO2.js";import"./D_YM2NF9.js";import"./BJEZURo1.js";import"./DFmCVkFv.js";import"./CEN1ZApb.js";import"./qzx_-4Xp.js";import"./CsOvkQMc.js";import"./CRWMzYl9.js";import"./C_viBdnf.js";import"./Dpja-O8o.js";import"./85aYgJ7U.js";/* empty css        */import"./B-5kz6sw.js";import"./BoIzNFIF.js";import"./Bht1taiZ.js";import"./DxcjxDr2.js";import"./IiSMleoJ.js";import"./D2vPiwbM.js";const lr={key:0,class:"d-flex mb-4"},dr={class:"mx-2 align-self-end mb-1"},ur={class:"font-weight-medium"},cr={style:{width:"60px"}},fr={key:1,class:"d-flex mb-4"},hr={style:{width:"80px"}},mr={class:"mx-3 align-self-end mb-1"},yr={style:{width:"60px"}},pr={class:"d-flex"},gr={class:"d-flex align-center text-body-2 text-grey-darken-1"},br=le({__name:"TheHardnessTable",props:To({remineral:{},khDisabled:{type:Boolean,default:!1},caMgRatioDisabled:{type:Boolean,default:!1}},{changeVolume:{},changeVolumeModifiers:{},doseVolume:{},doseVolumeModifiers:{},gh:{},ghModifiers:{},kh:{},khModifiers:{},caMgRatio:{},caMgRatioModifiers:{}}),emits:["update:changeVolume","update:doseVolume","update:gh","update:kh","update:caMgRatio"],setup(t){const{t:e}=be(),n=Me(t,"changeVolume"),o=Me(t,"doseVolume"),r=Me(t,"gh"),a=Me(t,"kh"),i=Me(t,"caMgRatio");return(s,l)=>{const d=nt,c=cn;return v(),_("div",null,[s.remineral.isDry?(v(),_("div",lr,[p("div",dr,[p("span",ur,y(("format"in s?s.format:u(A))(s.remineral.totalMass))+" "+y(u(e)("units.g")),1),O(" "+y(u(e)("reminerals.page.explanation.dry")),1)]),p("div",cr,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=f=>n.value=f),suffix:u(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])):(v(),_("div",fr,[p("div",hr,[w(d,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=f=>o.value=f),suffix:u(e)("units.ml"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])]),p("div",mr,y(u(e)("reminerals.page.explanation.liquid")),1),p("div",yr,[w(d,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=f=>n.value=f),suffix:u(e)("units.l"),"hide-details":"auto",class:"mt-0 pt-0",style:{"flex-basis":"0"}},null,8,["modelValue","suffix"])])])),p("div",pr,[w(d,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=f=>r.value=f),label:"Gh",suffix:"Gh",variant:"outlined","hide-details":"auto",class:"mb-2 flex-1-0-0",disabled:r.value===null},null,8,["modelValue","disabled"]),w(d,{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=f=>a.value=f),label:"Kh",suffix:"Kh",variant:"outlined","hide-details":"auto",class:"mb-2 ml-2 flex-1-0-0",disabled:a.value===null||s.khDisabled},null,8,["modelValue","disabled"]),w(d,{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=f=>i.value=f),label:"Ca / Mg",variant:"outlined","hide-details":"auto",class:"mb-2 ml-2 flex-1-0-0",disabled:i.value===null||s.caMgRatioDisabled},null,8,["modelValue","disabled"])]),p("div",gr,[w(c,{name:"mdi-information-outline",size:"16",class:"mr-1 flex-shrink-0"}),O(" "+y(u(e)("reminerals.page.ghKhHint")),1)])])}}}),vr={class:"pl-0 text-center"},xr={style:{"white-space":"nowrap"}},wr={class:"font-weight-medium"},kr={class:"pl-0 text-center"},_r=le({name:"TheSoluteElementsTable",__name:"TheSoluteElementsTable",props:{remineral:{}},setup(t){const{t:e}=be(),n=t,o=j(()=>fn(n.remineral.concentrationWithoutHCO3)),r=j(()=>Object.keys(n.remineral.concentrationWithoutHCO3).length);return(a,i)=>(v(),_("div",null,[w(Ct,null,{default:S(()=>[p("thead",null,[p("tr",null,[p("th",vr,y(u(e)("common.element")),1),(v(!0),_(I,null,W(u(o),([s],l)=>(v(),_("th",{key:s,class:$t(["text-center",{"pr-0":l===u(r)-1}])},[p("div",xr,y(s),1)],2))),128))])]),p("tbody",null,[p("tr",wr,[p("td",kr,y(u(e)("reminerals.page.concentration"))+", "+y(a.remineral.isLiquid?u(e)("units.g/l"):u(e)("units.g/1g")),1),(v(!0),_(I,null,W(u(o),([s,l],d)=>(v(),_("td",{key:s,class:$t(["text-center",{"pr-0":d===u(r)-1}])},[l?(v(),_(I,{key:0},[O(y(("format"in a?a.format:u(A))(l,3)),1)],64)):(v(),_(I,{key:1},[O(" â€” ")],64))],2))),128))])])]),_:1})]))}});/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Ht={modes:{point(t,e){return et(t,e,{intersect:!0})},nearest(t,e,n){return Sr(t,e,n)},x(t,e,n){return et(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return et(t,e,{intersect:n.intersect,axis:"y"})}}};function Rt(t,e,n){return(Ht.modes[n.mode]||Ht.modes.nearest)(t,e,n)}function Mr(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Cr(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function et(t,e,n){return t.filter(o=>n.intersect?o.inRange(e.x,e.y):Mr(o,e,n.axis))}function Sr(t,e,n){let o=Number.POSITIVE_INFINITY;return et(t,e,n).reduce((r,a)=>{const i=a.getCenterPoint(),s=Cr(e,i,n.axis),l=St(e,s);return l<o?(r=[a],o=l):l===o&&r.push(a),r},[]).sort((r,a)=>r._index-a._index).slice(0,1)}function ue(t,e,n){const o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}const Rr=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,ae=.001,ot=(t,e,n)=>Math.min(n,Math.max(e,t)),bn=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function Pr(t,e,n){for(const o of Object.keys(t))t[o]=ot(t[o],e,n);return t}function Ar(t,e,n,o){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+o,2)}function vn(t,{x:e,y:n,x2:o,y2:r},a,{borderWidth:i,hitTolerance:s}){const l=(i+s)/2,d=t.x>=e-l-ae&&t.x<=o+l+ae,c=t.y>=n-l-ae&&t.y<=r+l+ae;return a==="x"?d:(a==="y"||d)&&c}function xn(t,{rect:e,center:n},o,{rotation:r,borderWidth:a,hitTolerance:i}){const s=ue(t,n,J(-r));return vn(s,e,o,{borderWidth:a,hitTolerance:i})}function ce(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function Tr(t,e,n,o=!0){const r=n.split(".");let a=0;for(const i of e.split(".")){const s=r[a++];if(parseInt(i,10)<parseInt(s,10))break;if(Rr(s,i)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const wn=t=>typeof t=="string"&&t.endsWith("%"),kn=t=>parseFloat(t)/100,_n=t=>ot(kn(t),0,1),Se=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Vr={box:t=>Se(t.centerX,t.centerY),doughnutLabel:t=>Se(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Se(t.centerX,t.centerY),line:t=>Se(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Se(t.centerX,t.centerY)};function Pt(t,e){return e==="start"?0:e==="end"?t:wn(e)?_n(e)*t:t/2}function re(t,e,n=!0){return typeof e=="number"?e:wn(e)?(n?_n(e):kn(e))*t:t}function Er(t,e){const{x:n,width:o}=t,r=e.textAlign;return r==="center"?n+o/2:r==="end"||r==="right"?n+o:n}function Mn(t,e,{borderWidth:n,position:o,xAdjust:r,yAdjust:a},i){const s=ie(i),l=e.width+(s?i.width:0)+n,d=e.height+(s?i.height:0)+n,c=At(o),f=Nt(t.x,l,r,c.x),g=Nt(t.y,d,a,c.y);return{x:f,y:g,x2:f+l,y2:g+d,width:l,height:d,centerX:f+l/2,centerY:g+d/2}}function At(t,e="center"){return ie(t)?{x:ye(t.x,e),y:ye(t.y,e)}:(t=ye(t,e),{x:t,y:t})}const Cn=(t,e)=>t&&t.autoFit&&e<1;function Sn(t,e){const n=t.font,o=pe(n)?n:[n];return Cn(t,e)?o.map(function(r){const a=Ze(r);return a.size=Math.floor(r.size*e),a.lineHeight=r.lineHeight,Ze(a)}):o.map(r=>Ze(r))}function Rn(t){return t&&(q(t.xValue)||q(t.yValue))}function Nt(t,e,n=0,o){return t-Pt(e,o)+n}function ve(t,e,n){const o=n.init;if(o){if(o===!0)return An(e,n)}else return;return Ir(t,e,n)}function Pn(t,e,n){let o=!1;return e.forEach(r=>{me(t[r])?(o=!0,n[r]=t[r]):q(n[r])&&delete n[r]}),o}function An(t,e){const n=e.type||"line";return Vr[n](t)}function Ir(t,e,n){const o=Oe(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return An(e,n);if(ie(o))return o}const mt=new Map,Dr=t=>isNaN(t)||t<=0,Or=t=>t.reduce(function(e,n){return e+=n.string,e},"");function rt(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function at(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(J(o)),t.translate(-e,-n))}function K(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function xe(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function it(t,e){const n=e.content;if(rt(n))return{width:re(n.width,e.width),height:re(n.height,e.height)};const o=Sn(e),r=e.textStrokeWidth,a=pe(n)?n:[n],i=a.join()+Or(o)+r+(t._measureText?"-spriting":"");return mt.has(i)||mt.set(i,Wr(t,a,o,r)),mt.get(i)}function Tn(t,e,n){const{x:o,y:r,width:a,height:i}=e;t.save(),xe(t,n);const s=K(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),zo(t,{x:o,y:r,w:a,h:i,radius:Pr(Bo(n.borderRadius),0,Math.min(a,i)/2)}),t.closePath(),t.fill(),s&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function Vn(t,e,n,o){const r=n.content;if(rt(r)){t.save(),t.globalAlpha=Hr(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const a=pe(r)?r:[r],i=Sn(n,o),s=n.color,l=pe(s)?s:[s],d=Er(e,n),c=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,jr(t,n)&&zr(t,{x:d,y:c},a,i),Br(t,{x:d,y:c},a,{fonts:i,colors:l}),t.restore()}function jr(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function $r(t,e,n,o){const{radius:r,options:a}=e,i=a.pointStyle,s=a.rotation;let l=(s||0)*hn;if(rt(i)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),t.restore();return}Dr(r)||Lr(t,{x:n,y:o,radius:r,rotation:s,style:i,rad:l})}function Lr(t,{x:e,y:n,radius:o,rotation:r,style:a,rad:i}){let s,l,d,c;switch(t.beginPath(),a){default:t.arc(e,n,o,0,yn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Lt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),i+=Lt,t.lineTo(e+Math.sin(i)*o,n-Math.cos(i)*o),t.closePath();break;case"rectRounded":c=o*.516,d=o-c,s=Math.cos(i+Ce)*d,l=Math.sin(i+Ce)*d,t.arc(e-s,n-l,c,i-B,i-Ue),t.arc(e+l,n-s,c,i-Ue,i),t.arc(e+s,n+l,c,i,i+Ue),t.arc(e-l,n+s,c,i+Ue,i+B),t.closePath();break;case"rect":if(!r){d=Math.SQRT1_2*o,t.rect(e-d,n-d,2*d,2*d);break}i+=Ce;case"rectRot":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+l,n-s),t.lineTo(e+s,n+l),t.lineTo(e-l,n+s),t.closePath();break;case"crossRot":i+=Ce;case"cross":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"star":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s),i+=Ce,s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l),t.moveTo(e+l,n-s),t.lineTo(e-l,n+s);break;case"line":s=Math.cos(i)*o,l=Math.sin(i)*o,t.moveTo(e-s,n-l),t.lineTo(e+s,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(i)*o,n+Math.sin(i)*o);break}t.fill()}function Wr(t,e,n,o){t.save();const r=e.length;let a=0,i=o;for(let s=0;s<r;s++){const l=n[Math.min(s,n.length-1)];t.font=l.string;const d=e[s];a=Math.max(a,t.measureText(d).width+o),i+=l.lineHeight}return t.restore(),{width:a,height:i}}function zr(t,{x:e,y:n},o,r){t.beginPath();let a=0;o.forEach(function(i,s){const l=r[Math.min(s,r.length-1)],d=l.lineHeight;t.font=l.string,t.strokeText(i,e,n+d/2+a),a+=d}),t.stroke()}function Br(t,{x:e,y:n},o,{fonts:r,colors:a}){let i=0;o.forEach(function(s,l){const d=a[Math.min(l,a.length-1)],c=r[Math.min(l,r.length-1)],f=c.lineHeight;t.beginPath(),t.font=c.string,t.fillStyle=d,t.fillText(s,e,n+f/2+i),i+=f,t.fill()})}function Hr(t,e){const n=Wt(t)?t:e;return Wt(n)?ot(n,0,1):1}const En=["left","bottom","top","right"];function Nr(t,e){const{pointX:n,pointY:o,options:r}=e,a=r.callout,i=a&&a.display&&Fr(e,a);if(!i||Kr(e,a,i))return;if(t.save(),t.beginPath(),!K(t,a))return t.restore();const{separatorStart:l,separatorEnd:d}=Xr(e,i),{sideStart:c,sideEnd:f}=Ur(e,i,l);(a.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(d.x,d.y)),t.moveTo(c.x,c.y),t.lineTo(f.x,f.y);const g=ue({x:n,y:o},e.getCenterPoint(),J(-e.rotation));t.lineTo(g.x,g.y),t.stroke(),t.restore()}function Xr(t,e){const{x:n,y:o,x2:r,y2:a}=t,i=Yr(t,e);let s,l;return e==="left"||e==="right"?(s={x:n+i,y:o},l={x:s.x,y:a}):(s={x:n,y:o+i},l={x:r,y:s.y}),{separatorStart:s,separatorEnd:l}}function Yr(t,e){const{width:n,height:o,options:r}=t,a=r.callout.margin+r.borderWidth/2;return e==="right"?n+a:e==="bottom"?o+a:-a}function Ur(t,e,n){const{y:o,width:r,height:a,options:i}=t,s=i.callout.start,l=Gr(e,i.callout);let d,c;return e==="left"||e==="right"?(d={x:n.x,y:o+re(a,s)},c={x:d.x+l,y:d.y}):(d={x:n.x+re(r,s),y:n.y},c={x:d.x,y:d.y+l}),{sideStart:d,sideEnd:c}}function Gr(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Fr(t,e){const n=e.position;return En.includes(n)?n:qr(t,e)}function qr(t,e){const{x:n,y:o,x2:r,y2:a,width:i,height:s,pointX:l,pointY:d,centerX:c,centerY:f,rotation:g}=t,C={x:c,y:f},M=e.start,b=re(i,M),P=re(s,M),T=[n,n+b,n+b,r],k=[o+P,a,o,a],m=[];for(let E=0;E<4;E++){const z=ue({x:T[E],y:k[E]},C,J(g));m.push({position:En[E],distance:St(z,{x:l,y:d})})}return m.sort((E,z)=>E.distance-z.distance)[0].position}function Kr(t,e,n){const{pointX:o,pointY:r}=t,a=e.margin;let i=o,s=r;return n==="left"?i+=a:n==="right"?i-=a:n==="top"?s+=a:n==="bottom"&&(s-=a),t.inRange(i,s)}const Xt={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function ge(t,e,n){return e=typeof e=="number"?e:t.parse(e),mn(e)?t.getPixelForValue(e):n}function se(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const r=n.charAt(0),a=Object.values(t).filter(i=>i.axis&&i.axis===r);return a.length?a[0].id:r}function In(t,e){if(t){const n=t.options.reverse,o=ge(t,e.min,n?e.end:e.start),r=ge(t,e.max,n?e.start:e.end);return{start:o,end:r}}}function Dn(t,e){const{chartArea:n,scales:o}=t,r=o[se(o,e,"xScaleID")],a=o[se(o,e,"yScaleID")];let i=n.width/2,s=n.height/2;return r&&(i=ge(r,e.xValue,r.left+r.width/2)),a&&(s=ge(a,e.yValue,a.top+a.height/2)),{x:i,y:s}}function Tt(t,e){const n=t.scales,o=n[se(n,e,"xScaleID")],r=n[se(n,e,"yScaleID")];if(!o&&!r)return{};let{left:a,right:i}=o||t.chartArea,{top:s,bottom:l}=r||t.chartArea;const d=Yt(o,{min:e.xMin,max:e.xMax,start:a,end:i});a=d.start,i=d.end;const c=Yt(r,{min:e.yMin,max:e.yMax,start:l,end:s});return s=c.start,l=c.end,{x:a,y:s,x2:i,y2:l,width:i-a,height:l-s,centerX:a+(i-a)/2,centerY:s+(l-s)/2}}function On(t,e){if(!Rn(e)){const n=Tt(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const r=o*2,a=n.centerX+e.xAdjust,i=n.centerY+e.yAdjust;return{x:a-o,y:i-o,x2:a+o,y2:i+o,centerX:a,centerY:i,width:r,height:r,radius:o}}return Qr(t,e)}function Jr(t,e){const{scales:n,chartArea:o}=t,r=n[e.scaleID],a={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return r?Zr(r,a,e):ea(n,a,e),a}function jn(t,e){const n=Tt(t,e);return n.initProperties=ve(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:oa(t,n,e),initProperties:n.initProperties}],n}function Qr(t,e){const n=Dn(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function Yt(t,e){const n=In(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function Zr(t,e,n){const o=ge(t,n.value,NaN),r=ge(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=r):(e.y=o,e.y2=r)}function ea(t,e,n){for(const o of Object.keys(Xt)){const r=t[se(t,n,o)];if(r){const{min:a,max:i,start:s,end:l,startProp:d,endProp:c}=Xt[o],f=In(r,{min:n[a],max:n[i],start:r[s],end:r[l]});e[d]=f.start,e[c]=f.end}}}function ta({properties:t,options:e},n,o,r){const{x:a,x2:i,width:s}=t;return $n({start:a,end:i,borderWidth:e.borderWidth},{position:o.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function na({properties:t,options:e},n,o,r){const{y:a,y2:i,height:s}=t;return $n({start:a,end:i,borderWidth:e.borderWidth},{position:o.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function $n(t,e){const{start:n,end:o,borderWidth:r}=t,{position:a,padding:{start:i,end:s},adjust:l}=e,d=o-r-n-i-s-e.size;return n+r/2+l+Pt(d,a)}function oa(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const r=At(o.position),a=De(o.padding),i=it(t.ctx,o),s=ta({properties:e,options:n},i,r,a),l=na({properties:e,options:n},i,r,a),d=i.width+a.width,c=i.height+a.height;return{x:s,y:l,x2:s+d,y2:l+c,width:d,height:c,centerX:s+d/2,centerY:l+c/2,rotation:o.rotation}}const gt=["enter","leave"],Vt=gt.concat("click");function ra(t,e,n){e.listened=Pn(n,Vt,e.listeners),e.moveListened=!1,gt.forEach(o=>{me(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&me(o.click)&&(e.listened=!0),e.moveListened||gt.forEach(r=>{me(o[r])&&(e.listened=!0,e.moveListened=!0)})})}function aa(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return ia(t,e,n);case"click":return sa(t,e,n)}}function ia(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=Rt(t.visibleElements,e,n.interaction):o=[];const r=t.hovered;t.hovered=o;const a={state:t,event:e};let i=Ut(a,"leave",r,o);return Ut(a,"enter",o,r)||i}function Ut({state:t,event:e},n,o,r){let a;for(const i of o)r.indexOf(i)<0&&(a=Ln(i.options[n]||t.listeners[n],i,e)||a);return a}function sa(t,e,n){const o=t.listeners,r=Rt(t.visibleElements,e,n.interaction);let a;for(const i of r)a=Ln(i.options.click||o.click,i,e)||a;return a}function Ln(t,e,n){return Oe(t,[e.$context,n])===!0}const tt=["afterDraw","beforeDraw"];function la(t,e,n){const o=e.visibleElements;e.hooked=Pn(n,tt,e.hooks),e.hooked||o.forEach(r=>{e.hooked||tt.forEach(a=>{me(r.options[a])&&(e.hooked=!0)})})}function Gt(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return Oe(o,[e.$context])}}function da(t,e,n){const o=ma(t.scales,e,n);let r=Ft(e,o,"min","suggestedMin");r=Ft(e,o,"max","suggestedMax")||r,r&&me(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function ua(t,e){for(const n of t)fa(n,e)}function Ft(t,e,n,o){if(mn(e[n])&&!ca(t.options,n,o)){const r=t[n]!==e[n];return t[n]=e[n],r}}function ca(t,e,n){return q(t[e])||q(t[n])}function fa(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=se(e,t,n);o&&!e[o]&&ha(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function ha(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(q(t[n+o]))return!0;return!1}function ma(t,e,n){const o=e.axis,r=e.id,a=o+"ScaleID",i={min:ye(e.min,Number.NEGATIVE_INFINITY),max:ye(e.max,Number.POSITIVE_INFINITY)};for(const s of n)s.scaleID===r?qt(s,e,["value","endValue"],i):se(t,s,a)===r&&qt(s,e,[o+"Min",o+"Max",o+"Value"],i);return i}function qt(t,e,n,o){for(const r of n){const a=t[r];if(q(a)){const i=e.parse(a);o.min=Math.min(o.min,i),o.max=Math.max(o.max,i)}}}class we extends de{inRange(e,n,o,r){const{x:a,y:i}=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation));return vn({x:a,y:i},this.getProps(["x","y","x2","y2"],r),o,this.options)}getCenterPoint(e){return ce(this,e)}draw(e){e.save(),at(e,this.getCenterPoint(),this.options.rotation),Tn(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return jn(e,n)}}we.id="boxAnnotation";we.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};we.defaultRoutes={borderColor:"color",backgroundColor:"color"};we.descriptors={label:{_fallback:!0}};class st extends de{inRange(e,n,o,r){return xn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options;!n.display||!n.content||(xa(e,this),e.save(),at(e,this.getCenterPoint(),this.rotation),Vn(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const o=ya(e,n);if(!o)return{};const{controllerMeta:r,point:a,radius:i}=ga(e,n,o);let s=it(e.ctx,n);const l=ba(s,i);Cn(n,l)&&(s={width:s.width*l,height:s.height*l});const{position:d,xAdjust:c,yAdjust:f}=n,g=Mn(a,s,{borderWidth:0,position:d,xAdjust:c,yAdjust:f});return{initProperties:ve(e,g,n),...g,...r,rotation:n.rotation,_fitRatio:l}}}st.id="doughnutLabelAnnotation";st.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};st.defaultRoutes={};function ya(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,o){const r=o.controller;return r instanceof Ho&&pa(t,e,o.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?o:n},void 0)}function pa(t,e,n){if(!e.autoHide)return!0;for(let o=0;o<n.length;o++)if(!n[o].hidden&&t.getDataVisibility(o))return!0}function ga({chartArea:t},e,n){const{left:o,top:r,right:a,bottom:i}=t,{innerRadius:s,offsetX:l,offsetY:d}=n.controller,c=(o+a)/2+l,f=(r+i)/2+d,g={left:Math.max(c-s,o),right:Math.min(c+s,a),top:Math.max(f-s,r),bottom:Math.min(f+s,i)},C={x:(g.left+g.right)/2,y:(g.top+g.bottom)/2},M=e.spacing+e.borderWidth/2,b=s-M,P=C.y>f,T=P?r+M:i-M,k=va(T,c,f,b);return{controllerMeta:{_centerX:c,_centerY:f,_radius:b,_counterclockwise:P,...k},point:C,radius:Math.min(s,Math.min(g.right-g.left,g.bottom-g.top)/2)}}function ba({width:t,height:e},n){const o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/o}function va(t,e,n,o){const r=Math.pow(n-t,2),a=Math.pow(o,2),i=e*-2,s=Math.pow(e,2)+r-a,l=Math.pow(i,2)-4*s;if(l<=0)return{_startAngle:0,_endAngle:yn};const d=(-i-Math.sqrt(l))/2,c=(-i+Math.sqrt(l))/2;return{_startAngle:zt({x:e,y:n},{x:d,y:t}).angle,_endAngle:zt({x:e,y:n},{x:c,y:t}).angle}}function xa(t,e){const{_centerX:n,_centerY:o,_radius:r,_startAngle:a,_endAngle:i,_counterclockwise:s,options:l}=e;t.save();const d=K(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,o,r,a,i,s),t.closePath(),t.fill(),d&&t.stroke(),t.restore()}class je extends de{inRange(e,n,o,r){return xn({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},o,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=!q(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),at(e,this.getCenterPoint(),this.rotation),Nr(e,this),Tn(e,this,n),Vn(e,wa(this),n),e.restore())}resolveElementProperties(e,n){let o;if(Rn(n))o=Dn(e,n);else{const{centerX:s,centerY:l}=Tt(e,n);o={x:s,y:l}}const r=De(n.padding),a=it(e.ctx,n),i=Mn(o,a,n,r);return{initProperties:ve(e,i,n),pointX:o.x,pointY:o.y,...i,rotation:n.rotation}}}je.id="labelAnnotation";je.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};je.defaultRoutes={borderColor:"color"};function wa({x:t,y:e,width:n,height:o,options:r}){const a=r.borderWidth/2,i=De(r.padding);return{x:t+i.left+a,y:e+i.top+a,width:n-i.left-i.right-r.borderWidth,height:o-i.top-i.bottom-r.borderWidth}}const Et=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),bt=(t,e,n)=>Et(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Kt=(t,e,n)=>Et(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,Ae=t=>t*t,ka=(t,e,{x:n,y:o,x2:r,y2:a},i)=>i==="y"?{start:Math.min(o,a),end:Math.max(o,a),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},Jt=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,vt=(t,e,n,o)=>({x:Jt(t.x,e.x,n.x,o),y:Jt(t.y,e.y,n.y,o)}),Qt=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),Zt=(t,e,n,o)=>-Math.atan2(Qt(t.x,e.x,n.x,o),Qt(t.y,e.y,n.y,o))+.5*B;class $e extends de{inRange(e,n,o,r){const a=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y"){const i={mouseX:e,mouseY:n},{path:s,ctx:l}=this;if(s){K(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:c}=this.$context,f=e*c.currentDevicePixelRatio,g=n*c.currentDevicePixelRatio,C=l.isPointInStroke(s,f,g)||xt(this,i,r);return l.restore(),C}const d=Ae(a);return Sa(this,i,d,r)||xt(this,i,r)}return _a(this,{mouseX:e,mouseY:n},o,{hitSize:a,useFinalPosition:r})}getCenterPoint(e){return ce(this,e)}draw(e){const{x:n,y:o,x2:r,y2:a,cp:i,options:s}=this;if(e.save(),!K(e,s))return e.restore();xe(e,s);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-o,2));if(s.curve&&i)return Da(e,this,i,l),e.restore();const{startOpts:d,endOpts:c,startAdjust:f,endAdjust:g}=Wn(this),C=Math.atan2(a-o,r-n);e.translate(n,o),e.rotate(C),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-g,0),e.shadowColor=s.borderShadowColor,e.stroke(),wt(e,0,f,d),wt(e,l,-g,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=Jr(e,n),{x:r,y:a,x2:i,y2:s}=o,l=Ma(o,e.chartArea),d=l?Ca({x:r,y:a},{x:i,y:s},e.chartArea):{x:r,y:a,x2:i,y2:s,width:Math.abs(i-r),height:Math.abs(s-a)};if(d.centerX=(i+r)/2,d.centerY=(s+a)/2,d.initProperties=ve(e,d,n),n.curve){const f={x:d.x,y:d.y},g={x:d.x2,y:d.y2};d.cp=Ia(d,n,St(f,g))}const c=Ra(e,d,n.label);return c._visible=l,d.elements=[{type:"label",optionScope:"label",properties:c,initProperties:d.initProperties}],d}}$e.id="lineAnnotation";const en={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};$e.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},en),fill:!1,length:12,start:Object.assign({},en),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},je.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};$e.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};$e.defaultRoutes={borderColor:"color"};function _a(t,{mouseX:e,mouseY:n},o,{hitSize:r,useFinalPosition:a}){const i=ka(e,n,t.getProps(["x","y","x2","y2"],a),o);return bn(i,r)||xt(t,{mouseX:e,mouseY:n},a,o)}function Ma({x:t,y:e,x2:n,y2:o},{top:r,right:a,bottom:i,left:s}){return!(t<s&&n<s||t>a&&n>a||e<r&&o<r||e>i&&o>i)}function tn({x:t,y:e},n,{top:o,right:r,bottom:a,left:i}){return t<i&&(e=Kt(i,{x:t,y:e},n),t=i),t>r&&(e=Kt(r,{x:t,y:e},n),t=r),e<o&&(t=bt(o,{x:t,y:e},n),e=o),e>a&&(t=bt(a,{x:t,y:e},n),e=a),{x:t,y:e}}function Ca(t,e,n){const{x:o,y:r}=tn(t,e,n),{x:a,y:i}=tn(e,t,n);return{x:o,y:r,x2:a,y2:i,width:Math.abs(a-o),height:Math.abs(i-r)}}function Sa(t,{mouseX:e,mouseY:n},o=ae,r){const{x:a,y:i,x2:s,y2:l}=t.getProps(["x","y","x2","y2"],r),d=s-a,c=l-i,f=Ae(d)+Ae(c),g=f===0?-1:((e-a)*d+(n-i)*c)/f;let C,M;return g<0?(C=a,M=i):g>1?(C=s,M=l):(C=a+g*d,M=i+g*c),Ae(e-C)+Ae(n-M)<=o}function xt(t,{mouseX:e,mouseY:n},o,r){const a=t.label;return a.options.display&&a.inRange(e,n,r,o)}function Ra(t,e,n){const o=n.borderWidth,r=De(n.padding),a=it(t.ctx,n),i=a.width+r.width+o,s=a.height+r.height+o;return Aa(e,n,{width:i,height:s,padding:r},t.chartArea)}function Pa(t){const{x:e,y:n,x2:o,y2:r}=t,a=Math.atan2(r-n,o-e);return a>B/2?a-B:a<B/-2?a+B:a}function Aa(t,e,n,o){const{width:r,height:a,padding:i}=n,{xAdjust:s,yAdjust:l}=e,d={x:t.x,y:t.y},c={x:t.x2,y:t.y2},f=e.rotation==="auto"?Pa(t):J(e.rotation),g=Ta(r,a,f),C=Va(t,e,{labelSize:g,padding:i},o),M=t.cp?vt(d,t.cp,c,C):Et(d,c,C),b={size:g.w,min:o.left,max:o.right,padding:i.left},P={size:g.h,min:o.top,max:o.bottom,padding:i.top},T=on(M.x,b)+s,k=on(M.y,P)+l;return{x:T-r/2,y:k-a/2,x2:T+r/2,y2:k+a/2,centerX:T,centerY:k,pointX:M.x,pointY:M.y,width:r,height:a,rotation:Xo(f)}}function Ta(t,e,n){const o=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*o)}}function Va(t,e,n,o){let r;const a=Ea(t,o);return e.position==="start"?r=nn({w:t.x2-t.x,h:t.y2-t.y},n,e,a):e.position==="end"?r=1-nn({w:t.x-t.x2,h:t.y-t.y2},n,e,a):r=Pt(1,e.position),r}function nn(t,e,n,o){const{labelSize:r,padding:a}=e,i=t.w*o.dx,s=t.h*o.dy,l=i>0&&(r.w/2+a.left-o.x)/i,d=s>0&&(r.h/2+a.top-o.y)/s;return ot(Math.max(l,d),0,.25)}function Ea(t,e){const{x:n,x2:o,y:r,y2:a}=t,i=Math.min(r,a)-e.top,s=Math.min(n,o)-e.left,l=e.bottom-Math.max(r,a),d=e.right-Math.max(n,o);return{x:Math.min(s,d),y:Math.min(i,l),dx:s<=d?1:-1,dy:i<=l?1:-1}}function on(t,e){const{size:n,min:o,max:r,padding:a}=e,i=n/2;return n>r-o?(r+o)/2:(o>=t-a-i&&(t=o+a+i),r<=t+a+i&&(t=r-a-i),t)}function Wn(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:rn(t,n),endAdjust:rn(t,o)}}function rn(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,r=t.options.borderWidth/2,a={x:n,y:o+r};return Math.abs(bt(0,a,{x:0,y:r}))}function wt(t,e,n,o){if(!o||!o.display)return;const{length:r,width:a,fill:i,backgroundColor:s,borderColor:l}=o,d=Math.abs(e-r)+n;t.beginPath(),xe(t,o),K(t,o),t.moveTo(d,-a),t.lineTo(e+n,0),t.lineTo(d,a),i===!0?(t.fillStyle=s||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function Ia(t,e,n){const{x:o,y:r,x2:a,y2:i,centerX:s,centerY:l}=t,d=Math.atan2(i-r,a-o),c=At(e.controlPoint,0),f={x:s+re(n,c.x,!1),y:l+re(n,c.y,!1)};return ue(f,{x:s,y:l},d)}function an(t,{x:e,y:n},{angle:o,adjust:r},a){!a||!a.display||(t.save(),t.translate(e,n),t.rotate(o),wt(t,0,-r,a),t.restore())}function Da(t,e,n,o){const{x:r,y:a,x2:i,y2:s,options:l}=e,{startOpts:d,endOpts:c,startAdjust:f,endAdjust:g}=Wn(e),C={x:r,y:a},M={x:i,y:s},b=Zt(C,n,M,0),P=Zt(C,n,M,1)-B,T=vt(C,n,M,f/o),k=vt(C,n,M,1-g/o),m=new Path2D;t.beginPath(),m.moveTo(T.x,T.y),m.quadraticCurveTo(n.x,n.y,k.x,k.y),t.shadowColor=l.borderShadowColor,t.stroke(m),e.path=m,e.ctx=t,an(t,T,{angle:b,adjust:f},d),an(t,k,{angle:P,adjust:g},c)}class Le extends de{inRange(e,n,o,r){const a=this.options.rotation,i=(this.options.borderWidth+this.options.hitTolerance)/2;if(o!=="x"&&o!=="y")return Oa({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),a,i);const{x:s,y:l,x2:d,y2:c}=this.getProps(["x","y","x2","y2"],r),f=o==="y"?{start:l,end:c}:{start:s,end:d},g=ue({x:e,y:n},this.getCenterPoint(r),J(-a));return g[o]>=f.start-i-ae&&g[o]<=f.end+i+ae}getCenterPoint(e){return ce(this,e)}draw(e){const{width:n,height:o,centerX:r,centerY:a,options:i}=this;e.save(),at(e,this.getCenterPoint(),i.rotation),xe(e,this.options),e.beginPath(),e.fillStyle=i.backgroundColor;const s=K(e,i);e.ellipse(r,a,o/2,n/2,B/2,0,2*B),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return jn(e,n)}}Le.id="ellipseAnnotation";Le.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},we.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Le.defaultRoutes={borderColor:"color",backgroundColor:"color"};Le.descriptors={label:{_fallback:!0}};function Oa(t,e,n,o){const{width:r,height:a,centerX:i,centerY:s}=e,l=r/2,d=a/2;if(l<=0||d<=0)return!1;const c=J(n||0),f=Math.cos(c),g=Math.sin(c),C=Math.pow(f*(t.x-i)+g*(t.y-s),2),M=Math.pow(g*(t.x-i)-f*(t.y-s),2);return C/Math.pow(l+o,2)+M/Math.pow(d+o,2)<=1.0001}class lt extends de{inRange(e,n,o,r){const{x:a,y:i,x2:s,y2:l,width:d}=this.getProps(["x","y","x2","y2","width"],r),c=(this.options.borderWidth+this.options.hitTolerance)/2;return o!=="x"&&o!=="y"?Ar({x:e,y:n},this.getCenterPoint(r),d/2,c):bn(o==="y"?{start:i,end:l,value:n}:{start:a,end:s,value:e},c)}getCenterPoint(e){return ce(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,xe(e,n);const r=K(e,n);$r(e,this,this.centerX,this.centerY),r&&!rt(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=On(e,n);return o.initProperties=ve(e,o,n),o}}lt.id="pointAnnotation";lt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};lt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class dt extends de{inRange(e,n,o,r){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&$a(this.elements,e,n,r);const a=ue({x:e,y:n},this.getCenterPoint(r),J(-this.options.rotation)),i=this.elements.map(d=>o==="y"?d.bY:d.bX),s=Math.min(...i),l=Math.max(...i);return a[o]>=s&&a[o]<=l}getCenterPoint(e){return ce(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,xe(e,o);const r=K(e,o);let a=!0;for(const i of n)a?(e.moveTo(i.x,i.y),a=!1):e.lineTo(i.x,i.y);e.closePath(),e.fill(),r&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=On(e,n),{sides:r,rotation:a}=n,i=[],s=2*B/r;let l=a*hn;for(let d=0;d<r;d++,l+=s){const c=ja(o,n,l);c.initProperties=ve(e,o,n),i.push(c)}return o.elements=i,o}}dt.id="polygonAnnotation";dt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};dt.defaultRoutes={borderColor:"color",backgroundColor:"color"};function ja({centerX:t,centerY:e},{radius:n,borderWidth:o,hitTolerance:r},a){const i=(o+r)/2,s=Math.sin(a),l=Math.cos(a),d={x:t+s*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:d.x,y:d.y,centerX:d.x,centerY:d.y,bX:t+s*(n+i),bY:e-l*(n+i)}}}function $a(t,e,n,o){let r=!1,a=t[t.length-1].getProps(["bX","bY"],o);for(const i of t){const s=i.getProps(["bX","bY"],o);s.bY>n!=a.bY>n&&e<(a.bX-s.bX)*(n-s.bY)/(a.bY-s.bY)+s.bX&&(r=!r),a=s}return r}const oe={box:we,doughnutLabel:st,ellipse:Le,label:je,line:$e,point:lt,polygon:dt};Object.keys(oe).forEach(t=>{pn.describe(`elements.${oe[t].id}`,{_fallback:"plugins.annotation.common"})});const La={update:Object.assign},Wa=Vt.concat(tt),sn=(t,e)=>ie(e)?_t(t,e):t,kt=t=>t==="color"||t==="font";function It(t="line"){return oe[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function za(t,e,n,o){const r=Ha(t,n.animations,o),a=e.annotations,i=Ya(e.elements,a);for(let s=0;s<a.length;s++){const l=a[s],d=zn(i,s,l.type),c=l.setContext(Xa(t,d,i,l)),f=d.resolveElementProperties(t,c);f.skip=Ba(f),"elements"in f&&(Na(d,f.elements,c,r),delete f.elements),q(d.x)||Object.assign(d,f),Object.assign(d,f.initProperties),f.options=Bn(c),r.update(d,f)}}function Ba(t){return isNaN(t.x)||isNaN(t.y)}function Ha(t,e,n){return n==="reset"||n==="none"||n==="resize"?La:new No(t,e)}function Na(t,e,n,o){const r=t.elements||(t.elements=[]);r.length=e.length;for(let a=0;a<e.length;a++){const i=e[a],s=i.properties,l=zn(r,a,i.type,i.initProperties),d=n[i.optionScope].override(i);s.options=Bn(d),o.update(l,s)}}function zn(t,e,n,o){const r=oe[It(n)];let a=t[e];return(!a||!(a instanceof r))&&(a=t[e]=new r,Object.assign(a,o)),a}function Bn(t){const e=oe[It(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,_t(t,e.defaults),_t(t,e.defaultRoutes));for(const o of Wa)n[o]=t[o];return n}function _t(t,e){const n={};for(const o of Object.keys(e)){const r=e[o],a=t[o];kt(o)&&pe(a)?n[o]=a.map(i=>sn(i,r)):n[o]=sn(a,r)}return n}function Xa(t,e,n,o){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:o.id,type:"annotation"}))}function Ya(t,e){const n=e.length,o=t.length;if(o<n){const r=n-o;t.splice(o,0,...new Array(r))}else o>n&&t.splice(n,o-n);return t}var Ua="3.1.0";const te=new Map,ln=t=>t.type!=="doughnutLabel",Ga=Vt.concat(tt);var Fa={id:"annotation",version:Ua,beforeRegister(){Tr("chart.js","4.0",Qe.version)},afterRegister(){Qe.register(oe)},afterUnregister(){Qe.unregister(oe)},beforeInit(t){te.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=te.get(t),r=o.annotations=[];let a=n.annotations;ie(a)?Object.keys(a).forEach(i=>{const s=a[i];ie(s)&&(s.id=i,r.push(s))}):pe(a)&&r.push(...a),ua(r.filter(ln),t.scales)},afterDataLimits(t,e){const n=te.get(t);da(t,e.scale,n.annotations.filter(ln).filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=te.get(t);ra(t,o,n),za(t,o,n,e.mode),o.visibleElements=o.elements.filter(r=>!r.skip&&r.options.display),la(t,o,n)},beforeDatasetsDraw(t,e,n){Re(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Re(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Re(t,e.index,n.clip)},beforeDraw(t,e,n){Re(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Re(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=te.get(t);aa(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){te.delete(t)},getAnnotations(t){const e=te.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Rt(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!Ga.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${oe[It(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:kt,_fallback:!0},_indexable:kt}},additionalOptionScopes:[""]};function Re(t,e,n){const{ctx:o,chartArea:r}=t,a=te.get(t);n&&Lo(o,r);const i=qa(a.visibleElements,e).sort((s,l)=>s.element.options.z-l.element.options.z);for(const s of i)Ka(o,r,a,s);n&&Wo(o)}function qa(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const r of o.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function Ka(t,e,n,o){const r=o.element;o.main?(Gt(n,r,"beforeDraw"),r.draw(t,e),Gt(n,r,"afterDraw")):r.draw(t,e)}/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var dn=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),Ve={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):Te(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var o=[].concat(e),r=o.length,a=t.font,i=0,s;for(t.font=n.string,s=0;s<r;++s)i=Math.max(t.measureText(o[s]).width,i);return t.font=a,{height:r*n.lineHeight,width:i}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),o=[],r,a,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],a=n.indexOf(s),a===-1?o.push([s,1]):n.splice(a,1);for(r=0,i=n.length;r<i;++r)o.push([n[r],-1]);return o},rasterize:function(t){return Math.round(t*dn)/dn}};function yt(t,e){var n=e.x,o=e.y;if(n===null)return{x:0,y:-1};if(o===null)return{x:1,y:0};var r=t.x-n,a=t.y-o,i=Math.sqrt(r*r+a*a);return{x:i?r/i:0,y:i?a/i:-1}}function Ja(t,e,n,o,r){switch(r){case"center":n=o=0;break;case"bottom":n=0,o=1;break;case"right":n=1,o=0;break;case"left":n=-1,o=0;break;case"top":n=0,o=-1;break;case"start":n=-n,o=-o;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),o=Math.sin(r);break}return{x:t,y:e,vx:n,vy:o}}var Qa=0,Hn=1,Nn=2,Xn=4,Yn=8;function Fe(t,e,n){var o=Qa;return t<n.left?o|=Hn:t>n.right&&(o|=Nn),e<n.top?o|=Yn:e>n.bottom&&(o|=Xn),o}function Za(t,e){for(var n=t.x0,o=t.y0,r=t.x1,a=t.y1,i=Fe(n,o,e),s=Fe(r,a,e),l,d,c;!(!(i|s)||i&s);)l=i||s,l&Yn?(d=n+(r-n)*(e.top-o)/(a-o),c=e.top):l&Xn?(d=n+(r-n)*(e.bottom-o)/(a-o),c=e.bottom):l&Nn?(c=o+(a-o)*(e.right-n)/(r-n),d=e.right):l&Hn&&(c=o+(a-o)*(e.left-n)/(r-n),d=e.left),l===i?(n=d,o=c,i=Fe(n,o,e)):(r=d,a=c,s=Fe(r,a,e));return{x0:n,x1:r,y0:o,y1:a}}function qe(t,e){var n=e.anchor,o=t,r,a;return e.clamp&&(o=Za(o,e.area)),n==="start"?(r=o.x0,a=o.y0):n==="end"?(r=o.x1,a=o.y1):(r=(o.x0+o.x1)/2,a=(o.y0+o.y1)/2),Ja(r,a,t.vx,t.vy,e.align)}var Ke={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,o=Math.cos(n),r=Math.sin(n),a=t.innerRadius,i=t.outerRadius;return qe({x0:t.x+o*a,y0:t.y+r*a,x1:t.x+o*i,y1:t.y+r*i,vx:o,vy:r},e)},point:function(t,e){var n=yt(t,e.origin),o=n.x*t.options.radius,r=n.y*t.options.radius;return qe({x0:t.x-o,y0:t.y-r,x1:t.x+o,y1:t.y+r,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=yt(t,e.origin),o=t.x,r=t.y,a=0,i=0;return t.horizontal?(o=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),i=Math.abs(t.base-t.y)),qe({x0:o,y0:r+i,x1:o+a,y1:r,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=yt(t,e.origin);return qe({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},F=Ve.rasterize;function ei(t){var e=t.borderWidth||0,n=t.padding,o=t.size.height,r=t.size.width,a=-r/2,i=-o/2;return{frame:{x:a-n.left-e,y:i-n.top-e,w:r+n.width+e*2,h:o+n.height+e*2},text:{x:a,y:i,w:r,h:o}}}function ti(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var o=n.getBasePixel();return t.horizontal?{x:o,y:null}:{x:null,y:o}}function ni(t){return t instanceof gn?Ke.arc:t instanceof Uo?Ke.point:t instanceof Go?Ke.bar:Ke.fallback}function oi(t,e,n,o,r,a){var i=Math.PI/2;if(a){var s=Math.min(a,r/2,o/2),l=e+s,d=n+s,c=e+o-s,f=n+r-s;t.moveTo(e,d),l<c&&d<f?(t.arc(l,d,s,-Math.PI,-i),t.arc(c,d,s,-i,0),t.arc(c,f,s,0,i),t.arc(l,f,s,i,Math.PI)):l<c?(t.moveTo(l,n),t.arc(c,d,s,-i,i),t.arc(l,d,s,i,Math.PI+i)):d<f?(t.arc(l,d,s,-Math.PI,0),t.arc(l,f,s,0,Math.PI)):t.arc(l,d,s,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,o,r)}function ri(t,e,n){var o=n.backgroundColor,r=n.borderColor,a=n.borderWidth;!o&&(!r||!a)||(t.beginPath(),oi(t,F(e.x)+a/2,F(e.y)+a/2,F(e.w)-a,F(e.h)-a,n.borderRadius),t.closePath(),o&&(t.fillStyle=o,t.fill()),r&&a&&(t.strokeStyle=r,t.lineWidth=a,t.lineJoin="miter",t.stroke()))}function ai(t,e,n){var o=n.lineHeight,r=t.w,a=t.x,i=t.y+o/2;return e==="center"?a+=r/2:(e==="end"||e==="right")&&(a+=r),{h:o,w:r,x:a,y:i}}function ii(t,e,n){var o=t.shadowBlur,r=n.stroked,a=F(n.x),i=F(n.y),s=F(n.w);r&&t.strokeText(e,a,i,s),n.filled&&(o&&r&&(t.shadowBlur=0),t.fillText(e,a,i,s),o&&r&&(t.shadowBlur=o))}function si(t,e,n,o){var r=o.textAlign,a=o.color,i=!!a,s=o.font,l=e.length,d=o.textStrokeColor,c=o.textStrokeWidth,f=d&&c,g;if(!(!l||!i&&!f))for(n=ai(n,r,s),t.font=s.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=o.textShadowBlur,t.shadowColor=o.textShadowColor,i&&(t.fillStyle=a),f&&(t.lineJoin="round",t.lineWidth=c,t.strokeStyle=d),g=0,l=e.length;g<l;++g)ii(t,e[g],{stroked:f,filled:i,w:n.w,x:n.x,y:n.y+n.h*g})}var Un=function(t,e,n,o){var r=this;r._config=t,r._index=o,r._model=null,r._rects=null,r._ctx=e,r._el=n};Ie(Un.prototype,{_modelize:function(t,e,n,o){var r=this,a=r._index,i=Ze(D([n.font,{}],o,a)),s=D([n.color,pn.color],o,a);return{align:D([n.align,"center"],o,a),anchor:D([n.anchor,"center"],o,a),area:o.chart.chartArea,backgroundColor:D([n.backgroundColor,null],o,a),borderColor:D([n.borderColor,null],o,a),borderRadius:D([n.borderRadius,0],o,a),borderWidth:D([n.borderWidth,0],o,a),clamp:D([n.clamp,!1],o,a),clip:D([n.clip,!1],o,a),color:s,display:t,font:i,lines:e,offset:D([n.offset,4],o,a),opacity:D([n.opacity,1],o,a),origin:ti(r._el,o),padding:De(D([n.padding,4],o,a)),positioner:ni(r._el),rotation:D([n.rotation,0],o,a)*(Math.PI/180),size:Ve.textSize(r._ctx,e,i),textAlign:D([n.textAlign,"start"],o,a),textShadowBlur:D([n.textShadowBlur,0],o,a),textShadowColor:D([n.textShadowColor,s],o,a),textStrokeColor:D([n.textStrokeColor,s],o,a),textStrokeWidth:D([n.textStrokeWidth,0],o,a)}},update:function(t){var e=this,n=null,o=null,r=e._index,a=e._config,i,s,l,d=D([a.display,!0],t,r);d&&(i=t.dataset.data[r],s=ye(Oe(a.formatter,[i,t]),i),l=Te(s)?[]:Ve.toTextLines(s),l.length&&(n=e._modelize(d,l,a,t),o=ei(n))),e._model=n,e._rects=o},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,o=t.ctx,r=n._model,a=n._rects,i;this.visible()&&(o.save(),r.clip&&(i=r.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=Ve.bound(0,r.opacity,1),o.translate(F(e.x),F(e.y)),o.rotate(r.rotation),ri(o,a.frame,r),si(o,r.lines,a.text,r),o.restore())}});var li=Number.MIN_SAFE_INTEGER||-9007199254740991,di=Number.MAX_SAFE_INTEGER||9007199254740991;function Pe(t,e,n){var o=Math.cos(n),r=Math.sin(n),a=e.x,i=e.y;return{x:a+o*(t.x-a)-r*(t.y-i),y:i+r*(t.x-a)+o*(t.y-i)}}function un(t,e){var n=di,o=li,r=e.origin,a,i,s,l,d;for(a=0;a<t.length;++a)i=t[a],s=i.x-r.x,l=i.y-r.y,d=e.vx*s+e.vy*l,n=Math.min(n,d),o=Math.max(o,d);return{min:n,max:o}}function Je(t,e){var n=e.x-t.x,o=e.y-t.y,r=Math.sqrt(n*n+o*o);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var Gn=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Ie(Gn.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,o=e._rect;return t=Pe(t,e.center(),-e._rotation),!(t.x<o.x-n||t.y<o.y-n||t.x>o.x+o.w+n*2||t.y>o.y+o.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),o=[Je(e[0],e[1]),Je(e[0],e[3])],r,a,i;for(this._rotation!==t._rotation&&o.push(Je(n[0],n[1]),Je(n[0],n[3])),r=0;r<o.length;++r)if(a=un(e,o[r]),i=un(n,o[r]),a.max<i.min||i.max<a.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,o=t.center();return[Pe({x:e.x,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y},o,n),Pe({x:e.x+e.w,y:e.y+e.h},o,n),Pe({x:e.x,y:e.y+e.h},o,n)]}});function Fn(t,e,n){var o=e.positioner(t,e),r=o.vx,a=o.vy;if(!r&&!a)return{x:o.x,y:o.y};var i=n.w,s=n.h,l=e.rotation,d=Math.abs(i/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),c=Math.abs(i/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),f=1/Math.max(Math.abs(r),Math.abs(a));return d*=r*f,c*=a*f,d+=e.offset*r,c+=e.offset*a,{x:o.x+d,y:o.y+c}}function ui(t,e){var n,o,r,a;for(n=t.length-1;n>=0;--n)for(r=t[n].$layout,o=n-1;o>=0&&r._visible;--o)a=t[o].$layout,a._visible&&r._box.intersects(a._box)&&e(r,a);return t}function ci(t){var e,n,o,r,a,i,s;for(e=0,n=t.length;e<n;++e)o=t[e],r=o.$layout,r._visible&&(s=new Proxy(o._el,{get:(l,d)=>l.getProps([d],!0)[d]}),a=o.geometry(),i=Fn(s,o.model(),a),r._box.update(i,a,o.rotation()));return ui(t,function(l,d){var c=l._hidable,f=d._hidable;c&&f||f?d._visible=!1:c&&(l._visible=!1)})}var Ee={prepare:function(t){var e=[],n,o,r,a,i;for(n=0,r=t.length;n<r;++n)for(o=0,a=t[n].length;o<a;++o)i=t[n][o],e.push(i),i.$layout={_box:new Gn,_hidable:!1,_visible:!0,_set:n,_idx:i._index};return e.sort(function(s,l){var d=s.$layout,c=l.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(e),e},update:function(t){var e=!1,n,o,r,a,i;for(n=0,o=t.length;n<o;++n)r=t[n],a=r.model(),i=r.$layout,i._hidable=a&&a.display==="auto",i._visible=r.visible(),e|=i._hidable;e&&ci(t)},lookup:function(t,e){var n,o;for(n=t.length-1;n>=0;--n)if(o=t[n].$layout,o&&o._visible&&o._box.contains(e))return t[n];return null},draw:function(t,e){var n,o,r,a,i,s;for(n=0,o=e.length;n<o;++n)r=e[n],a=r.$layout,a._visible&&(i=r.geometry(),s=Fn(r._el,r.model(),i),a._box.update(s,i,r.rotation()),r.draw(t,s))}},fi=function(t){if(Te(t))return null;var e=t,n,o,r;if(ie(t))if(!Te(t.label))e=t.label;else if(!Te(t.r))e=t.r;else for(e="",n=Object.keys(t),r=0,o=n.length;r<o;++r)e+=(r!==0?", ":"")+n[r]+": "+t[n[r]];return""+e},hi={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:fi,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},$="$datalabels",qn="$default";function mi(t,e){var n=t.datalabels,o={},r=[],a,i;return n===!1?null:(n===!0&&(n={}),e=Ie({},[e,n]),a=e.labels||{},i=Object.keys(a),delete e.labels,i.length?i.forEach(function(s){a[s]&&r.push(Ie({},[e,a[s],{_key:s}]))}):r.push(e),o=r.reduce(function(s,l){return Yo(l.listeners||{},function(d,c){s[c]=s[c]||{},s[c][l._key||qn]=d}),delete l.listeners,s},{}),{labels:r,listeners:o})}function Mt(t,e,n,o){if(e){var r=n.$context,a=n.$groups,i;e[a._set]&&(i=e[a._set][a._key],i&&Oe(i,[r,o])===!0&&(t[$]._dirty=!0,n.update(r)))}}function yi(t,e,n,o,r){var a,i;!n&&!o||(n?o?n!==o&&(i=a=!0):i=!0:a=!0,i&&Mt(t,e.leave,n,r),a&&Mt(t,e.enter,o,r))}function pi(t,e){var n=t[$],o=n._listeners,r,a;if(!(!o.enter&&!o.leave)){if(e.type==="mousemove")a=Ee.lookup(n._labels,e);else if(e.type!=="mouseout")return;r=n._hovered,n._hovered=a,yi(t,o,r,a,e)}}function gi(t,e){var n=t[$],o=n._listeners.click,r=o&&Ee.lookup(n._labels,e);r&&Mt(t,o,r,e)}var bi={id:"datalabels",defaults:hi,beforeInit:function(t){t[$]={_actives:[]}},beforeUpdate:function(t){var e=t[$];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var o=e.index,r=t[$],a=r._datasets[o]=[],i=t.isDatasetVisible(o),s=t.data.datasets[o],l=mi(s,n),d=e.meta.data||[],c=t.ctx,f,g,C,M,b,P,T,k;for(c.save(),f=0,C=d.length;f<C;++f)if(T=d[f],T[$]=[],i&&T&&t.getDataVisibility(f)&&!T.skip)for(g=0,M=l.labels.length;g<M;++g)b=l.labels[g],P=b._key,k=new Un(b,c,T,f),k.$groups={_set:o,_key:P||qn},k.$context={active:!1,chart:t,dataIndex:f,dataset:s,datasetIndex:o},k.update(k.$context),T[$].push(k),a.push(k);c.restore(),Ie(r._listeners,l.listeners,{merger:function(m,E,z){E[m]=E[m]||{},E[m][e.index]=z[m],r._listened=!0}})},afterUpdate:function(t){t[$]._labels=Ee.prepare(t[$]._datasets)},afterDatasetsDraw:function(t){Ee.draw(t,t[$]._labels)},beforeEvent:function(t,e){if(t[$]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":pi(t,n);break;case"click":gi(t,n);break}}},afterEvent:function(t){var e=t[$],n=e._actives,o=e._actives=t.getActiveElements(),r=Ve.arrayDiff(n,o),a,i,s,l,d,c,f;for(a=0,i=r.length;a<i;++a)if(d=r[a],d[1])for(f=d[0].element[$]||[],s=0,l=f.length;s<l;++s)c=f[s],c.$context.active=d[1]===1,c.update(c.$context);(e._dirty||r.length)&&(Ee.update(e._labels),t.render()),delete e._dirty}};const vi=le({name:"PieChart",__name:"PieChart",props:{data:{},options:{}},setup(t){return Qe.register(gn,Fo,qo,Fa),(e,n)=>(v(),X(u(Ko),{id:"my-chart-id",options:e.options,data:e.data,plugins:[u(bi)]},null,8,["options","data","plugins"]))}}),xi={class:"text-h6 mb-4"},wi={class:"font-weight-medium"},ki={class:"text-right"},_i={class:"text-h6 mb-4"},Mi={class:"font-weight-medium"},Ci={class:"text-right"},Si={class:"text-h6 mb-2"},Ri={class:"d-flex flex-wrap"},Pi={class:"font-weight-medium mr-1"},Ai=le({__name:"TheCationsAndAnions",props:{remineral:{}},setup(t){const{t:e}=be(),n=t,o=j(()=>Jo(n.remineral.concentrationInChangeWater).reduce((s,l)=>s+l,0)),r=j(()=>{const s=Object.entries(n.remineral.cations).filter(([,c])=>c[0]>0);s.sort((c,f)=>f[1][0]-c[1][0]);const l=s.map(([c])=>c),d=s.map(([,c])=>c[1]);return{datasets:[{backgroundColor:["#26A69A","#ff8a65","#29B6F6","#EF5350","#AB47BC"],data:d,datalabels:{color:"white",font:{size:20},formatter:function(c,f){return l[f.dataIndex]}}}]}}),a=j(()=>{const s=Object.entries(n.remineral.anions).filter(([,c])=>c[0]>0);s.sort((c,f)=>f[1][0]-c[1][0]);const l=s.map(([c])=>c),d=s.map(([,c])=>c[1]);return{datasets:[{backgroundColor:["#26A69A","#ff8a65","#29B6F6","#EF5350","#AB47BC"],data:d,datalabels:{color:"white",font:{size:20},formatter:function(c,f){return l[f.dataIndex]}}}]}}),i=j(()=>({responsive:!0,maintainAspectRatio:!0}));return(s,l)=>{const d=vi;return v(),X(pt,null,{default:S(()=>[w(G,{cols:"12",class:"text-h6 text-center"},{default:S(()=>[O(" TDS ~"+y(("format"in s?s.format:u(A))(s.remineral.tds))+" ppm ",1)]),_:1}),w(G,{cols:"5",sm:"2"},{default:S(()=>[p("div",xi,y(u(e)("reminerals.page.cations")),1),p("div",null,[(v(!0),_(I,null,W(s.remineral.cations,(c,f)=>(v(),_("div",{key:f,class:"d-flex justify-space-between mb-3 text-body-2"},[p("div",wi,y(f),1),p("div",ki,[p("div",null,y(("format"in s?s.format:u(A))(c[0]*100))+"%",1),p("div",null,y(("format"in s?s.format:u(A))(c[1]))+", "+y(u(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(G,{cols:"7",sm:"4"},{default:S(()=>[w(d,{data:u(r),options:u(i)},null,8,["data","options"])]),_:1}),w(G,{cols:"5",sm:"2"},{default:S(()=>[p("div",_i,y(u(e)("reminerals.page.anions")),1),p("div",null,[(v(!0),_(I,null,W(s.remineral.anions,(c,f)=>(v(),_("div",{key:f,class:"d-flex justify-space-between mb-3 text-body-2"},[p("div",Mi,y(f),1),p("div",Ci,[p("div",null,y(("format"in s?s.format:u(A))(c[0]*100))+"%",1),p("div",null,y(("format"in s?s.format:u(A))(c[1]))+", "+y(u(e)("units.mg/l")),1)])]))),128))])]),_:1}),w(G,{cols:"7",sm:"4"},{default:S(()=>[w(d,{data:u(a),options:u(i)},null,8,["data","options"])]),_:1}),w(G,{cols:"12"},{default:S(()=>[p("div",Si,y(u(e)("reminerals.page.ionsTotal")),1),p("div",Ri,[(v(!0),_(I,null,W(("sortObject"in s?s.sortObject:u(fn))(s.remineral.concentrationInChangeWater),([c,f])=>(v(),_("span",{key:c,class:"mr-2"},[p("span",Pi,y(c)+":",1),p("span",null,y(("format"in s?s.format:u(A))(f/u(o)*100))+"%",1)]))),128))])]),_:1})]),_:1})}}}),Ti={key:1,class:"text-left"},Vi={class:"text-left"},Ei={key:1},Ii={key:1},Di={class:"d-flex align-center mt-n4"},Oi={style:{width:"40px"}},ji={style:{width:"40px"}},$i={class:"d-flex align-center mt-n4",style:{width:"60px"}},Li=le({name:"TheRemineralsRecipesTable",__name:"TheRemineralsRecipesTable",props:{remineral:{},reagents:{}},setup(t){const{t:e}=be(),n=t,o=[{gh:1,volume:10},{gh:6,volume:10},{gh:8,volume:10}],r=L(null),a=L(null),i=L(n.remineral.changeVolume),s=j(()=>n.reagents.map(b=>b.key));function l(b,P){const T=n.remineral.gh/b,k=n.remineral.changeVolume/P,m=T*k,E={total:0};return n.reagents.forEach(z=>{E[z.key]=z.amount/m,E.total+=z.amount/m}),E}function d(b,P){return n.remineral.doseVolume*(P/n.remineral.changeVolume)*(b/n.remineral.gh)}function c(b){return n.remineral.kh/n.remineral.gh*b}function f(b){return n.remineral.gh/n.remineral.kh*b}function g(b){a.value=c(b)}function C(b){r.value=f(b)}function M(b){i.value=b}return(b,P)=>{const T=nt;return v(),X(Ct,null,{default:S(()=>[p("thead",null,[p("tr",null,[b.remineral.isDry?(v(),_(I,{key:0},[(v(!0),_(I,null,W(u(s),k=>(v(),_("th",{key:k,class:"text-left"},y(k),1))),128)),p("th",null,y(u(e)("common.total")),1)],64)):(v(),_("th",Ti,y(u(e)("reminerals.page.remineralVolume"))+", "+y(u(e)("units.ml")),1)),P[3]||(P[3]=p("th",{class:"text-left"}," Gh/Kh ",-1)),p("th",Vi,y(u(e)("common.volume")),1)])]),p("tbody",null,[(v(),_(I,null,W(o,(k,m)=>p("tr",{key:m},[b.remineral.isDry?(v(),_(I,{key:0},[(v(!0),_(I,null,W(u(s),E=>(v(),_("td",{key:E},y(("format"in b?b.format:u(A))(l(k.gh,k.volume)[E]))+" "+y(u(e)("units.g")),1))),128)),p("td",null,y(("format"in b?b.format:u(A))(l(k.gh,k.volume).total))+" "+y(u(e)("units.g")),1)],64)):(v(),_("td",Ei,y(("format"in b?b.format:u(A))(d(k.gh,k.volume)))+" "+y(u(e)("units.ml")),1)),p("td",null,y(("format"in b?b.format:u(A))(k.gh))+" / "+y(("format"in b?b.format:u(A))(c(k.gh))),1),p("td",null,y(k.volume)+" "+y(u(e)("units.l")),1)])),64)),p("tr",null,[b.remineral.isDry?(v(),_(I,{key:0},[(v(!0),_(I,null,W(u(s),k=>(v(),_("td",{key:k},y(("format"in b?b.format:u(A))(l(u(r),u(i))[k]))+" "+y(u(e)("units.g")),1))),128)),p("td",null,y(("format"in b?b.format:u(A))(l(u(r),u(i)).total))+" "+y(u(e)("units.g")),1)],64)):(v(),_("td",Ii,y(("format"in b?b.format:u(A))(d(u(r),u(i))))+" "+y(u(e)("units.ml")),1)),p("td",null,[p("div",Di,[p("div",Oi,[w(T,{modelValue:u(r),"onUpdate:modelValue":[P[0]||(P[0]=k=>ne(r)?r.value=k:null),g],modelModifiers:{number:!0},placeholder:"Gh",class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue"])]),P[4]||(P[4]=p("div",{class:"mx-2 align-self-end text-h5 font-weight-light"}," / ",-1)),p("div",ji,[w(T,{modelValue:u(a),"onUpdate:modelValue":[P[1]||(P[1]=k=>ne(a)?a.value=k:null),C],modelModifiers:{number:!0},placeholder:"Kh",disabled:u(a)===0,class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","disabled"])])])]),p("td",null,[p("div",$i,[w(T,{modelValue:u(i),"onUpdate:modelValue":[P[2]||(P[2]=k=>ne(i)?i.value=k:null),M],modelModifiers:{number:!0},suffix:u(e)("units.l"),class:"mt-0 pt-0","hide-details":"auto"},null,8,["modelValue","suffix"])])])])])]),_:1})}}}),Wi={class:"d-flex align-end mb-2"},zi={class:"mr-2 mb-1"},Bi={style:{width:"60px"}},Hi={class:"ml-4 mb-1"},Ni=le({name:"TheRemineralsCompoundsTable",__name:"TheRemineralsMixTable",props:{remineral:{}},setup(t){const{t:e}=be(),n=L(100);return(o,r)=>{const a=nt;return v(),_("div",null,[p("div",Wi,[p("div",zi,y(u(e)("reminerals.page.mix.t1")),1),p("div",Bi,[w(a,{modelValue:u(n),"onUpdate:modelValue":r[0]||(r[0]=i=>ne(n)?n.value=i:null),suffix:u(e)("units.g"),"hide-details":"auto",class:"mt-0 pt-0"},null,8,["modelValue","suffix"])]),r[1]||(r[1]=O(" , ")),p("div",Hi,y(u(e)("reminerals.page.mix.t2")),1)]),w(Ct,null,{default:S(()=>[p("thead",null,[p("tr",null,[(v(!0),_(I,null,W(o.remineral.reagents,i=>(v(),_("th",{key:i.key,class:"text-left"},y(i.key),1))),128))])]),p("tbody",null,[p("tr",null,[(v(!0),_(I,null,W(o.remineral.reagents,i=>(v(),_("td",{key:i.key},y(("format"in o?o.format:u(A))(i.amount/o.remineral.totalMass*u(n)))+" "+y(u(e)("units.g")),1))),128))])])]),_:1})])}}}),Kn=[{reagents:[{key:"CaSO4(H2O)2",amount:1.88},{key:"MgSO4(H2O)7",amount:1.28}],changeVolume:10,name:"Kuban Aquariums Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð²Ð·ÑÑ‚ Ñ youtube ÐºÐ°Ð½Ð°Ð»Ð° Kuban Aquariums (https://www.youtube.com/watch?v=KQE7l637Rd8)"},{reagents:[{key:"CaSO4(H2O)2",amount:1.253},{key:"MgSO4(H2O)7",amount:.844}],changeVolume:10,name:"Samomes Gh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaCO3",amount:.708},{key:"MgSO4(H2O)7",amount:.895}],changeVolume:10,name:"Samomes Gh/Kh+",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaCO3",amount:.357},{key:"CaSO4(H2O)2",amount:.641},{key:"MgSO4(H2O)7",amount:.84}],changeVolume:10,name:"Samomes Gh/Kh-",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Samomes"},{reagents:[{key:"CaSO4(H2O)2",amount:.634},{key:"MgSO4(H2O)7",amount:.887},{key:"CaCl2",amount:.38},{key:"K2CO3",amount:.0558},{key:"NaHCO3",amount:.112}],changeVolume:10,name:"Ð ÐµÐ¼Ð¸Ð½ÐµÑ€Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€ Ð¾Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ",description:"Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð Ð¾Ð¼Ð°Ð½Ð° Ð§Ðµ"},{reagents:[{key:"CaCO3",amount:.714},{key:"CaSO4(H2O)2",amount:.395},{key:"MgSO4(H2O)7",amount:1.196}],changeVolume:10,name:"Samomes Gh8/Kh4",description:"Ð­Ñ‚Ð¾Ñ‚ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¡ÐµÑ€ÐµÐ³Ð¸ Ð•Ñ„Ñ€ÐµÐ¼Ð¾Ð²Ð° ;)"}];Kn.sort((t,e)=>t.name.localeCompare(e.name));const Xi={class:"text-h6 text-sm-h5"},Yi={class:"text-subtitle-1"},Ui={class:"text-h6 text-sm-h5"},Gi={class:"text-subtitle-1"},Fi={class:"text-body-2 text-grey-darken-1 mb-2"},qi={key:0},Ki={class:"d-flex ml-4"},Ji={style:{width:"40px"}},Qi={style:{width:"40px"}},Zi={key:0},es=1,Ys=le({__name:"[id]",setup(t){const{t:e}=be(),{appRoutes:n}=Zo(),o=Vo(),r=Eo(),{required:a,positive:i}=er(),s=tr(),l=nr(),{getReagents:d}=or(),c=L(null),f=L([]),g=ht({}),C=ht({}),M=L({}),b=L(null),P=L(null),T=L(null),k=L(null),m=ht(new rr({name:"",description:"",reagents:[],changeVolume:10,doseVolume:10})),E=d(es),z=j(()=>f.value.length>0),Jn=j(()=>f.value.some(h=>h.isLiquid)),Dt=j(()=>m.totalMass>0),Ot=j(()=>Object.values(M.value).some(h=>h===!0));function Q(){Object.entries(m.ghPerReagent).forEach(([h,x])=>{g[h]=A(x)})}function Z(){Object.entries(m.khPerReagent).forEach(([h,x])=>{C[h]=A(x)})}function Y(){b.value=A(m.gh)}function H(){P.value=A(m.kh)}function N(){T.value=A(m.caMgRatio)}function ut(){m.reagents.forEach(h=>{const x=f.value.find(V=>V.key===h.key);x.amount=A(h.amount)})}function Qn(h){h&&(m.doseVolume=h,Q(),Z(),Y(),H(),N())}function Zn(h){h&&(m.changeVolume=h,Q(),Z(),Y(),H(),N())}Io(f,()=>{if(!m.name&&f.value.length===1){const h=f.value[0];m.name=h.text}});function eo(h){h.length>f.value.length&&typeof[...h].pop()=="string"||(f.value=h,m.reagents=[...f.value].map(x=>new Bt(x)),Q(),Z(),Y(),H(),N())}function to(h){M.value[h]=!M.value[h]}function no(h,x){m.setReagentAmount(h,x);const V=f.value.find(ee=>ee.key===x);V.amount=h,g[x]=A(m.ghPerReagent[x]),C[x]=A(m.khPerReagent[x]),Y(),H(),N()}function oo(h,x){const V=m.countReagentAmountByGh(x,h);m.setReagentAmount(V,x.key),g[x.key]=h,x.amount=A(V),C[x.key]=A(m.khPerReagent[x.key]),Y(),H(),N()}function ro(h,x){const V=m.countReagentAmountByKh(x,h);m.setReagentAmount(V,x.key),C[x.key]=h,x.amount=A(V),g[x.key]=A(m.ghPerReagent[x.key]),Y(),H(),N()}function ao(h){h&&(m.updateReagentAmountsByGh(h,M.value),b.value=h,Q(),Z(),H(),N(),ut())}function io(h){h&&(m.updateReagentAmountsByKh(h),P.value=h,Q(),Z(),Y(),N(),ut())}function so(h){h&&(m.updateReagentAmountsByGhAndCaMgRatio(b.value,h),T.value=h,Q(),Z(),H(),ut())}function jt(h){m.name=h.name,m.description=h.description,m.changeVolume=h.changeVolume,m.doseVolume=h.doseVolume}const lo=h=>{if(typeof h=="string"||h===null){k.value=h;return}f.value=[],m.reagents=[],h.reagents.forEach(({key:x,amount:V})=>{const ee=E.find(Ye=>Ye.key===x);ee&&(ee.amount=V,f.value.push(ee),m.reagents.push(ee))}),jt(h),Y(),H(),N(),Q(),Z()},{checkName:uo}=ar(),We=j(()=>o.params.id==="create"),ct=j(()=>o.params.id!=="create"),ze=j(()=>o.query.copy!==void 0),ke=j(()=>o.params.query==="share"),Be=L(!1),He=L(!1),Ne=L(!1),Xe=j(()=>+o.params.id),co=j(()=>uo(m.name)&&!ct.value),fo=()=>!co.value||e("reminerals.page.message.nameExists"),ho=h=>m.isLiquid&&h.amount/m.totalVolume*1e3>h.solubility,mo=h=>m.isLiquid&&h.amount/m.totalVolume*1e3>h.solubility?`${e("validation.solubilityLimit")} - ${h.solubility} ${e("units.g/l")} ${e("common.for")} 25Â°Ð¡!`:"";Do(async()=>{if(We.value&&!ze.value)return;let h;if(ke.value)[h]=JSON.parse(decodeURIComponent(o.params.query));else if(ze.value){const V=o.query.copy;h=JSON.parse(JSON.stringify({...l.remineralRecipes[+V]}))}else ct.value&&(h=JSON.parse(JSON.stringify({...l.remineralRecipes[+Xe.value]})));if(Object.keys(h).length===0){await r.push(n.value.reminerals.path);return}const x={};h.reagents.forEach(V=>{x[V.key]=V}),E.forEach(V=>{V.key in x&&(V.amount=x[V.key].amount,m.reagents.push(V),f.value.push(new Bt({...V.toJson(),amount:A(V.amount)})))}),jt(h),Y(),H(),N(),Q(),Z()});async function yo(){const{valid:h}=await c.value.validate();if(!h){s.showWarning(e("common.isFormErrors"));return}l.addRemineral({...m.toJson()}),s.show(e("reminerals.page.message.add")),await r.push(n.value.reminerals.path)}async function po(){const{valid:h}=await c.value.validate();if(!h){s.showWarning(e("common.isFormErrors"));return}l.editRemineral({index:+Xe.value,remineral:{...m.toJson()}}),s.show(e("reminerals.page.message.edit")),await r.push(n.value.reminerals.path)}async function go(){l.removeRemineral(+Xe.value),s.show(e("reminerals.page.message.remove")),await r.push(n.value.reminerals.path)}async function bo(){s.show(e("reminerals.page.message.copy")),await r.push(`${n.value.reminerals.path}create/?copy=${Xe.value}`)}return Oo({title:e("meta.remineral.title")}),(h,x)=>{const V=Co,ee=So,Ye=Ro,_e=Ao,ft=nt,vo=cn,xo=br,wo=_r,ko=Ai,_o=Li,Mo=Ni;return v(),X(Qo,{class:"mb-12"},{default:S(()=>[w(pt,null,{default:S(()=>[w(V,{path:u(n).reminerals.path},{default:S(()=>[!u(We)&&!u(ke)?(v(),X(Ge,{key:0,color:"primary",class:"ml-auto",size:"small",onClick:bo},{default:S(()=>[O(y(u(e)("buttons.copy")),1)]),_:1})):U("",!0)]),_:1},8,["path"]),w(ee,null,{default:S(()=>[u(We)&&!u(ze)?(v(),_(I,{key:0},[O(y(u(e)("reminerals.page.titleNew")),1)],64)):u(ze)?(v(),_(I,{key:1},[p("div",Xi,y(u(e)("reminerals.page.titleCopy"))+" "+y(u(m).name),1),p("div",Yi,y(u(e)("reminerals.page.subtitleCopy")),1)],64)):u(ke)?(v(),_(I,{key:2},[p("p",Ui,y(u(e)("reminerals.page.titleShare")),1),p("p",Gi,y(u(e)("reminerals.page.subtitleShare")),1)],64)):(v(),_(I,{key:3},[O(y(u(m).name),1)],64))]),_:1}),w(G,{cols:"12",sm:"10",md:"8","offset-sm":"1","offset-md":"2"},{default:S(()=>[w(Po,{ref_key:"remineralFormRef",ref:c},{default:S(()=>[p("div",Fi,y(u(e)("reminerals.page.reagentsHint")),1),w(Ye,{"model-value":u(f),items:u(E),"item-title":"text",label:u(e)("common.reagents"),hint:u(e)("common.comboboxTypingHint"),variant:"underlined",multiple:"","persistent-hint":"","hide-details":"auto","validate-on-blur":"",chips:"","closable-chips":"",rules:[u(a)],class:"mb-2","onUpdate:modelValue":eo},null,8,["model-value","items","label","hint","rules"]),w(Ye,{modelValue:u(k),"onUpdate:modelValue":[x[0]||(x[0]=R=>ne(k)?k.value=R:null),lo],items:"REMINERAL_RECIPES"in h?h.REMINERAL_RECIPES:u(Kn),"item-title":"name",variant:"underlined",label:u(e)("common.recipes"),hint:u(e)("reminerals.page.recipesHint"),"persistent-hint":"","hide-details":"auto"},null,8,["modelValue","items","label","hint"]),w(he,null,{default:S(()=>[u(z)?(v(),_("div",qi,[w(_e,{class:"mt-10 mb-3"},{default:S(()=>[O(y(u(e)("common.reagents")),1)]),_:1}),(v(!0),_(I,null,W(u(f),R=>(v(),_("div",{key:R.key,class:"d-flex align-start mb-4"},[w(ft,{"model-value":R.amount,label:R.text,suffix:R.isLiquid?u(e)("units.ml"):u(e)("units.g"),"hide-details":"auto",disabled:u(M)[R.key],rules:[u(a),u(i)],error:ho(R),"error-messages":mo(R),"onUpdate:modelValue":fe=>no(fe,R.key)},null,8,["model-value","label","suffix","disabled","rules","error","error-messages","onUpdate:modelValue"]),p("div",Ki,[p("div",Ji,[w(ft,{"model-value":u(g)[R.key],label:"Gh",class:"mt-0 pt-0","hide-details":"auto",disabled:u(g)[R.key]===null||u(M)[R.key],"onUpdate:modelValue":fe=>oo(fe,R)},null,8,["model-value","disabled","onUpdate:modelValue"])]),x[7]||(x[7]=p("div",{class:"mx-2 align-self-end mb-1"}," / ",-1)),p("div",Qi,[w(ft,{"model-value":u(C)[R.key],label:"Kh",class:"mt-0 pt-0","hide-details":"auto",disabled:u(C)[R.key]===null||u(M)[R.key],"onUpdate:modelValue":fe=>ro(fe,R)},null,8,["model-value","disabled","onUpdate:modelValue"])]),w(vo,{name:`mdi:${u(M)[R.key]?"lock":"lock-open-variant"}`,size:"24",class:"mt-3 ml-2 align-self-center mr-2 cursor-pointer text-grey-darken-1",onClick:fe=>to(R.key)},null,8,["name","onClick"])])]))),128)),w(xo,{"change-volume":u(m).changeVolume,"dose-volume":u(m).doseVolume,gh:u(b),kh:u(P),"ca-mg-ratio":u(T),remineral:u(m),"kh-disabled":u(Ot),"ca-mg-ratio-disabled":u(Ot),class:"mt-4","onUpdate:changeVolume":Zn,"onUpdate:doseVolume":Qn,"onUpdate:gh":ao,"onUpdate:kh":io,"onUpdate:caMgRatio":so},null,8,["change-volume","dose-volume","gh","kh","ca-mg-ratio","remineral","kh-disabled","ca-mg-ratio-disabled"]),w(he,null,{default:S(()=>[u(Dt)?(v(),_("div",Zi,[w(_e,{modelValue:u(Be),"onUpdate:modelValue":x[1]||(x[1]=R=>ne(Be)?Be.value=R:null),class:"mt-6 mb-4",button:""},{default:S(()=>[O(y(u(m).isLiquid?u(e)("reminerals.page.soluteConcentration"):u(e)("reminerals.page.dryConcentration")),1)]),_:1},8,["modelValue"]),w(he,null,{default:S(()=>[u(Be)?(v(),X(wo,{key:0,remineral:u(m),class:"mb-10"},null,8,["remineral"])):U("",!0)]),_:1}),w(_e,{class:"mt-10 mb-3"},{default:S(()=>[O(y(u(e)("reminerals.page.changeWaterConcentration")),1)]),_:1}),w(ko,{remineral:u(m),class:"mt-4"},null,8,["remineral"]),w(_e,{modelValue:u(He),"onUpdate:modelValue":x[2]||(x[2]=R=>ne(He)?He.value=R:null),class:"mt-6 mb-4",button:""},{default:S(()=>[O(y(u(e)("reminerals.page.portionsTable")),1)]),_:1},8,["modelValue"]),w(he,null,{default:S(()=>[u(He)?(v(),X(_o,{key:0,remineral:u(m),reagents:u(f)},null,8,["remineral","reagents"])):U("",!0)]),_:1}),!u(m).isLiquid&&!u(Jn)?(v(),_(I,{key:0},[w(_e,{modelValue:u(Ne),"onUpdate:modelValue":x[3]||(x[3]=R=>ne(Ne)?Ne.value=R:null),class:"mt-10 mb-3",button:""},{default:S(()=>[O(y(u(e)("reminerals.page.mix.title")),1)]),_:1},8,["modelValue"]),w(he,null,{default:S(()=>[u(Ne)?(v(),X(Mo,{key:0,remineral:u(m)},null,8,["remineral"])):U("",!0)]),_:1})],64)):U("",!0)])):U("",!0)]),_:1})])):U("",!0)]),_:1}),w(he,null,{default:S(()=>[u(Dt)?(v(),X(pt,{key:0,class:"mt-4"},{default:S(()=>[w(G,{cols:"12"},{default:S(()=>[w(sr,{modelValue:u(m).name,"onUpdate:modelValue":x[4]||(x[4]=R=>u(m).name=R),label:u(e)("reminerals.page.name"),hint:u(e)("reminerals.page.nameHint"),variant:"underlined","hide-details":"auto",rules:[u(a),fo],class:"mb-4"},null,8,["modelValue","label","hint","rules"]),w(ir,{modelValue:u(m).description,"onUpdate:modelValue":x[5]||(x[5]=R=>u(m).description=R),label:u(e)("reminerals.page.description"),hint:u(e)("reminerals.page.descriptionHint"),variant:"underlined","hide-details":"auto","auto-grow":"",rows:"1"},null,8,["modelValue","label","hint"])]),_:1}),w(G,{class:"d-flex mt-10",cols:"12"},{default:S(()=>[u(ct)&&!u(ke)?(v(),X(Ge,{key:0,color:"error",onClick:go},{default:S(()=>[O(y(u(e)("buttons.remove")),1)]),_:1})):U("",!0),w(Ge,{class:"ml-auto",onClick:x[6]||(x[6]=R=>h.$router.push(u(n).reminerals.path))},{default:S(()=>[O(y(u(e)("buttons.cancel")),1)]),_:1}),w(Ge,jo({color:"primary",class:"ml-2"},$o(u(We)||u(ke)?{click:yo}:{click:po})),{default:S(()=>[O(y(u(e)("buttons.save")),1)]),_:1},16)]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}});export{Ys as default};
