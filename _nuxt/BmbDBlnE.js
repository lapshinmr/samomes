import{q as B,P as G,E as f,r as A,D,S as O,aw as pe,a2 as C,f as Y,Z as Ue,aq as $e,bu as De,ag as be,ad as Se,bv as je,e as le,k as Je,h as Ve,o as xe,w as J,d as te,t as qe,j as ae,u as Fe,m as H,s as ke,a8 as se,ax as Te,y as U,bw as Ge,b as g,I as F,O as Ye,a9 as ie,av as Ze,a7 as Ke,af as we,N as We,b9 as Xe,z as Qe,a as ee,ab as Ie,Q as oe,R as et,ah as tt}from"./4DDGlPu9.js";import{j as at,V as ne,C as ot,o as nt,q as _e,l as lt,x as Ce,D as st,E as it,t as ut,f as rt,c as q,n as ct,p as vt,y as dt,z as mt}from"./pn0yBbum.js";import{u as ft,b as de,c as gt}from"./DPOVp56R.js";import{f as yt}from"./B931MWyl.js";import{a as z,c as Z,m as ue,e as ht,u as pt,b as bt}from"./B_yGS1YP.js";import{u as St}from"./BJARJ5Mr.js";import{u as Vt}from"./CVm5WXKH.js";import{u as xt}from"./Dw-wCBdr.js";import{u as kt}from"./C-kXbRrJ.js";import{u as Tt}from"./BuzPlw-i.js";import{H as me,R as fe}from"./pIIQsBHX.js";import{a as wt}from"./ChtXI062.js";import{V as It}from"./DpWlsX81.js";import{u as Pe}from"./CIUUx1Lt.js";const j=Symbol.for("vuetify:layout"),Re=Symbol.for("vuetify:layout-item"),ge=1e3,_t=B({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Ct=B({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Le(){const e=G(j);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Pt(e){const l=G(j);if(!l)throw new Error("[Vuetify] Could not find injected layout");const t=e.id??`layout-item-${Ue()}`,a=pe("useLayoutItem");Se(Re,{id:t});const s=C(!1);$e(()=>s.value=!0),De(()=>s.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:r}=l.register(a,{...e,active:f(()=>s.value?!1:e.active.value),id:t});return be(()=>l.unregister(t)),{layoutItemStyles:o,layoutRect:l.layoutRect,layoutItemScrimStyles:r}}const Rt=(e,l,t,a)=>{let s={top:0,left:0,right:0,bottom:0};const o=[{id:"",layer:{...s}}];for(const r of e){const i=l.get(r),n=t.get(r),v=a.get(r);if(!i||!n||!v)continue;const d={...s,[i.value]:parseInt(s[i.value],10)+(v.value?parseInt(n.value,10):0)};o.push({id:r,layer:d}),s=d}return o};function Lt(e){const l=G(j,null),t=f(()=>l?l.rootZIndex.value-100:ge),a=A([]),s=D(new Map),o=D(new Map),r=D(new Map),i=D(new Map),n=D(new Map),{resizeRef:v,contentRect:d}=at(),u=f(()=>{const S=new Map,I=e.overlaps??[];for(const p of I.filter(w=>w.includes(":"))){const[w,k]=p.split(":");if(!a.value.includes(w)||!a.value.includes(k))continue;const y=s.get(w),_=s.get(k),P=o.get(w),E=o.get(k);!y||!_||!P||!E||(S.set(k,{position:y.value,amount:parseInt(P.value,10)}),S.set(w,{position:_.value,amount:-parseInt(E.value,10)}))}return S}),h=f(()=>{const S=[...new Set([...r.values()].map(p=>p.value))].sort((p,w)=>p-w),I=[];for(const p of S){const w=a.value.filter(k=>{var y;return((y=r.get(k))==null?void 0:y.value)===p});I.push(...w)}return Rt(I,s,o,i)}),x=f(()=>!Array.from(n.values()).some(S=>S.value)),c=f(()=>h.value[h.value.length-1].layer),b=f(()=>({"--v-layout-left":O(c.value.left),"--v-layout-right":O(c.value.right),"--v-layout-top":O(c.value.top),"--v-layout-bottom":O(c.value.bottom),...x.value?void 0:{transition:"none"}})),V=f(()=>h.value.slice(1).map((S,I)=>{let{id:p}=S;const{layer:w}=h.value[I],k=o.get(p),y=s.get(p);return{id:p,...w,size:Number(k.value),position:y.value}})),L=S=>V.value.find(I=>I.id===S),m=pe("createLayout"),T=C(!1);Y(()=>{T.value=!0}),Se(j,{register:(S,I)=>{let{id:p,order:w,position:k,layoutSize:y,elementSize:_,active:P,disableTransitions:E,absolute:Ee}=I;r.set(p,w),s.set(p,k),o.set(p,y),i.set(p,P),E&&n.set(p,E);const re=je(Re,m==null?void 0:m.vnode).indexOf(S);re>-1?a.value.splice(re,0,p):a.value.push(p);const ce=f(()=>V.value.findIndex($=>$.id===p)),K=f(()=>t.value+h.value.length*2-ce.value*2),Oe=f(()=>{const $=k.value==="left"||k.value==="right",W=k.value==="right",ze=k.value==="bottom",X=_.value??y.value,Me=X===0?"%":"px",ve={[k.value]:0,zIndex:K.value,transform:`translate${$?"X":"Y"}(${(P.value?0:-(X===0?100:X))*(W||ze?-1:1)}${Me})`,position:Ee.value||t.value!==ge?"absolute":"fixed",...x.value?void 0:{transition:"none"}};if(!T.value)return ve;const R=V.value[ce.value];if(!R)throw new Error(`[Vuetify] Could not find layout item "${p}"`);const Q=u.value.get(p);return Q&&(R[Q.position]+=Q.amount),{...ve,height:$?`calc(100% - ${R.top}px - ${R.bottom}px)`:_.value?`${_.value}px`:void 0,left:W?void 0:`${R.left}px`,right:W?`${R.right}px`:void 0,top:k.value!=="bottom"?`${R.top}px`:void 0,bottom:k.value!=="top"?`${R.bottom}px`:void 0,width:$?_.value?`${_.value}px`:void 0:`calc(100% - ${R.left}px - ${R.right}px)`}}),He=f(()=>({zIndex:K.value-1}));return{layoutItemStyles:Oe,layoutItemScrimStyles:He,zIndex:K}},unregister:S=>{r.delete(S),s.delete(S),o.delete(S),i.delete(S),n.delete(S),a.value=a.value.filter(I=>I!==S)},mainRect:c,mainStyles:b,getLayoutItem:L,items:V,layoutRect:d,rootZIndex:t});const N=f(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),M=f(()=>({zIndex:l?t.value:void 0,position:l?"relative":void 0,overflow:l?"hidden":void 0}));return{layoutClasses:N,layoutStyles:M,getLayoutItem:L,items:V,layoutRect:d,layoutRef:v}}const na=le({name:"LanguageSwitcher",__name:"LanguageSwitcher",emits:["update:modelValue"],setup(e){const{locale:l,locales:t,setLocale:a}=Je(),s=t.value.find(n=>n.code===l.value),o=A({code:s.code||"ru",name:s.name||"Ru"}),r=f(()=>t.value.filter(n=>n.code!==l.value)),i=async()=>{const n=r.value[0];await a(n.code),o.value.code=n.code,o.value.name=n.name};return(n,v)=>(xe(),Ve(ne,{color:"white",onClick:i},{default:J(()=>[te(qe(ae(o).name),1)]),_:1}))}}),ye={webManifest:{href:"/manifest.webmanifest"}},la=le({async setup(){if(ye){const e=A({link:[]});Fe(e);const{webManifest:l}=ye;if(l){const{href:t}=l;e.value.link.push({rel:"manifest",href:t})}}return()=>null}});function Nt(e){const l=C(e());let t=-1;function a(){clearInterval(t)}function s(){a(),Ke(()=>l.value=e())}function o(r){const i=r?getComputedStyle(r):{transitionDuration:.2},n=parseFloat(i.transitionDuration)*1e3||200;if(a(),l.value<=0)return;const v=performance.now();t=window.setInterval(()=>{const d=performance.now()-v+n;l.value=Math.max(e()-d,0),l.value<=0&&a()},n)}return Ze(a),{clear:a,time:l,start:o,reset:s}}const At=B({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...it({location:"bottom"}),...st(),...Ce(),...lt(),...ie(),...Ye(gt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Bt=H()({name:"VSnackbar",props:At(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const a=ke(e,"modelValue"),{positionClasses:s}=ot(e),{scopeId:o}=ft(),{themeClasses:r}=se(e),{colorClasses:i,colorStyles:n,variantClasses:v}=nt(e),{roundedClasses:d}=_e(e),u=Nt(()=>Number(e.timeout)),h=A(),x=A(),c=C(!1),b=C(0),V=A(),L=G(j,void 0);Te(()=>!!L,()=>{const y=Le();we(()=>{V.value=y.mainStyles.value})}),U(a,T),U(()=>e.timeout,T),Y(()=>{a.value&&T()});let m=-1;function T(){u.reset(),window.clearTimeout(m);const y=Number(e.timeout);if(!a.value||y===-1)return;const _=Ge(x.value);u.start(_),m=window.setTimeout(()=>{a.value=!1},y)}function N(){u.reset(),window.clearTimeout(m)}function M(){c.value=!0,N()}function S(){c.value=!1,T()}function I(y){b.value=y.touches[0].clientY}function p(y){Math.abs(b.value-y.changedTouches[0].clientY)>50&&(a.value=!1)}function w(){c.value&&S()}const k=f(()=>e.location.split(" ").reduce((y,_)=>(y[`v-snackbar--${_}`]=!0,y),{}));return z(()=>{const y=de.filterProps(e),_=!!(t.default||t.text||e.text);return g(de,F({ref:h,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},k.value,s.value,e.class],style:[V.value,e.style]},y,{modelValue:a.value,"onUpdate:modelValue":P=>a.value=P,contentProps:F({class:["v-snackbar__wrapper",r.value,i.value,d.value,v.value],style:[n.value],onPointerenter:M,onPointerleave:S},y.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:I,onTouchend:p,onAfterLeave:w},o),{default:()=>{var P,E;return[ut(!1,"v-snackbar"),e.timer&&!c.value&&g("div",{key:"timer",class:"v-snackbar__timer"},[g(rt,{ref:x,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":u.time.value},null)]),_&&g("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((P=t.text)==null?void 0:P.call(t))??e.text,(E=t.default)==null?void 0:E.call(t)]),t.actions&&g(q,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[g("div",{class:"v-snackbar__actions"},[t.actions({isActive:a})])]})]},activator:t.activator})}),yt({},h)}}),Et={class:"d-flex flex-column flex-md-row align-md-center"},Ot={class:"d-flex justify-space-between"},sa=le({__name:"TheUpdateNotification",setup(e){const{mdAndUp:l}=We(),{$pwa:t}=Xe(),a=A(!1);Y(async()=>{a.value=t.needRefresh});function s(){t.updateServiceWorker()}function o(){a.value=!1}return(r,i)=>(xe(),Ve(Bt,{modelValue:ae(a),"onUpdate:modelValue":i[0]||(i[0]=n=>Qe(a)?a.value=n:null),timeout:"-1",location:ae(l)?"right":"bottom"},{default:J(()=>[ee("div",Et,[i[3]||(i[3]=ee("div",{class:"mb-4 mb-md-0"}," Доступно обновление ",-1)),ee("div",Ot,[g(ne,{variant:"outlined",size:"small",class:"ml-md-2 mr-2",onClick:o},{default:J(()=>i[1]||(i[1]=[te(" Позже ")])),_:1}),g(ne,{variant:"outlined",size:"small",onClick:s},{default:J(()=>i[2]||(i[2]=[te(" Обновить ")])),_:1})])])]),_:1},8,["modelValue","location"]))}}),ia=()=>{const e=St(),l=Vt(),t=xt(),a=kt(),{getReagents:s}=Tt();function o(){if(e.isUpdated||(((JSON.parse(localStorage.getItem("udata"))||{}).tanks||[]).forEach(n=>{const v={name:n.name,volume:n.volume,waterChangePercent:n.waterChange,waterChangeVolume:n.waterChangeVolume,filterVolume:n.filter};e.addTank(v)}),e.setUpdated(!0)),!l.isUpdated){const i=(JSON.parse(localStorage.getItem("udata"))||{}).recipes||[],v=s(0),d=v.find(u=>u.key===me);i.forEach(u=>{const h={name:u.name,description:u.note,tankVolume:u.tankVolume,reagents:[]};u.volume&&(d.amount=u.volume,h.reagents.push(d.toJson())),Object.entries(u.mass).forEach(([x,c])=>{const b=v.find(V=>V.key===x);b instanceof fe&&c&&(b.amount=c,h.reagents.push(b.toJson()))}),l.addRecipe(h)}),l.setUpdated(!0)}if(!a.isUpdated){const i=(JSON.parse(localStorage.getItem("udata"))||{}).reminerals||[],v=s(0),d=v.find(u=>u.key===me);i.forEach(u=>{const h={name:u.name,description:u.note,changeVolume:u.volume,doseVolume:u.doseVolume,totalVolume:u.substanceVolume,reagents:[]};u.substanceVolume&&(d.amount=u.substanceVolume,h.reagents.push(d.toJson())),Object.entries(u.mass).forEach(([x,c])=>{const b=v.find(V=>V.key===x);b instanceof fe&&c&&(b.amount=c,h.reagents.push(b.toJson()))}),a.addRemineral(h)}),a.setUpdated(!0)}t.isUpdated||(((JSON.parse(localStorage.getItem("udata"))||{}).fertilizers||[]).forEach(n=>{const v={key:n.name,name:n.name,description:n.note,isPercent:n.isPercent,isLiquid:n.isLiluid||!0,ions:{}};Object.entries(n.elements).forEach(([d,u])=>{u&&(v.ions[d]=u)}),t.addFertilizer(v)}),t.setUpdated(!0))}return{copyOldData:o}},Ht=B({...Z(),..._t({fullHeight:!0}),...ie()},"VApp"),ua=H()({name:"VApp",props:Ht(),setup(e,l){let{slots:t}=l;const a=se(e),{layoutClasses:s,getLayoutItem:o,items:r,layoutRef:i}=Lt(e),{rtlClasses:n}=Ie();return z(()=>{var v;return g("div",{ref:i,class:["v-application",a.themeClasses.value,s.value,n.value,e.class],style:[e.style]},[g("div",{class:"v-application__wrap"},[(v=t.default)==null?void 0:v.call(t)])])}),{getLayoutItem:o,items:r,theme:a}}}),Ne=B({text:String,...Z(),...ue()},"VToolbarTitle"),Ae=H()({name:"VToolbarTitle",props:Ne(),setup(e,l){let{slots:t}=l;return z(()=>{const a=!!(t.default||t.text||e.text);return g(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[a&&g("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),zt=[null,"prominent","default","comfortable","compact"],Be=B({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>zt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...mt(),...Z(),...dt(),...Ce(),...ue({tag:"header"}),...ie()},"VToolbar"),he=H()({name:"VToolbar",props:Be(),setup(e,l){var x;let{slots:t}=l;const{backgroundColorClasses:a,backgroundColorStyles:s}=ht(oe(e,"color")),{borderClasses:o}=ct(e),{elevationClasses:r}=vt(e),{roundedClasses:i}=_e(e),{themeClasses:n}=se(e),{rtlClasses:v}=Ie(),d=C(!!(e.extended||(x=t.extension)!=null&&x.call(t))),u=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),h=f(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return et({VBtn:{variant:"text"}}),z(()=>{var L;const c=!!(e.title||t.title),b=!!(t.image||e.image),V=(L=t.extension)==null?void 0:L.call(t);return d.value=!!(e.extended||V),g(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,o.value,r.value,i.value,n.value,v.value,e.class],style:[s.value,e.style]},{default:()=>[b&&g("div",{key:"image",class:"v-toolbar__image"},[t.image?g(q,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):g(It,{key:"image-img",cover:!0,src:e.image},null)]),g(q,{defaults:{VTabs:{height:O(u.value)}}},{default:()=>{var m,T,N;return[g("div",{class:"v-toolbar__content",style:{height:O(u.value)}},[t.prepend&&g("div",{class:"v-toolbar__prepend"},[(m=t.prepend)==null?void 0:m.call(t)]),c&&g(Ae,{key:"title",text:e.title},{text:t.title}),(T=t.default)==null?void 0:T.call(t),t.append&&g("div",{class:"v-toolbar__append"},[(N=t.append)==null?void 0:N.call(t)])])]}}),g(q,{defaults:{VTabs:{height:O(h.value)}}},{default:()=>[g(wt,null,{default:()=>[d.value&&g("div",{class:"v-toolbar__extension",style:{height:O(h.value)}},[V])]})]})]})}),{contentHeight:u,extensionHeight:h}}}),Mt=B({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ut(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=l;let a=0,s=0;const o=A(null),r=C(0),i=C(0),n=C(0),v=C(!1),d=C(!1),u=f(()=>Number(e.scrollThreshold)),h=f(()=>tt((u.value-r.value)/u.value||0)),x=()=>{const c=o.value;if(!c||t&&!t.value)return;a=r.value,r.value="window"in c?c.pageYOffset:c.scrollTop;const b=c instanceof Window?document.documentElement.scrollHeight:c.scrollHeight;if(s!==b){s=b;return}d.value=r.value<a,n.value=Math.abs(r.value-u.value)};return U(d,()=>{i.value=i.value||r.value}),U(v,()=>{i.value=0}),Y(()=>{U(()=>e.scrollTarget,c=>{var V;const b=c?document.querySelector(c):window;b&&b!==o.value&&((V=o.value)==null||V.removeEventListener("scroll",x),o.value=b,o.value.addEventListener("scroll",x,{passive:!0}))},{immediate:!0})}),be(()=>{var c;(c=o.value)==null||c.removeEventListener("scroll",x)}),t&&U(t,x,{immediate:!0}),{scrollThreshold:u,currentScroll:r,currentThreshold:n,isScrollActive:v,scrollRatio:h,isScrollingUp:d,savedScroll:i}}const $t=B({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Be(),...Ct(),...Mt(),height:{type:[Number,String],default:64}},"VAppBar"),ra=H()({name:"VAppBar",props:$t(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const a=A(),s=ke(e,"modelValue"),o=f(()=>{var T;const m=new Set(((T=e.scrollBehavior)==null?void 0:T.split(" "))??[]);return{hide:m.has("hide"),fullyHide:m.has("fully-hide"),inverted:m.has("inverted"),collapse:m.has("collapse"),elevate:m.has("elevate"),fadeImage:m.has("fade-image")}}),r=f(()=>{const m=o.value;return m.hide||m.fullyHide||m.inverted||m.collapse||m.elevate||m.fadeImage||!s.value}),{currentScroll:i,scrollThreshold:n,isScrollingUp:v,scrollRatio:d}=Ut(e,{canScroll:r}),u=f(()=>o.value.hide||o.value.fullyHide),h=f(()=>e.collapse||o.value.collapse&&(o.value.inverted?d.value>0:d.value===0)),x=f(()=>e.flat||o.value.fullyHide&&!s.value||o.value.elevate&&(o.value.inverted?i.value>0:i.value===0)),c=f(()=>o.value.fadeImage?o.value.inverted?1-d.value:d.value:void 0),b=f(()=>{var N,M;if(o.value.hide&&o.value.inverted)return 0;const m=((N=a.value)==null?void 0:N.contentHeight)??0,T=((M=a.value)==null?void 0:M.extensionHeight)??0;return u.value?i.value<n.value||o.value.fullyHide?m+T:m:m+T});Te(f(()=>!!e.scrollBehavior),()=>{we(()=>{u.value?o.value.inverted?s.value=i.value>n.value:s.value=v.value||i.value<n.value:s.value=!0})});const{ssrBootStyles:V}=Pe(),{layoutItemStyles:L}=Pt({id:e.name,order:f(()=>parseInt(e.order,10)),position:oe(e,"location"),layoutSize:b,elementSize:C(void 0),active:s,absolute:oe(e,"absolute")});return z(()=>{const m=he.filterProps(e);return g(he,F({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...L.value,"--v-toolbar-image-opacity":c.value,height:void 0,...V.value},e.style]},m,{collapse:h.value,flat:x.value}),t)}),{}}}),ca=H()({name:"VAppBarTitle",props:Ne(),setup(e,l){let{slots:t}=l;return z(()=>g(Ae,F(e,{class:"v-app-bar-title"}),t)),{}}}),Dt=B({scrollable:Boolean,...Z(),...bt(),...ue({tag:"main"})},"VMain"),va=H()({name:"VMain",props:Dt(),setup(e,l){let{slots:t}=l;const{dimensionStyles:a}=pt(e),{mainStyles:s}=Le(),{ssrBootStyles:o}=Pe();return z(()=>g(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,o.value,a.value,e.style]},{default:()=>{var r,i;return[e.scrollable?g("div",{class:"v-main__scroller"},[(r=t.default)==null?void 0:r.call(t)]):(i=t.default)==null?void 0:i.call(t)]}})),{}}});export{ua as V,na as _,ia as a,ra as b,ca as c,la as d,Bt as e,sa as f,va as g,Ct as m,Pt as u};
