import{_ as pe}from"./CvLXgk9o.js";import{_ as fe}from"./DIra7s3Q.js";import{V as ce,_ as he}from"./AlMIrVF_.js";import{_ as ve}from"./B3vb3TPU.js";import{_ as B}from"./DVlJ22pm.js";import{e as ge,k as Ve,G as _e,F as ze,E as m,r as k,D as be,y as T,f as xe,A as ye,h,w as n,o as p,b as s,j as e,c as O,H as U,d,t as o,a as _,i as z,z as K,L as ke,I as Ie,J as Ee,_ as Fe}from"./Dt_hY5Oj.js";import{u as we}from"./BXcduvnD.js";import{u as Ne}from"./DLpJezXQ.js";import{u as Pe}from"./B9H1_PTo.js";import{u as Ae}from"./CEN6kidz.js";import{F as Ce,a as Re}from"./NKOkaf8o.js";import{F as Oe}from"./D2vPiwbM.js";import{A as Ue}from"./Ch8e8etN.js";import{t as Le}from"./BBggtmFf.js";import{u as Se,V as He}from"./B5gNLraP.js";import{a as J}from"./DVYLtouC.js";import{b as qe,a as D,V as I}from"./MZDb2Wcg.js";import{V as W}from"./BxRMjWIg.js";import{a as $,V as E}from"./BjC2Z3pJ.js";import{V as Me}from"./Bcp7-2_3.js";import{V as L}from"./BFeFc3tU.js";import"./BZRvyWuu.js";import"./CVKIk_o5.js";import"./B931MWyl.js";import"./Cut41Rwg.js";import"./CDHuI93o.js";import"./BbdJ6orW.js";import"./DN4H-Mtc.js";import"./DD68NtD1.js";import"./D9OwnUGw.js";import"./BjkILM8G.js";import"./DH5RAi3T.js";import"./C7OuhF3l.js";import"./Ct-l0l1E.js";import"./BLuUstuC.js";import"./CCfVRiHa.js";import"./pIIQsBHX.js";import"./DHChNhVW.js";import"./Qrnf7WDO.js";import"./CgbmeEYS.js";/* empty css        */const Be={class:"mb-4"},Te={class:"text-body-2 text-grey-darken-1"},Ke={class:"d-flex mt-10"},Je=ge({__name:"[id]",setup(De){const{t:l,locale:G}=Ve(),b=_e(),F=ze(),{appRoutes:v}=we(),{required:w}=Ne(),x=Pe(),g=Ae(),Z=m(()=>{const t=JSON.parse(JSON.stringify(Ce));return G.value==="en"&&Re.forEach(i=>{const f=t.find(C=>i.key===C.key);f&&(f.name=i.name,f.description=i.description)}),t.sort((i,f)=>i.name.localeCompare(f.name)),t}),N=k(null),u=k([]),c=k(null),V=k(!1),a=be(new Oe({name:"",description:"",ions:{},isLiquid:!0,isPercent:!0,updatedAt:"",hardness:{gh:null,kh:null,amount:null,volume:null}})),j=m(()=>!!u.value.find(({ion:t})=>["N","NO3"].includes(t))),Q=m(()=>!!u.value.find(({ion:t})=>["P","PO4","P2O5"].includes(t))),X=m(()=>!!u.value.find(({ion:t})=>["K","K2O"].includes(t))),Y=m(()=>!!u.value.find(({ion:t})=>["Ca","CaO"].includes(t))),ee=m(()=>!!u.value.find(({ion:t})=>["Mg","MgO"].includes(t))),te=m(()=>{const t=[];for(const i of Ue)j.value&&["N","NO3"].includes(i)||Q.value&&["P","PO4","P2O5"].includes(i)||X.value&&["K","K2O"].includes(i)||Y.value&&["Ca","CaO"].includes(i)||ee.value&&["Mg","MgO"].includes(i)||t.push({ion:i,conc:null});return t});function S(t){a.name=t.name,a.description=t.description,a.isPercent=t.isPercent,a.isLiquid=t.isLiquid,a.updatedAt=t.updatedAt,a.hardness={...t.hardness},t.hardness&&(V.value=!0),Le(t.ions).forEach(([i,f])=>{u.value.push({ion:i,conc:f})})}function H(){a.name="",a.description="",a.isPercent=!1,a.updatedAt=void 0,u.value=[],a.ions={}}T(c,t=>{if(t===null||typeof t=="string"){H();return}H(),S(t)}),T(u,()=>{u.value.forEach(({ion:t,conc:i})=>{a.ions[t]=i})},{deep:!0});const{checkName:le}=Se(),P=m(()=>F.params.id==="create"),q=m(()=>F.params.id!=="create"),A=m(()=>+F.params.id),ie=m(()=>{var t;return c.value!==null&&typeof c.value!="string"&&((t=c.value)==null?void 0:t.isPercent)!==a.isPercent}),ae=m(()=>le(a.name)&&!q.value),se=()=>!ae.value||l("fertilizers.page.message.nameExists");xe(async()=>{if(P.value)return;const t={...x.fertilizers[A.value]};if(!t){await b.push(v.value.fertilizers.path);return}S(t)});function re(t){t.length>u.value.length&&typeof[...t].pop()=="string"||(u.value=t)}async function ne(){const{valid:t}=await N.value.validate();if(!t){g.showWarning(l("common.isFormErrors"));return}x.addFertilizer(a.toJson()),g.show(l("fertilizers.page.message.fertilizerAdded")),await b.push(v.value.fertilizers.path)}async function oe(){const{valid:t}=await N.value.validate();if(!t){g.showWarning(l("common.isFormErrors"));return}x.editFertilizer({index:A.value,fertilizer:a.toJson()}),g.show(l("fertilizers.page.message.fertilizerEdited")),await b.push(v.value.fertilizers.path)}async function ue(){x.removeFertilizer(A.value),g.show(l("fertilizers.page.message.fertilizerRemoved")),await b.push(v.value.fertilizers.path)}return ye({title:l("meta.fertilizer.title")}),(t,i)=>{const f=pe,C=fe,R=he,M=ve,de=B,y=B;return p(),h(qe,{class:"mb-12"},{default:n(()=>[s(D,null,{default:n(()=>[s(f,{path:e(v).fertilizers.path},null,8,["path"]),s(C,null,{default:n(()=>[e(P)?(p(),O(U,{key:0},[d(o(e(l)("fertilizers.page.titleNew")),1)],64)):(p(),O(U,{key:1},[d(o(e(a).name),1)],64))]),_:1}),s(I,{cols:"12",sm:"10",md:"8","offset-sm":"1","offset-md":"2"},{default:n(()=>[s(ce,{ref_key:"fertilizerFormRef",ref:N},{default:n(()=>[_("div",null,[d(o(e(l)("fertilizers.page.formDescription"))+" ",1),s(R,{class:"mb-3 mt-10"},{default:n(()=>[d(o(e(l)("common.or")),1)]),_:1})]),s(M,{modelValue:e(c),"onUpdate:modelValue":i[0]||(i[0]=r=>K(c)?c.value=r:null),items:e(Z),variant:"underlined",label:e(l)("fertilizers.page.fertilizers"),hint:e(l)("fertilizers.page.fertilizersHint"),"persistent-hint":"","item-title":"name","hide-details":"auto"},null,8,["modelValue","items","label","hint"]),e(a).updatedAt?(p(),h(W,{key:0,type:"success",class:"mt-2"},{default:n(()=>[d(o(e(l)("fertilizers.page.alertInfo"))+" "+o(e(a).updatedAt),1)]),_:1})):z("",!0),s(R,{class:"mt-10 mb-3"},{default:n(()=>[d(o(e(l)("fertilizers.card.composition")),1)]),_:1}),s($,{modelValue:e(a).isLiquid,"onUpdate:modelValue":i[1]||(i[1]=r=>e(a).isLiquid=r),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:n(()=>[s(E,{label:e(l)("common.liquid"),value:!0},null,8,["label"]),s(E,{label:e(l)("common.dry"),value:!1},null,8,["label"])]),_:1},8,["modelValue"]),s(J,null,{default:n(()=>[e(a).isLiquid?(p(),h($,{key:0,modelValue:e(a).isPercent,"onUpdate:modelValue":i[2]||(i[2]=r=>e(a).isPercent=r),inline:"",color:"primary",class:"mt-3 ml-n2","hide-details":"auto"},{default:n(()=>[s(E,{label:e(l)("units.g/l"),value:!1},null,8,["label"]),s(E,{label:"%",value:!0})]),_:1},8,["modelValue"])):z("",!0)]),_:1}),e(ie)?(p(),h(W,{key:1,type:"error",class:"mt-4"},{default:n(()=>[d(o(e(l)("fertilizers.page.alertWarning")),1)]),_:1})):z("",!0),s(M,{"model-value":e(u),items:e(te),"item-title":"ion",variant:"underlined",label:e(l)("fertilizers.page.ionsInput"),hint:e(l)("fertilizers.page.ionsInputHint"),"persistent-hint":"","hide-details":"auto",multiple:"",chips:"","closable-chips":"",rules:[e(w)],class:"mb-4","onUpdate:modelValue":re},null,8,["model-value","items","label","hint","rules"]),(p(!0),O(U,null,ke(e(u),r=>(p(),h(de,{key:r.ion,modelValue:r.conc,"onUpdate:modelValue":me=>r.conc=me,label:r.ion,suffix:e(a).isPercent?"%":e(l)("units.g/l"),variant:"underlined","persistent-placeholder":"",placeholder:"0","hide-details":"auto",rules:[e(w)],class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","label","suffix","rules"]))),128)),s(R,{modelValue:e(V),"onUpdate:modelValue":i[3]||(i[3]=r=>K(V)?V.value=r:null),button:"",class:"mt-10 mb-3"},{default:n(()=>[d(o(e(l)("fertilizers.page.remineral")),1)]),_:1},8,["modelValue"]),s(J,null,{default:n(()=>[e(V)?(p(),h(D,{key:0,class:"d-flex flex-wrap mb-2"},{default:n(()=>[s(I,{cols:"12"},{default:n(()=>[_("div",Be,o(e(l)("fertilizers.page.remineralInstruction")),1),_("div",Te,[d(o(e(l)("fertilizers.page.remineralExample1")),1),i[10]||(i[10]=_("br",null,null,-1)),d(" "+o(e(l)("fertilizers.page.remineralExample2")),1)])]),_:1}),s(I,{cols:"6"},{default:n(()=>[s(y,{modelValue:e(a).hardness.gh,"onUpdate:modelValue":i[4]||(i[4]=r=>e(a).hardness.gh=r),label:e(l)("fertilizers.page.ghInput"),suffix:"Gh",hint:e(l)("fertilizers.page.ghInputHint"),"hide-details":"auto"},null,8,["modelValue","label","hint"]),s(y,{modelValue:e(a).hardness.amount,"onUpdate:modelValue":i[5]||(i[5]=r=>e(a).hardness.amount=r),label:e(l)("fertilizers.page.remineralAmountInput"),hint:e(l)("fertilizers.page.remineralAmountInputHint"),suffix:e(a).isLiquid?e(l)("units.ml"):e(l)("units.g"),"hide-details":"auto"},null,8,["modelValue","label","hint","suffix"])]),_:1}),s(I,{cols:"6"},{default:n(()=>[s(y,{modelValue:e(a).hardness.kh,"onUpdate:modelValue":i[6]||(i[6]=r=>e(a).hardness.kh=r),label:e(l)("fertilizers.page.khInput"),suffix:"Kh",hint:e(l)("fertilizers.page.khInputHint"),"hide-details":"auto"},null,8,["modelValue","label","hint"]),s(y,{modelValue:e(a).hardness.volume,"onUpdate:modelValue":i[7]||(i[7]=r=>e(a).hardness.volume=r),label:e(l)("fertilizers.page.remineralVolumeInput"),hint:e(l)("fertilizers.page.remineralVolumeInputHint"),suffix:e(l)("units.l"),"hide-details":"auto"},null,8,["modelValue","label","hint","suffix"])]),_:1})]),_:1})):z("",!0)]),_:1}),s(Me,{modelValue:e(a).name,"onUpdate:modelValue":i[8]||(i[8]=r=>e(a).name=r),variant:"underlined",label:e(l)("fertilizers.page.name"),hint:e(l)("fertilizers.page.nameHint"),"hide-details":"auto",rules:[e(w),se],class:"mb-2 mt-8"},null,8,["modelValue","label","hint","rules"]),s(He,{modelValue:e(a).description,"onUpdate:modelValue":i[9]||(i[9]=r=>e(a).description=r),variant:"underlined",label:e(l)("fertilizers.page.description"),hint:e(l)("fertilizers.page.descriptionHint"),"hide-details":"auto","auto-grow":"",rows:"1"},null,8,["modelValue","label","hint"]),_("div",Ke,[e(q)?(p(),h(L,{key:0,color:"error",onClick:ue},{default:n(()=>[d(o(e(l)("buttons.remove")),1)]),_:1})):z("",!0),s(L,{class:"ml-auto",to:e(v).fertilizers.path},{default:n(()=>[d(o(e(l)("buttons.cancel")),1)]),_:1},8,["to"]),s(L,Ie({color:"primary",class:"ml-2"},Ee(e(P)?{click:ne}:{click:oe})),{default:n(()=>[d(o(e(l)("buttons.save")),1)]),_:1},16)])]),_:1},512)]),_:1})]),_:1})]),_:1})}}}),Rt=Fe(Je,[["__scopeId","data-v-7ceaf426"]]);export{Rt as default};
