import{_ as O}from"./DVlJ22pm.js";import D from"./DQiwTzrJ.js";import{f as d}from"./DHChNhVW.js";import{k as B,e as F,r as S,D as L,y as U,c as E,o as C,b as m,w as b,j as o,z as x,H as A,L as G,d as y,a as R,i as K,t}from"./Dt_hY5Oj.js";import{u as W}from"./D_-iPc65.js";import{F as j}from"./CCfVRiHa.js";import{H as q}from"./pIIQsBHX.js";import{a as J,V as P}from"./MZDb2Wcg.js";import{a as Q,V as X}from"./BjC2Z3pJ.js";import{V as Y}from"./BxRMjWIg.js";const Z=()=>{const{t:p}=B();return{checkSolubilityError:(s,g,V=!0)=>V&&s.amount/g*1e3>s.solubility,getSolubilityErrorMessage:(s,g,V=!0)=>V&&s.amount/g*1e3>s.solubility?`${p("validation.solubilityLimit")} - ${s.solubility} ${p("units.g/l")} ${p("common.for")} 25°С!`:""}},_=0,mo=F({__name:"Calculator",props:{reagentName:{},ion:{},ionSecondary:{},doseInit:{},doseExamples:{},volume:{}},setup(p){const u=p,{t:e}=B(),{getReagents:s}=W(),{checkSolubilityError:g,getSolubilityErrorMessage:V}=Z(),N=s(_),I=e("articles.common.another"),T=[...u.doseExamples,I],f=S(u.doseInit),c=S({}),i=L(new j({name:"",description:"",tankVolume:100,reagents:[N.find(n=>n.key===q),N.find(n=>n.key===u.reagentName)]})),v=i.reagents[0],l=i.reagents[1];v.amount=u.volume,U(()=>l.amount,()=>{c.value=i.countReagentUnitConcsByAmount(l)}),U(f,n=>{typeof f.value!="string"&&(l.amount=d(i.countReagentAmountByUnitConc(n,l,u.ion)))},{immediate:!0});function $(){l.amount=d(i.countReagentAmountByUnitConc(c.value[u.ion],l,u.ion))}function M(){l.amount=d(i.countReagentAmountByUnitConc(c.value[u.ion],l,u.ion))}function w(n){l.amount=n}function z(n){l.amount=d(i.countReagentAmountByUnitConc(n,l,u.ion))}return(n,a)=>{const k=O,H=D;return C(),E("div",null,[m(J,null,{default:b(()=>[m(P,{cols:"12",md:"10","offset-md":"1"},{default:b(()=>[m(k,{modelValue:o(i).tankVolume,"onUpdate:modelValue":[a[0]||(a[0]=r=>o(i).tankVolume=r),$],label:o(e)("articles.common.tankVolume"),suffix:o(e)("units.l"),variant:"outlined"},null,8,["modelValue","label","suffix"]),m(k,{modelValue:o(v).amount,"onUpdate:modelValue":[a[1]||(a[1]=r=>o(v).amount=r),M],label:o(e)("articles.common.fertilizerVolume"),suffix:o(e)("units.ml"),variant:"outlined"},null,8,["modelValue","label","suffix"]),m(Q,{modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=r=>x(f)?f.value=r:null),inline:"",color:"primary",class:"mt-0"},{default:b(()=>[(C(),E(A,null,G(T,r=>m(X,{key:r,label:`${r} ${r!==o(I)?o(e)("units.mg/l"):""}`,value:r},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),m(k,{"model-value":o(c)[n.ion],label:o(e)("articles.common.unitConc"),suffix:o(e)("units.mg/l"),variant:"outlined",disabled:typeof o(f)=="number","onUpdate:modelValue":z},null,8,["model-value","label","suffix","disabled"]),m(k,{modelValue:o(l).amount,"onUpdate:modelValue":[a[3]||(a[3]=r=>o(l).amount=r),w],label:o(e)("articles.common.reagentMass",{reagentName:n.reagentName}),suffix:o(e)("units.g"),variant:"outlined",error:o(g)(o(l),o(i).totalVolume),"error-messages":o(V)(o(l),o(i).totalVolume)},null,8,["modelValue","label","suffix","error","error-messages"])]),_:1})]),_:1}),m(Y,{type:"success",class:"mt-4 mb-10"},{prepend:b(()=>[m(H,{name:"mdi-receipt-text",size:"24"})]),default:b(()=>[y(" "+t(o(e)("articles.common.recipe"))+": ",1),a[4]||(a[4]=R("br",null,null,-1)),a[5]||(a[5]=R("br",null,null,-1)),y(" "+t(o(l).amount?("format"in n?n.format:o(d))(o(l).amount):"-")+" "+t(o(e)("units.g"))+" "+t(n.reagentName)+" "+t(o(e)("articles.common.dissolve"))+" "+t(o(e)("articles.common.in"))+" "+t(o(v).amount)+" "+t(o(e)("units.ml"))+" "+t(o(e)("articles.common.ofWater"))+". ",1),a[6]||(a[6]=R("br",null,null,-1)),a[7]||(a[7]=R("br",null,null,-1)),y(" 1 "+t(o(e)("units.ml"))+" "+t(o(e)("articles.common.fertilizerIncrease"))+" "+t(n.ion)+" "+t(o(e)("articles.common.on"))+" "+t(o(c)[n.ion]?("format"in n?n.format:o(d))(o(c)[n.ion],2):"-")+" "+t(o(e)("units.mg/l"))+" ",1),n.ionSecondary?(C(),E(A,{key:0},[y(t(o(e)("articles.common.and"))+" "+t(n.ionSecondary)+" "+t(o(e)("articles.common.on"))+" "+t(o(c).K?("format"in n?n.format:o(d))(o(c).K,2):"-")+" "+t(o(e)("units.mg/l")),1)],64)):K("",!0),y(" "+t(o(e)("articles.common.inTheTank"))+" "+t(o(i).tankVolume)+" "+t(o(e)("units.l")),1)]),_:1})])}}});export{mo as _};
