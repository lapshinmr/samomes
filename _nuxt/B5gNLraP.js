import{u as Z}from"./BLuUstuC.js";import{u as ee}from"./B9H1_PTo.js";import{u as te}from"./Qrnf7WDO.js";import{m as ae,q as ne,s as le,E as P,r as x,a2 as oe,af as ie,f as re,y as g,ag as ue,$ as se,b as i,I as z,a7 as p,S as ce,ah as de,H,v as G,x as fe,ai as ve,aj as me}from"./Dt_hY5Oj.js";import{u as xe,a as D,f as ge,b as he,m as we,c as Ve,d as ye}from"./Bcp7-2_3.js";import{f as Fe}from"./B931MWyl.js";import{I as Ce}from"./BbdJ6orW.js";import{a as Pe}from"./CVKIk_o5.js";const Me=()=>{const e=Z(),S=ee(),m=te();function h(n){const l=e.fertilizerRecipes.map(d=>d.name),c=S.fertilizers.map(d=>d.name),R=m.remineralRecipes.map(d=>d.name);return l.includes(n)||c.includes(n)||R.includes(n)}return{checkName:h}},Se=ne({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...we(),...he()},"VTextarea"),Be=ae()({name:"VTextarea",directives:{Intersect:Ce},inheritAttrs:!1,props:Se(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,S){let{attrs:m,emit:h,slots:n}=S;const l=le(e,"modelValue"),{isFocused:c,focus:R,blur:d}=xe(e),U=P(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),O=P(()=>{if(m.maxlength)return m.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function $(t,o){var a,r;!e.autofocus||!t||(r=(a=o[0].target)==null?void 0:a.focus)==null||r.call(a)}const M=x(),w=x(),B=oe(""),V=x(),j=P(()=>e.persistentPlaceholder||c.value||e.active);function I(){var t;V.value!==document.activeElement&&((t=V.value)==null||t.focus()),c.value||R()}function q(t){I(),h("click:control",t)}function J(t){h("mousedown:control",t)}function K(t){t.stopPropagation(),I(),p(()=>{l.value="",me(e["onClick:clear"],t)})}function L(t){var a;const o=t.target;if(l.value=o.value,(a=e.modelModifiers)!=null&&a.trim){const r=[o.selectionStart,o.selectionEnd];p(()=>{o.selectionStart=r[0],o.selectionEnd=r[1]})}}const f=x(),y=x(Number(e.rows)),b=P(()=>["plain","underlined"].includes(e.variant));ie(()=>{e.autoGrow||(y.value=Number(e.rows))});function v(){e.autoGrow&&p(()=>{if(!f.value||!w.value)return;const t=getComputedStyle(f.value),o=getComputedStyle(w.value.$el),a=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),r=f.value.scrollHeight,F=parseFloat(t.lineHeight),k=Math.max(parseFloat(e.rows)*F+a,parseFloat(o.getPropertyValue("--v-input-control-height"))),N=parseFloat(e.maxRows)*F+a||1/0,s=de(r??0,k,N);y.value=Math.floor((s-a)/F),B.value=ce(s)})}re(v),g(l,v),g(()=>e.rows,v),g(()=>e.maxRows,v),g(()=>e.density,v);let u;return g(f,t=>{t?(u=new ResizeObserver(v),u.observe(f.value)):u==null||u.disconnect()}),ue(()=>{u==null||u.disconnect()}),Pe(()=>{const t=!!(n.counter||e.counter||e.counterValue),o=!!(t||n.details),[a,r]=se(m),{modelValue:F,...k}=D.filterProps(e),N=ge(e);return i(D,z({ref:M,modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":b.value},e.class],style:e.style},a,k,{centerAffix:y.value===1&&!b.value,focused:c.value}),{...n,default:s=>{let{id:C,isDisabled:A,isDirty:E,isReadonly:Q,isValid:W}=s;return i(ye,z({ref:w,style:{"--v-textarea-control-height":B.value},onClick:q,onMousedown:J,"onClick:clear":K,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},N,{id:C.value,active:j.value||E.value,centerAffix:y.value===1&&!b.value,dirty:E.value||e.dirty,disabled:A.value,focused:c.value,error:W.value===!1}),{...n,default:X=>{let{props:{class:T,..._}}=X;return i(H,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),G(i("textarea",z({ref:V,class:T,value:l.value,onInput:L,autofocus:e.autofocus,readonly:Q.value,disabled:A.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:d},_,r),null),[[fe("intersect"),{handler:$},null,{once:!0}]]),e.autoGrow&&G(i("textarea",{class:[T,"v-textarea__sizer"],id:`${_.id}-sizer`,"onUpdate:modelValue":Y=>l.value=Y,ref:f,readonly:!0,"aria-hidden":"true"},null),[[ve,l.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:o?s=>{var C;return i(H,null,[(C=n.details)==null?void 0:C.call(n,s),t&&i(H,null,[i("span",null,null),i(Ve,{active:e.persistentCounter||c.value,value:U.value,max:O.value,disabled:e.disabled},n.counter)])])}:void 0})}),Fe({},M,w,V)}});export{Be as V,Me as u};
