<!--
  Samomes

  Copyright (C) 2025 Mikhail Lapshin

  This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0
  International License. To view a copy of this license, visit
  http://creativecommons.org/licenses/by-nc-sa/4.0/ or send a letter to
  Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

  You are free to:
  - Share ‚Äî copy and redistribute the material in any medium or format
  - Adapt ‚Äî remix, transform, and build upon the material

  Under the following terms:
  - Attribution ‚Äî You must give appropriate credit
  - NonCommercial ‚Äî You may not use the material for commercial purposes
  - ShareAlike ‚Äî If you remix, transform, or build upon the material,
    you must distribute your contributions under the same license as the original

  No warranties are given. The license may not give you all of the permissions
  necessary for your intended use.
-->

<template>
  <v-container class="post">
    <v-row>
      <v-col>
        <NuxtImg
          src="/images/indica.jpeg"
          class="full-width-image"
          quality="50"
          sizes="100vw sm:100vw md:100vw lg:100vw xl:100vw xxl:100vw"
          alt="Easiest phosphate recipe"
          :placeholder="[50, 25, 75, 5]"
          format="webp"
        />
      </v-col>
    </v-row>
    <v-row>
      <v-col
        cols="12"
        sm="10"
        md="8"
        offset-sm="1"
        offset-md="2"
      >
        <v-btn
          color="primary"
          class="mr-0"
          square
          :to="localePath('/articles/')"
        >
          <v-icon>mdi-chevron-left</v-icon> –í—Å–µ —Å—Ç–∞—Ç—å–∏
        </v-btn>
      </v-col>
      <v-col
        cols="12"
        sm="10"
        md="8"
        offset-sm="1"
        offset-md="2"
      >
        <h1 class="text-h4 text-md-h3 mt-md-10">
          –ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Ä–µ—Ü–µ–ø—Ç —Ñ–æ—Å—Ñ–∞—Ç–∞ PO<sub>4</sub>
        </h1>
        <h2 class="title font-weight-regular mb-6">
          —Å–∞–º–æ–¥–µ–ª—å–Ω–æ–µ —É–¥–æ–±—Ä–µ–Ω–∏–µ —Å —Ñ–æ—Å—Ñ–∞—Ç–æ–º –¥–ª—è —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–∫–≤–∞—Ä–∏—É–º–∞
        </h2>
        <div class="subtitle-2">
          –ú–∏—Ö–∞–∏–ª –õ–∞–ø—à–∏–Ω
        </div>
        <div class="subtitle-2 mb-10">
          11 –º–∞—Ä—Ç–∞ 2024
        </div>

        <v-alert
          type="success"
          prominent
          :icon="false"
          class="mb-6"
          variant="tonal"
        >
          –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç, –µ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–∞—è
          <nuxt-link :to="localePath('/recipes/')">
            —Å—Ç—Ä–∞–Ω–∏—Ü–∞
          </nuxt-link>
          —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏.
        </v-alert>

        <p>
          –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã –ø—Ä–æ–¥–æ–ª–∂–∏–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–∞–º—ã–µ –ø—Ä–æ—Å—Ç—ã–µ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–∏—Ö —É–¥–æ–±—Ä–µ–Ω–∏–π –∏ —Ç–µ–ø–µ—Ä—å
          –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ñ–æ—Å—Ñ–∞—Ç–µ ‚Äî —ç–ª–µ–º–µ–Ω—Ç–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∞–∫–≤–∞—Ä–∏—É–º–∏—Å—Ç—ã-–ª—é–±–∏—Ç–µ–ª–∏ –≤–æ–¥–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π –æ–±—Ä–∞—â–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –≤–æ –≤—Ç–æ—Ä—É—é
          –æ—á–µ—Ä–µ–¥—å.
        </p>

        <p>
          –ü–æ–∑–≤–æ–ª—å—Ç–µ –º–Ω–µ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ–≥–æ, —á—Ç–æ —è –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é –ø–æ–¥ "–≤—Ç–æ—Ä—ã–º –≤–∞–∂–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º".
          –ó–¥–µ—Å—å —è –∏–º–µ—é –≤ –≤–∏–¥—É, —á—Ç–æ —Ñ–æ—Å—Ñ–∞—Ç —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Ç–æ—Ä—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤—ã –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
          —É–¥–æ–±—Ä–µ–Ω–∏–π, –ø–æ–¥–±–æ—Ä–µ –¥–æ–∑–∏—Ä–æ–≤–æ–∫ –∏–ª–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–¥—ã. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Ä–æ—Å—Ç —Ä–∞—Å—Ç–µ–Ω–∏–π, –Ω–µ–ª—å–∑—è
          —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–ª–∏ –Ω–µ–≤–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–∂–µ –æ–¥–Ω–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç
          –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ —Ä–æ—Å—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏–π. –û–±—ã—á–Ω–æ –ø–µ—Ä–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞—â–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è –Ω–∏—Ç—Ä–∞—Ç,
          –∞ —Å–ª–µ–¥—É—é—â–∏–º ‚Äî —Ñ–æ—Å—Ñ–∞—Ç.
        </p>

        <p>
          –ü–µ—Ä–µ—Ö–æ–¥—è –∫ —Ä–µ—Ü–µ–ø—Ç—É, –µ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–æ–µ –∂–µ –ø—Ä–æ—Å—Ç–æ–µ, –∫–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –Ω–∏—Ç—Ä–∞—Ç–æ–º.
          –ï—Å–ª–∏ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∏—Å—å
          –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º –¥–æ–º–∞—à–Ω–∏—Ö —É–¥–æ–±—Ä–µ–Ω–∏–π –∏ –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
          <nuxt-link :to="localePath('/articles/simplest-nitrate/')">
            –Ω–∏—Ç—Ä–∞—Ç–Ω–æ–≥–æ —É–¥–æ–±—Ä–µ–Ω–∏—è
          </nuxt-link>, —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é
          –Ω–∞—á–∞—Ç—å –∏–º–µ–Ω–Ω–æ —Å –Ω–µ–≥–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –±—É–¥–µ—Ç –ø–æ—è—Å–Ω–µ–Ω–∏–π –º–µ–Ω—å—à–µ.
        </p>

        <p>
          –û–±—ã—á–Ω–æ —Ñ–æ—Å—Ñ–∞—Ç –≤–Ω–æ—Å—è—Ç –≤ –∞–∫–≤–∞—Ä–∏—É–º –≤ –¥–µ—Å—è—Ç—å —Ä–∞–∑ –º–µ–Ω—å—à–µ, —á–µ–º –Ω–∏—Ç—Ä–∞—Ç, –µ—Å–ª–∏ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º
          –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–º –≥—Ä—É–Ω—Ç–µ. –¢–∞–∫, –µ—Å–ª–∏ –≤ –Ω–µ–¥–µ–ª—é –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ 7 –º–≥/–ª
          –Ω–∏—Ç—Ä–∞—Ç–∞, —Ç–æ —Ñ–æ—Å—Ñ–∞—Ç —Å–ª–µ–¥—É–µ—Ç –¥–∞–≤–∞—Ç—å –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ 0.7 –º–≥/–ª, —Ç–æ –µ—Å—Ç—å –≤ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ 1 –∫ 10 –∫ –Ω–∏—Ç—Ä–∞—Ç—É. –Ø –Ω–µ —Å–æ–≤–µ—Ç—É—é
          –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ç–µ—Å—Ç—ã; –ª—É—á—à–µ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ä–∞—Å—Ç–µ–Ω–∏–π. –í–µ–¥—å –≤–∞—à–∏ –≥–ª–∞–∑–∞ ‚Äî —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è
          –æ—Ü–µ–Ω–∫–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∞–∫–≤–∞—Ä–∏—É–º–∞.
        </p>

        <p>
          –î–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Å—Ñ–∞—Ç-—Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —É–¥–æ–±—Ä–µ–Ω–∏—è —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–Ω–æ—Ñ–æ—Å—Ñ–∞—Ç –∫–∞–ª–∏—è
          (KH<sub>2</sub>PO<sub>4</sub>), –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω
          —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ä–µ–∞–≥–µ–Ω—Ç–æ–º. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ–Ω—å—à–µ –∫–∞–ª–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å
          –¥—Ä—É–≥–∏–º–∏ —Ñ–æ—Å—Ñ–æ—Ä—Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ —É–¥–æ–±—Ä–µ–Ω–∏—è–º–∏. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —è –±—ã —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –∏–∑–±–µ–≥–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
          –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–∞–ª–∏—è, –µ—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–≤–∞—Ä–∏—É–º–∞.
        </p>

        <p class="mb-10">
          –°—Ç–∞–≤—à–∏–π —É–∂–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º -
          <a href="https://web.archive.org/web/20131206073940/http://www.aqua-botanic.ru/index.html ">—Ä–µ—Ü–µ–ø—Ç</a>
          —Å —Å–∞–π—Ç–∞ Aqua Botanic –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
        </p>

        <v-alert
          type="info"
          icon="mdi-receipt-text"
          class="mb-10"
          variant="tonal"
        >
          <template #prepend>
            <Icon
              name="mdi-receipt-text"
              size="24"
            />
          </template>
          7.01 –≥—Ä–∞–º–º–∞ –º–æ–Ω–æ—Ñ–æ—Å—Ñ–∞—Ç–∞ –∫–∞–ª–∏—è (KH<sub>2</sub>PO<sub>4</sub>) –Ω–∞ 1000 –º–ª
        </v-alert>

        <p>
          –≠—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Ç–∞–∫, —á—Ç–æ–±—ã 1 –º–ª —Ä–∞—Å—Ç–≤–æ—Ä–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Ñ–æ—Å—Ñ–∞—Ç–∞ –Ω–∞ 0.05 –º–≥/–ª –≤ –∞–∫–≤–∞—Ä–∏—É–º–µ
          –æ–±—ä—ë–º–æ–º 100 –ª–∏—Ç—Ä–æ–≤.
        </p>

        <p class="mb-10">
          –ê —Ç–µ–ø–µ—Ä—å, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—é –≤ —Å—Ç–∞—Ç—å–µ –ø—Ä–æ
          <nuxt-link :to="localePath('/articles/simplest-nitrate/')">
            —Å–∞–º–æ–¥–µ–ª—å–Ω—ã–π –Ω–∏—Ç—Ä–∞—Ç,
          </nuxt-link> –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π —Ä–µ—Ü–µ–ø—Ç —Å –ø–æ–º–æ—â—å—é –Ω–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã:
        </p>

        <v-row>
          <v-col
            cols="12"
            md="10"
            offset-md="1"
          >
            <NumberField
              v-model="recipeModel.tankVolume"
              label="–û–±—ä–µ–º –∞–∫–≤–∞—Ä–∏—É–º–∞"
              suffix="–ª"
              variant="outlined"
              @update:model-value="onInputTankVolume"
            />
            <NumberField
              v-model="reagentH2O.amount"
              label="–û–±—ä–µ–º —É–¥–æ–±—Ä–µ–Ω–∏—è"
              suffix="–º–ª"
              variant="outlined"
              @update:model-value="onInputWaterVolume"
            />
            <v-radio-group
              v-model="toggleDose"
              inline
              color="primary"
              class="mt-0"
            >
              <v-radio
                v-for="dose in doseExamples"
                :key="dose"
                :label="`${dose} ${dose !== OTHER_DOSE ? '–º–≥/–ª' : ''}`"
                :value="dose"
              />
            </v-radio-group>
            <NumberField
              :model-value="unitConcs['PO4']"
              label="–î–æ–∑–∏—Ä–æ–≤–∫–∞"
              suffix="–º–≥/–ª"
              variant="outlined"
              :disabled="typeof toggleDose === 'number'"
              @update:model-value="onInputPO4UnitConc"
            />
            <NumberField
              v-model="reagentKH2PO4.amount"
              label="–ú–∞—Å—Å–∞ –º–æ–Ω–æ—Ñ–æ—Å—Ñ–∞—Ç–∞ –∫–∞–ª–∏—è"
              suffix="–≥"
              variant="outlined"
              :error="checkSolubilityError(reagentKH2PO4)"
              :error-messages="getSolubilityErrorMessage(reagentKH2PO4)"
              @update:model-value="onInputReagentAmount"
            />
          </v-col>
        </v-row>

        <v-alert
          type="success"
          icon="mdi-receipt-text"
          class="mt-4 mb-10"
        >
          <template #prepend>
            <Icon
              name="mdi-receipt-text"
              size="24"
            />
          </template>
          –†–µ—Ü–µ–ø—Ç:
          <br><br>
          {{ reagentKH2PO4.amount ? format(reagentKH2PO4.amount) : '-' }}
          –≥ –º–æ–Ω–æ—Ñ–æ—Å—Ñ–∞—Ç–∞ –∫–∞–ª–∏—è (KH<sub>2</sub>PO<sub>4</sub>) –Ω–∞ {{ reagentH2O.amount }} –º–ª.<br><br>
          1 –º–ª –¥–∞–Ω–Ω–æ–≥–æ —É–¥–æ–±—Ä–µ–Ω–∏—è –ø–æ–≤—ã—à–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Ñ–æ—Å—Ñ–∞—Ç–∞ –Ω–∞
          {{ unitConcs['PO4'] ? format(unitConcs['PO4'], 2) : '-' }} –º–≥/–ª –∏ –∫–∞–ª–∏—è –Ω–∞
          {{ unitConcs['K'] ? format(unitConcs['K'], 2) : '-' }} –º–≥/–ª –≤ –∞–∫–≤–∞—Ä–∏—É–º–µ –æ–±—ä–µ–º–æ–º
          {{ recipeModel.tankVolume }} –ª
        </v-alert>

        <p>
          –í–æ—Ç —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –≤—ã —Å–æ–∑–¥–∞–ª–∏ —Å–≤–æ–π –≤—Ç–æ—Ä–æ–π —Ä–µ—Ü–µ–ø—Ç. –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –µ–≥–æ.
        </p>

        <p class="mb-15">
          –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏ —É –≤–∞—Å –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è üëç
        </p>
      </v-col>
      <v-col
        cols="12"
        sm="10"
        md="8"
        offset-sm="1"
        offset-md="2"
        class="d-flex justify-space-between my-15"
      >
        <v-btn
          color="primary"
          :to="localePath('/articles/simplest-nitrate/')"
        >
          <v-icon>mdi-chevron-left</v-icon> –ü—Ä–µ–¥—ã–¥—É—â–∞—è <span class="hidden-xs-only">—Å—Ç–∞—Ç—å—è</span>
        </v-btn>
        <v-btn
          color="primary"
          :to="localePath('/articles/potassium/')"
        >
          –°–ª–µ–¥—É—é—â–∞—è <span class="hidden-xs-only">—Å—Ç–∞—Ç—å—è</span> <v-icon>mdi-chevron-right</v-icon>
        </v-btn>
      </v-col>
    </v-row>
  </v-container>
</template>

<script lang="ts" setup>
const { t } = useI18n();
const localePath = useLocalePath();
const { getReagents } = useReagents();
const INITIAL_REAGENT_AMOUNT = 0;
const reagents = getReagents(INITIAL_REAGENT_AMOUNT);

const OTHER_DOSE = '–¥—Ä—É–≥–∞—è';
const doseExamples: (number | string)[] = [0.025, 0.05, 0.1, OTHER_DOSE];
const toggleDose = ref<number>(0.05);
const unitConcs = ref<Partial<Record<IonType, number>>>({});

const recipeModel = reactive(new FertilizerRecipe(
  {
    name: '',
    description: '',
    tankVolume: 100,
    reagents: [
      reagents.find((reagent) => reagent.key === H2O),
      reagents.find((reagent) => reagent.key === 'KH2PO4'),
    ],
  },
));

const reagentH2O = recipeModel.reagents[0];
const reagentKH2PO4 = recipeModel.reagents[1];
reagentH2O.amount = 500;
reagentKH2PO4.amount = 500;

unitConcs.value = recipeModel.countReagentUnitConcsByAmount(reagentKH2PO4);

// TODO: move to the composables
const checkSolubilityError = (reagent: ReagentType) => {
  return recipeModel.isLiquid && (reagent.amount / recipeModel.totalVolume) * 1000 > reagent.solubility;
};

const getSolubilityErrorMessage = (reagent: ReagentType) => {
  return recipeModel.isLiquid && (reagent.amount / recipeModel.totalVolume) * 1000 > reagent.solubility
    ? `${t('validation.solubilityLimit')} - ${reagent.solubility} ${t('units.g/l')} ${t('common.for')} 25¬∞–°!`
    : '';
};

watch(() => reagentKH2PO4.amount, () => {
  unitConcs.value = recipeModel.countReagentUnitConcsByAmount(reagentKH2PO4);
});

watch(toggleDose, (value) => {
  if (typeof toggleDose.value === 'string') {
    return;
  }
  reagentKH2PO4.amount = format(recipeModel.countReagentAmountByUnitConc(value, reagentKH2PO4, 'PO4'));
}, { immediate: true });

function onInputTankVolume() {
  reagentKH2PO4.amount = format(recipeModel.countReagentAmountByUnitConc(unitConcs.value['PO4'], reagentKH2PO4, 'PO4'));
}

function onInputWaterVolume() {
  reagentKH2PO4.amount = format(recipeModel.countReagentAmountByUnitConc(unitConcs.value['PO4'], reagentKH2PO4, 'PO4'));
}

function onInputReagentAmount() {
  reagentKH2PO4.amount = format(recipeModel.countReagentAmountByUnitConc(unitConcs.value['PO4'], reagentKH2PO4, 'PO4'));
}

function onInputPO4UnitConc(value: number) {
  reagentKH2PO4.amount = format(recipeModel.countReagentAmountByUnitConc(value, reagentKH2PO4, 'PO4'));
}

defineOptions({
  name: 'SimplestPhosphatePage',
});

useSeoMeta({
  title: t('meta.articles.phosphate.title'),
  description: t('meta.articles.phosphate.description'),
  keywords: t('meta.articles.phosphate.keywords'),
});
</script>

<style lang="sass" scoped>
.post
  .post__title
    font-family: "Lexend", sans-serif !important
p
  margin-bottom: 16px
.full-width-image
  width: 100%
  object-fit: cover
  display: block
</style>
